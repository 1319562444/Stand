--[[⣠⠤⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀ ⠀⠀⠀⠀⠀⠀⠀⣀⣀⠀⠀
⠀⠀⡜⠁⠀⠈⢢⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣴⠋⠷⠶⠱⡄
⠀⢸⣸⣿⠀⠀⠀⠙⢦⡀⠀⠀⠀⠀⠀⠀⠀⢀⡴⠫⢀⣖⡃⢀⣸⢹
⠀⡇⣿⣿⣶⣤⡀⠀⠀⠙⢆⠀⠀⠀⠀⠀⣠⡪⢀⣤⣾⣿⣿⣿⣿⣸
⠀⡇⠛⠛⠛⢿⣿⣷⣦⣀⠀⣳⣄⠀⢠⣾⠇⣠⣾⣿⣿⣿⣿⣿⣿⣽
⠀⠯⣠⣠⣤⣤⣤⣭⣭⡽⠿⠾⠞⠛⠷⠧⣾⣿⣿⣯⣿⡛⣽⣿⡿⡼
⠀⡇⣿⣿⣿⣿⠟⠋⠁⠀⠀⠀⠀⠀⠀⠀⠀⠈⠙⠻⣿⣿⣮⡛⢿⠃
⠀⣧⣛⣭⡾⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⢿⣿⣷⣎⡇
⠀⡸⣿⡟⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⢿⣷⣟⡇
⣜⣿⣿⡧⠀⠀⠀⠀⠀⡀⠀⠀⠀⠀⠀⠀⣄⠀⠀⠀⠀⠀⣸⣿⡜⡄
⠉⠉⢹⡇⠀⠀⠀⢀⣞⠡⠀⠀⠀⠀⠀⠀⡝⣦⠀⠀⠀⠀⢿⣿⣿⣹
⠀⠀⢸⠁⠀⠀⢠⣏⣨⣉⡃⠀⠀⠀⢀⣜⡉⢉⣇⠀⠀⠀⢹⡄⠀⠀
⠀⠀⡾⠄⠀⠀⢸⣾⢏⡍⡏⠑⠆⠀⢿⣻⣿⣿⣿⠀⠀⢰⠈⡇⠀⠀
⠀⢰⢇⢀⣆⠀⢸⠙⠾⠽⠃⠀⠀⠀⠘⠿⡿⠟⢹⠀⢀⡎⠀⡇⠀⠀
⠀⠘⢺⣻⡺⣦⣫⡀⠀⠀⠀⣄⣀⣀⠀⠀⠀⠀⢜⣠⣾⡙⣆⡇⠀⠀
⠀⠀⠀⠙⢿⡿⡝⠿⢧⡢⣠⣤⣍⣀⣤⡄⢀⣞⣿⡿⣻⣿⠞⠀⠀⠀
⠀⠀⠀⢠⠏⠄⠐⠀⣼⣿⣿⣿⣿⣿⣿⣿⣿⡇⠀⠳⢤⣉⢳⠀⠀⠀
⢀⡠⠖⠉⠀⠀⣠⠇⣿⡿⣿⡿⢹⣿⣿⣿⣿⣧⣠⡀⠀⠈⠉⢢⡀⠀
⢿⠀⠀⣠⠴⣋⡤⠚⠛⠛⠛⠛⠛⠛⠛⠛⠙⠛⠛⢿⣦⣄⠀⢈⡇⠀
⠈⢓⣤⣵⣾⠁⣀⣀⠤⣤⣀⠀⠀⠀⠀⢀⡤⠶⠤⢌⡹⠿⠷⠻⢤⡀
⢰⠋⠈⠉⠘⠋⠁⠀⠀⠈⠙⠳⢄⣀⡴⠉⠀⠀⠀⠀⠙⠂⠀⠀⢀⡇
⢸⡠⡀⠀⠒⠂⠐⠢⠀⣀⠀⠀⠀⠀⠀⢀⠤⠚⠀⠀⢸⣔⢄⠀⢾⠀
⠀⠑⠸⢿⠀⠀⠀⠀⢈⡗⠭⣖⡒⠒⢊⣱⠀⠀⠀⠀⢨⠟⠂⠚⠋⠀
⠀⠀⠀⠘⠦⣄⣀⣠⠞⠀⠀⠀⠈⠉⠉⠀⠳⠤⠤⡤⠞]]
util.keep_running()
require "lib.daidaimain.natives.natives"
require "lib.daidaimain.natives.othernatives"
require "lib.daidailib.adwords"
require "lib.daidailib.location"
require "lib.daidailib.tables"
require "lib.daidailib.freetext"
require "lib.daidailib.daidailib"
require "lib.daidailib.daidailib1"
require "lib.daidailib.damage_numbers"
require "lib.daidailib.Entity_control"
require "lib.daidailib.flightredux"
require "lib.daidailib.playerinfo"
require "lib.daidailib.casino_swipes"

local UFO = require "lib.daidailib.ufo"
local GuidedMissile = require "lib.daidailib.guided_missile"
local HomingMissiles = require "lib.daidailib.homing_missiles"
local OrbitalCannon = require "lib.daidailib.Orbital_cannon"

self_option = menu.list(menu.my_root(), "自我选项", {}) 
online = menu.list(menu.my_root(), "战局选项", {}) 
chat_m = menu.list(menu.my_root(), "聊天选项", {}) 
vehicle = menu.list(menu.my_root(), "载具选项", {})
weapons = menu.list(menu.my_root(), "武器选项", {})
funfeatures = menu.list(menu.my_root(), "娱乐选项", {})
module_list = menu.list(menu.my_root(), "模组选项", {""}, "")
Task_robbery = menu.list(menu.my_root(), "任务选项", {},"")
worldlist = menu.list(menu.my_root(), "世界选项", {})
protection = menu.list(menu.my_root(), "保护选项", {})
cheater_detection = menu.list(menu.my_root(), "作弊者检测", {})
otherlist = menu.list(menu.my_root(), "其他选项", {})

--自我选项
health = menu.list(self_option, "恢复", {}, "")
    SetMaxHealth = menu.list(health, "设置最大生命值", {}, "")
        local moddedHealth = 328
        menu.toggle_loop(SetMaxHealth, "设置最大生命值", {}, "", function ()
            PED.SET_PED_MAX_HEALTH(players.user_ped(), moddedHealth)
            ENTITY.SET_ENTITY_HEALTH(players.user_ped(), moddedHealth, 0)
            local health = ENTITY.GET_ENTITY_HEALTH(players.user_ped())
            local strg = string.format("~b~HEALTH ~w~ %s", health)
            draw_string(strg, 0.03, 0.05, 0.6, 4)
        end)
        menu.slider(SetMaxHealth, "设置数值", {"moddedhealth"}, "", 100, 9000, 328, 50, function(value)
            moddedHealth = value
        end)

    menu.action(health, "补充血量", {}, "", function()
        ENTITY.SET_ENTITY_HEALTH(players.user_ped(), PED.GET_PED_MAX_HEALTH(players.user_ped()), 0)
    end)
    menu.action(health, "补充护甲", {}, "", function()
        if util.is_session_started() then
            PED.SET_PED_ARMOUR(players.user_ped(), 50)
        else
            PED.SET_PED_ARMOUR(players.user_ped(), 100)
        end
    end)
    supplemental_snacks = menu.list(health, "零食编辑", {}, "")
        menu.action(supplemental_snacks, "补满全部零食", {}, "", function()
            STAT_SET_INT("NO_BOUGHT_YUM_SNACKS", 30)
            STAT_SET_INT("NO_BOUGHT_HEALTH_SNACKS", 15)
            STAT_SET_INT("NO_BOUGHT_EPIC_SNACKS", 5)
            STAT_SET_INT("NUMBER_OF_ORANGE_BOUGHT", 10)
            STAT_SET_INT("NUMBER_OF_BOURGE_BOUGHT", 10)
            STAT_SET_INT("NUMBER_OF_CHAMP_BOUGHT", 5)
            STAT_SET_INT("CIGARETTES_BOUGHT", 20)
            STAT_SET_INT("NUMBER_OF_SPRUNK_BOUGHT", 10)
            util.toast("完成！")
        end)
        menu.action(supplemental_snacks, "补满全部护甲", {}, "", function()
            STAT_SET_INT("MP_CHAR_ARMOUR_1_COUNT", 10)
            STAT_SET_INT("MP_CHAR_ARMOUR_2_COUNT", 10)
            STAT_SET_INT("MP_CHAR_ARMOUR_3_COUNT", 10)
            STAT_SET_INT("MP_CHAR_ARMOUR_4_COUNT", 10)
            STAT_SET_INT("MP_CHAR_ARMOUR_5_COUNT", 10)
            util.toast("完成！")
        end)
        menu.action(supplemental_snacks, "补满呼吸器", {}, "", function()
            STAT_SET_INT("BREATHING_APPAR_BOUGHT", 20)
            util.toast("完成！")
        end)
    menu.toggle_loop(health, '自动加血', {}, '一直加血直到您的血被加满.', function()
        autoBloodReture()
    end)
    menu.toggle_loop(health, "在掩体后时补充生命值", {}, "", function()
        healthincover()
    end, function()
        PLAYER1._SET_PLAYER_HEALTH_RECHARGE_LIMIT(players.user(), 0.25)
        PLAYER.SET_PLAYER_HEALTH_RECHARGE_MULTIPLIER(players.user(), 1.0)
    end)

menu.toggle_loop(self_option, "快速重生", {}, "", function()
    local gwobaw = memory.script_global(2672505 + 1685 + 756) -- Global_2672505.f_1685.f_756
    if PED.IS_PED_DEAD_OR_DYING(players.user_ped()) then
        GRAPHICS.ANIMPOSTFX_STOP_ALL()
        memory.write_int(gwobaw, memory.read_int(gwobaw) | 1 << 1)
    end
end,function()
    local gwobaw = memory.script_global(2672505 + 1685 + 756)
    memory.write_int(gwobaw, memory.read_int(gwobaw) &~ (1 << 1)) 
end)

action_list = menu.list(self_option, "人物行为", {}, "")
    menu.toggle_loop(action_list, "快速上下车", {}, "更快地进入/离开车辆.", function()
        if (TASK.GET_IS_TASK_ACTIVE(players.user_ped(), 160) or TASK.GET_IS_TASK_ACTIVE(players.user_ped(), 167) or TASK.GET_IS_TASK_ACTIVE(players.user_ped(), 165)) and not TASK.GET_IS_TASK_ACTIVE(players.user_ped(), 195) then
            PED.FORCE_PED_AI_AND_ANIMATION_UPDATE(players.user_ped())
        end
    end)
    menu.toggle_loop(action_list, "快速翻越", {}, "更快的翻越一些东西\n例如: 汽车、障碍物等.", function()
        if TASK.GET_IS_TASK_ACTIVE(players.user_ped(), 50) or TASK.GET_IS_TASK_ACTIVE(players.user_ped(), 51) then
            PED.FORCE_PED_AI_AND_ANIMATION_UPDATE(players.user_ped())
        end
    end)
    menu.toggle_loop(self_option, '超级跳', {}, '按下跳跃的时间越长,继续走得更高（也可用于飞行）', function()
        if PAD.IS_CONTROL_PRESSED(0, 22) or PAD.IS_CONTROL_JUST_PRESSED(0, 21) then
            PED.SET_PED_CAN_RAGDOLL(players.user_ped(), false)
            ENTITY.APPLY_FORCE_TO_ENTITY_CENTER_OF_MASS(players.user_ped(), 1, 0.0, 0.6, 0.6, 0, 0, 0, 0, true, true, true, true)
            if ENTITY.IS_ENTITY_IN_AIR(players.user_ped()) then
                ENTITY.APPLY_FORCE_TO_ENTITY_CENTER_OF_MASS(players.user_ped(), 1, 0.0, 0.6, 0.6, 0, 0, 0, 0, true, true, true, true)
            end
        end
    end)
    menu.toggle(action_list, "空中游泳", {}, "", function(on)
        if on then
            menu.trigger_commands("swiminair on")
        else
            menu.trigger_commands("swiminair off")
        end
    end)
    menu.toggle_loop(action_list, "太空步", {}, "", function(on)
        if PAD.IS_CONTROL_PRESSED(32, 32)  or PAD.IS_CONTROL_PRESSED(34, 34) or PAD.IS_CONTROL_PRESSED(35, 35) then
            local f = ENTITY.GET_ENTITY_FORWARD_VECTOR(PLAYER.PLAYER_PED_ID())
            f['x'] = -f['x']
            f['y'] = -f['y']
            f['z'] = -f['z']
            ENTITY.SET_ENTITY_VELOCITY(PLAYER.PLAYER_PED_ID(), f['x'], f['y']*3, 0.0)
        end
    end)

    action_list_lua = menu.list(action_list, "动作选项", {}, "")
        require "lib.daidailib.actions"

            
walkonwater = false
ls_walkwater = menu.toggle(self_option, "在水上行走", {}, "",  function(on)
    walkonwater = on
    if on then
        menu.set_value(ls_driveonwater, false)
        menu.set_value(ls_driveonair, false)
    end
end)

misclightmenu = menu.list(self_option, "发光")
    menu.toggle_loop(misclightmenu, "开启", {}, "", function()
        local pos = ENTITY.GET_ENTITY_COORDS(PLAYER.PLAYER_PED_ID())
        GRAPHICS.DRAW_LIGHT_WITH_RANGE(pos.x, pos.y, pos.z, glow_color.r, glow_color.g, glow_color.b, Radiuslight, intenslight)
    end)
    Radiuslight = 1
    menu.slider(misclightmenu, "设置半径" ,{}, "", 1, 5, 1, 1, function(s)
        Radiuslight = s
    end)
    intenslight = 1
    menu.slider(misclightmenu, "设置强度", {}, "", 1, 5, 1, 1, function(s)
        intenslight = s
    end)
    menu.divider(misclightmenu,"颜色")
    local colorful_glow = menu.colour(misclightmenu,"颜色", {"glowcolour"}, "",glow_color, false, function(newColour)
        glow_color = newColour
    end)
    menu.rainbow(colorful_glow)


----火人
getentityinfo()
local burning_man_ptfx_asset = "core"
local burning_man_ptfx_effect = "fire_wrecked_plane_cockpit"
request_ptfx_asset(burning_man_ptfx_asset)
local trail_bones = {0xffa, 0xfa11, 0x83c, 0x512d, 0x796e, 0xb3fe, 0x3fcf, 0x58b7, 0xbb0}
local looped_ptfxs = {}
local was_burning_man_on = false
Burning_Man = menu.toggle(self_option, "火人", {""}, "", function(on)
    if not on then 
        for _, p in pairs(looped_ptfxs) do
            GRAPHICS.REMOVE_PARTICLE_FX(p, false)
            GRAPHICS.STOP_PARTICLE_FX_LOOPED(p, false)
        end
    else
        request_ptfx_asset(burning_man_ptfx_asset)
        for _, bone in pairs(trail_bones) do
            GRAPHICS.USE_PARTICLE_FX_ASSET(burning_man_ptfx_asset)
            local bone_id = PED.GET_PED_BONE_INDEX(players.user_ped(), bone)
            fx = GRAPHICS.START_NETWORKED_PARTICLE_FX_LOOPED_ON_ENTITY_BONE(burning_man_ptfx_effect, players.user_ped(), 0.0, 0.0, 0.0, 0.0, 0.0, 90.0, bone_id, 0.5, false, false, false, 0, 0, 0, 0)
            looped_ptfxs[#looped_ptfxs+1] = fx
            GRAPHICS.SET_PARTICLE_FX_LOOPED_COLOUR(fx, 100, 100, 100, false)
        end
    end
end)

menu.toggle_loop(self_option, "光环", {}, "", function()
    personllight()
end)   
menu.toggle_loop(self_option, "清洁自己", {}, "保持自身清洁", function()
    PED.CLEAR_PED_BLOOD_DAMAGE(players.user_ped())
    PED.CLEAR_PED_WETNESS(players.user_ped())
    PED.CLEAR_PED_ENV_DIRT(players.user_ped())
end)
menu.action(self_option, "前空翻", {}, "表演一个前空翻", function()
    local hash = util.joaat("prop_ecola_can")
    local prop = entities.create_object(hash, players.get_position(players.user()))
    ENTITY.FREEZE_ENTITY_POSITION(prop)
    ENTITY.ATTACH_ENTITY_TO_ENTITY(players.user_ped(), prop, 0, 0, 0, 0, 0, 0, 0, true, false, false, false, 0, true)
    local hdg = CAM.GET_GAMEPLAY_CAM_ROT(0).z
    ENTITY.SET_ENTITY_ROTATION(prop, 0, 0, hdg, 1)
    for i=1, -360, -8 do
        ENTITY.SET_ENTITY_ROTATION(prop, i, 0, hdg, 1)
        util.yield()
    end
    ENTITY.DETACH_ENTITY(players.user_ped())
    entities.delete_by_handle(prop)
end)

menu.toggle_loop(self_option, "前滚翻", {}, "", function()
    forward_roll()
end, function()
    end_forward_roll()
end)

menu.toggle_loop(self_option, "街舞", {}, "", function()
    breakdance()
end, function()
    end_breakdance()
end)

attach_self = menu.list(self_option, "附加", {})
    menu.toggle(attach_self, "雪人",{""}, "",function(on)
        local zhangzi = "prop_gumball_03"
        local sonwman = "prop_prlg_snowpile"
        if on then
            attach_to_player(sonwman, 0, 0.0, 0, 0, 0, 0,0)
            attach_to_player(sonwman, 0, 0.0, 0, -0.5, 0, 0,0)
            attach_to_player(sonwman, 0, 0.0, 0, -1, 0, 0,0)
            attach_to_player(zhangzi, 0, 0.0, 0, 0, 0, 50,0)
            attach_to_player(zhangzi, 0, 0.0, 0, 0, 0, 125,0)
            attach_to_player(zhangzi, 0, 0.0, 0, 0, 0, -50,0)
            attach_to_player(zhangzi, 0, 0.0, 0, 0, 0, -125,0)
        else
            delete_object(sonwman)
            delete_object(zhangzi)
        end
    end)
    menu.toggle(attach_self, "剑圣", {""}, "", function(state)
        local obj = "prop_cs_katana_01"
        if state then
            attach_to_player(obj, 0, 0, -0.13, 0.5, 0, -150,0)
            attach_to_player(obj, 0, 0, -0.13, 0.5, 0, 150,0)
            attach_to_player(obj, 0, 0.23, 0, 0, 0, -180,100)
        else
            delete_object(obj)
        end
    end)
    menu.toggle(attach_self, "666",{}, "",function(on)
        obj = "prop_mp_num_6"
        if on then     
            attach_to_player(obj, 0, 0, 0, 1.7, 0, 0, 180)
            attach_to_player(obj, 0, 1, 0, 1.7, 0, 0, 180)
            attach_to_player(obj, 0, -1, 0, 1.7, 0, 0, 180)
        else
            delete_object(obj)
        end
    end)
    menu.toggle(attach_self, "冲浪板",{}, "",function(on)
        obj = "prop_surf_board_ldn_03"
        if on then     
            attach_to_player(obj, 0, 0, -0.2, 0.25, 0, -30,0)
        else
            delete_object(obj)
        end
    end)
    menu.toggle(attach_self, "小书包",{}, "",function(on)
        obj = "tr_prop_tr_bag_djlp_01a"
        if on then     
            attach_to_player(obj, 0, 0, -0.2, 0.1, 0, 0,0)
        else
            delete_object(obj)
        end
    end)
    menu.toggle(attach_self, "泳圈",{}, "",function(on)
        obj = "prop_beach_ring_01"
        if on then     
            attach_to_player(obj, 0, 0, 0, 0, 0, 0,0)
        else
            delete_object(obj)
        end
    end)
    guitar_obj = menu.list(attach_self, "吉他")
        menu.toggle(guitar_obj, "吉他1",{}, "",function(on)
            local obj = "prop_acc_guitar_01"
            if on then     
                attach_to_player(obj, 0, 0, -0.15, 0.25, 0, -50,0)
            else
                delete_object(obj)
            end
        end)
        menu.toggle(guitar_obj, "吉他2",{}, "",function(on)
            local obj = "prop_el_guitar_03"
            if on then     
                attach_to_player(obj, 0, 0, -0.15, 0.25, 0, -50,0)
            else
                delete_object(obj)
            end
        end)
        menu.toggle(guitar_obj, "吉他3",{}, "",function(on)
            local obj = "prop_el_guitar_01"
            if on then     
                attach_to_player(obj, 0, 0, -0.15, 0.25, 0, -50,0)
            else
                delete_object(obj)
            end
        end)
        menu.toggle(guitar_obj, "吉他4",{}, "",function(on)
            local obj = "prop_el_guitar_02"
            if on then     
                attach_to_player(obj, 0, 0, -0.15, 0.25, 0, -50,0)
            else
                delete_object(obj)
            end
        end)
    menu.toggle_loop(attach_self, "镜子", {}, "", function()----heezy
        if GRAPHICS.UI3DSCENE_IS_AVAILABLE() then
            if GRAPHICS.UI3DSCENE_PUSH_PRESET("CELEBRATION_WINNER") then
                GRAPHICS.UI3DSCENE_ASSIGN_PED_TO_SLOT("CELEBRATION_WINNER", players.user_ped(), 0, 0.0, 0.0, 0.0);
            end
        end
    end)
    menu.toggle(attach_self, "弹吉他", {}, "", function(on)
        Play_guitar(on)
    end)
    menu.toggle(attach_self, "掌旋球", {}, "", function(on)----GT
        Palm_spin_ball(on)
    end)
    menu.toggle(attach_self, "求助", {}, "", function(on)
        seek_help(on)
    end)
    menu.toggle(attach_self, "献花", {}, "", function(on)
        offer_flower(on)
    end)
    menu.list_action(attach_self, "附加国旗", {}, "", flags_fmt, function(index, val)
        if player_cur_car ~= 0 then 
            local hash = util.joaat(country_flags[index])
            request_model_load(hash)
            local flag = entities.create_object(hash, players.get_position(players.user()))
            local ht = get_model_size(ENTITY.GET_ENTITY_MODEL(player_cur_car)).z
            ENTITY.ATTACH_ENTITY_TO_ENTITY(flag, player_cur_car, 0, 0, 0, ht, 0, 0, 0, true, false, false, false, 0, true)
        end
    end)


menu.action(self_option, "小狗戴恩", {}, "", function()
    menu.trigger_commands("IGFurry")
end)
menu.action(self_option, "胡桃", {}, "", function()
    become_walnuts()
end)
menu.action(self_option, "圣诞怪兽", {}, "", function()
    menu.trigger_commands("UMMYuleMonster")
end)
menu.action(self_option, "化身警察", {}, "", function()
    local p = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(players.user_ped())
    PED.SET_PED_AS_COP(p, true)
    menu.trigger_commands("smycop01")
    menu.trigger_commands("police3")
end)

menu.toggle(self_option, "骑牛", {}, "",function(state)
    ride_cow(state)   
end)

menu.toggle_loop(self_option, "锁定等级", {}, "将你的等级锁定在0", function()
    util.set_local_player_wanted_level(0)
end)
menu.toggle_loop(self_option, '金钱追踪', {}, '', function()
    local targets = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(players.user())
    local tar1 = ENTITY.GET_ENTITY_COORDS(players.user_ped(), true)
    Streamptfx('scr_exec_ambient_fm')
    if TASK.IS_PED_WALKING(targets) or TASK.IS_PED_RUNNING(targets) or TASK.IS_PED_SPRINTING(targets) then
        GRAPHICS.START_NETWORKED_PARTICLE_FX_NON_LOOPED_AT_COORD('scr_ped_foot_banknotes', tar1.x, tar1.y, tar1.z - 1, 0, 0, 0, 1.0, true, true, true)
    end
end)
tripped = menu.list(self_option, '摔倒', {}, '')
    menu.toggle(tripped, '摔倒v1', {}, '', function(toggle)
        tripped1(toggle)
    end)
    menu.toggle_loop(tripped, '摔倒v2', {}, '', function()
        tripped2()
    end)

trailsOpt = menu.list(self_option,"轨迹", {}, "")
    menu.toggle_loop(trailsOpt,"轨迹", {"trails"}, "", function()
        Character_locus()
    end, function()
        stop_Character_locus()
    end)
local trailColour = menu.colour(trailsOpt,"颜色", {"trailcolour"}, "",locus_colour, false, function(newColour)
    locus_color(newColour)
    end)
menu.rainbow(trailColour)


fire_wings = menu.list(self_option, '翅膀', {})
    menu.toggle(fire_wings, "金色翅膀", {}, "", function(on)
        Golden_wings(on)
    end)
    menu.toggle(fire_wings, '火翅膀', {}, '2t同款翅膀', function(toggle)
        fireWing_v1(toggle)
    end)
    colorful_fire_wings = menu.list(fire_wings, '彩色翅膀', {})
        menu.toggle(colorful_fire_wings, '开启', {}, '', function(toggle)
            fireWing_v2(toggle)
        end)
        local colorful_wings = menu.colour(colorful_fire_wings,"颜色", {"wingscolour"}, "",fireWing_v2color, false, function(newColour)
            fireWingv2_color(newColour)
            end)
        menu.rainbow(colorful_wings)

        

firebreath = menu.list(self_option, '喷火', {}, '')
    menu.toggle(firebreath, '喷火', {'JSfireBreath'}, '', function(toggle)
        firebreathxxx(toggle)
    end)
    menu.slider(firebreath, '喷火比例', {'JSfireBreathScale'}, '', 1, 100, fireBreathSettings.scale * 10, 1, function(value)
        firebreathscale(value)
    end)
    menu.rainbow(menu.colour(firebreath, '喷火颜色', {'JSfireBreathColour'}, '', fireBreathSettings.colour, false, function(colour)
        firebreathcolour(colour)
    end))

menu.action(self_option, "拉便便", {}, "", function()
    personlshit()
end)
menu.action(self_option, "打飞机", {}, "", function()
    personlhitplane()
end)
menu.action(self_option, "起飞", {}, "", function()
	local myPos = ENTITY.GET_ENTITY_COORDS(PLAYER.PLAYER_PED_ID(), false)
	ENTITY.SET_ENTITY_COORDS(PLAYER.PLAYER_PED_ID(), myPos.x, myPos.y, myPos.z + 250.0, 1, 0, 0, 1)
end)
menu.action(self_option, "强制打开降落伞", {}, "", function()
	PED.FORCE_PED_TO_OPEN_PARACHUTE(PLAYER.GET_PLAYER_PED(players.user()))
end)
menu.action(self_option, "给予降落伞", {}, "", function()
	WEAPON.GIVE_DELAYED_WEAPON_TO_PED(players.user_ped(), util.joaat("gadget_parachute"), 1, 0)
end)

menu.slider(self_option, '幽灵', {}, '修改您人物的不透明度.', 0, 255, 255, 51, function(value)
    ENTITY.SET_ENTITY_ALPHA(players.user_ped(), value, false)
end)
menu.slider(self_option, '假通缉等级', {}, '', 0, 6, 0, 1, function(value)
    MISC.SET_FAKE_WANTED_LEVEL(value)
end)

TP_movement = menu.list(self_option, '向前移动', {}, '')
    local tpf_units = 1
    menu.action(TP_movement, "移动", {}, "向前移动~个单位", function()
        local pos = ENTITY.GET_OFFSET_FROM_ENTITY_IN_WORLD_COORDS(players.user_ped(), 0, tpf_units, 0)
        ENTITY.SET_ENTITY_COORDS_NO_OFFSET(PLAYER.PLAYER_PED_ID(), pos['x'], pos['y'], pos['z'], true, false, false)
    end)
    menu.slider(TP_movement, "移动距离", {}, "向前传送的距离", 1, 100, 1, 1, function(s)
        tpf_units = s
    end)

menu.list_action(self_option, "获取导弹", {}, "选择导弹", opt_pp, function(index, value, click_type)
    dd02(index, value, click_type)
end)

menu.action(self_option, "吊射炮", {""}, "从某个位置发射一枚火炮", function()
    local ptfx_asset = "scr_indep_fireworks"
    local effect_name = "scr_indep_firework_trailburst"
    diaoshepao(ptfx_asset)
    GRAPHICS.USE_PARTICLE_FX_ASSET(ptfx_asset)
    GRAPHICS.START_NETWORKED_PARTICLE_FX_NON_LOOPED_ON_ENTITY(effect_name, players.user_ped(), 0.0, 0.0, -0.3, 90.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0)
    for i=1, 10 do 
        local coords = ENTITY.GET_OFFSET_FROM_ENTITY_IN_WORLD_COORDS(players.user_ped(), 0.0, i, 0.0)
        FIRE.ADD_EXPLOSION(coords['x'], coords['y'], coords['z'], 67, 0.0, false, false, 0.0, true)
    end
end)
menu.toggle(self_option, '启用脚印', {}, '在所有表面上留下脚印', function(toggle)
    GRAPHICS1._SET_FORCE_PED_FOOTSTEPS_TRACKS(toggle)
end)
menu.toggle(self_option, "禁用脚步声", {}, "", function(state)
    AUDIO1.SET_PED_AUDIO_FOOTSTEP_LOUD(players.user_ped(), not state)
end)

menu.toggle_loop(self_option, "假死", {}, "地图上不会出现你", function()
    if  ENTITY.GET_ENTITY_MAX_HEALTH(players.user_ped()) ~= 0 then
		ENTITY.SET_ENTITY_MAX_HEALTH(players.user_ped(), 0)
	end
end, function()
	ENTITY.SET_ENTITY_MAX_HEALTH(players.user_ped(), 328)
end)


----战局选项
players_list = menu.list(online, "在线玩家", {}, "")
    players.on_join(player_list)
    players.on_leave(handle_player_list)

frendlist = menu.list(online, "好友列表", {}, "")
    menu.divider(frendlist, "好友:)")
    for i = 0 , get_friend_count() do
        local name = get_frined_name(i)
        if name == "*****" then goto yes end
        gen_fren_funcs(name)
        ::yes::
    end

play_info =menu.list(online, "绘制玩家信息", {}, "")
    players_info = menu.toggle_loop(play_info,"开启",{},"配置[√]\n请于其他选项使用[保存配置]",function()
        infoverplaytoggle()
    end)
    menu.set_value(players_info, config_active6)
    infoverplay = menu.list(play_info, "设置", {}, "")
        menu.divider(infoverplay, "位置")
        menu.slider_float(infoverplay, "X:", {"overlayx"}, "信息显示的水平位置.", 0, 1000, 0, 1, function(s)
            gui_x = s/1000
        end)
        menu.slider_float(infoverplay, "Y:", {"overlayy"}, "信息显示的垂直位置.", 0, 1000, 0, 1, function(s)
            gui_y = s/1000
        end)
        menu.divider(infoverplay, "外观")
        colours = menu.list(infoverplay, "叠加颜色", {}, "")
            menu.divider(colours, "构成要素")
            menu.colour(colours, "标题栏颜色", {"overlaytitle_bar"}, "标题栏的颜色.", infocolour.title_bar, true, function(on_change)
                title_bar_color(on_change)
            end)
            menu.colour(colours, "背景颜色", {"overlaybg"}, "背景的颜色.", infocolour.background, true, function(on_change)
                infocolour.background = on_change
            end)
            menu.colour(colours, "生命值颜色", {"overlayhealth_bar"}, "生命值的颜色.", infocolour.health_bar, true, function(on_change)
                infocolour.health_bar = on_change
            end)
            menu.colour(colours, "护甲值颜色", {"overlayarmour_bar"}, "护甲值的颜色.", infocolour.armour_bar, true, function(on_change)
                infocolour.armour_bar = on_change
            end)
            menu.colour(colours, "标记点颜色", {"overlayblip"}, "地图标记点的颜色.", infocolour.blip, true, function(on_change)
                infocolour.blip = on_change
            end)
            menu.divider(colours, "文本")
            menu.colour(colours, "名字颜色", {"overlayname"}, "玩家名字的颜色.", infocolour.name, true, function(on_change)
                infocolour.name = on_change
            end)
            menu.colour(colours, "标签颜色", {"overlaylabel"}, "标签文字的颜色.", infocolour.label, true, function(on_change)
                infocolour.label = on_change
            end)
            menu.colour(colours, "信息颜色", {"overlayinfo"}, "信息文本的颜色.", infocolour.info, true, function(on_change)
                infocolour.info = on_change
            end)
        element_dim = menu.list(infoverplay, "元件的尺寸和间距", {}, "")
            menu.divider(element_dim, "元件的尺寸和间距")
            menu.slider(element_dim, "标题栏高度", {}, "标题栏的高度.", 0, 100, 22, 1, function(on_change)
                name_h = on_change/1000
            end)
            menu.slider(element_dim, "信息显示栏宽度", {}, "文本窗口的宽度减去填充的宽度.", 0, 50, 16, 1, function(on_change)
                gui_w = on_change/100
            end)
            menu.slider(element_dim, "填充", {}, "信息文本周围的填充.", 0, 30, 8, 1, function(on_change)
                padding = on_change/1000
            end)
            menu.slider(element_dim, "间隔", {}, "不同元素的间距.", 0, 20, 3, 1, function(on_change)
                spacing = on_change/1000
            end)
        text_dim = menu.list(infoverplay, "文字的大小和间距", {}, "")
            menu.divider(text_dim, "文字的大小和间距")
            menu.slider_float(text_dim, "名字", {}, "玩家姓名文字的大小.", 0, 100, 52, 1, function(on_change)
                name_size = on_change/100
            end)
            menu.slider_float(text_dim, "信息文本", {}, "信息文本的大小.", 0, 100, 41, 1, function(on_change)
                text_size = on_change/100
            end)
            menu.slider(text_dim, "行距", {}, "信息文本行间的间距.", 0, 100, 32, 1, function(on_change)
                line_spacing = on_change/10000
            end)
        border = menu.list(infoverplay, "边框", {}, "")
            menu.divider(border, "边框设置")
            menu.slider(border, "宽度", {}, "在元素周围呈现的边框的宽度.", 0, 20, 0, 1, function(on_change)
                border_widthd(on_change)
            end)
            local border_c_slider = menu.colour(border, "颜色", {"overlayborder"}, "渲染边框的颜色.", infocolour.border, true, function(on_change)
                infocolour.border = on_change
            end)
            menu.rainbow(border_c_slider)



musiclist = menu.list(online, "音乐", {}, "")
    menu.toggle(musiclist, "播放", {"Playmusic"}, "音乐文件放置: '文档\\Rockstar Games\\GTA V\\User Music'中", function(on)
        music(on)
    end)
    menu.toggle_loop(musiclist, "蹦迪", {}, "", function()
        HUD.FLASH_MINIMAP_DISPLAY_WITH_COLOR(hud_rgb_colors[hud_rgb_index])
        hud_rgb_index = hud_rgb_index + 1
        if hud_rgb_index == 4 then
            hud_rgb_index = 1
        end
        util.yield(200)
    end)

request_services = menu.list(online, "请求服务", {""}, "")
    weather = menu.list(request_services, "请求天气", {""}, "")
        menu.action(weather, "请求雷雨天气", {}, "", function()
            menu.trigger_commands("thunderon")
        end)
        menu.action(weather, "关闭雷雨天气", {}, "", function()
            menu.trigger_commands("thunderoff")
        end)
    menu.action(request_services, "纳米无人机", {}, "", function()
        nanodrone()
    end)
    menu.action(request_services, "RC匪徒", {}, "", function()
        SET_INT_GLOBAL(2793046 + 6874, 1)
    end)
    menu.action(request_services, "RC坦克", {}, "", function()
        SET_INT_GLOBAL(2793046 + 6875, 1)
    end)
    menu.action(request_services, "机动作战中心", {}, "", function()
        SET_INT_GLOBAL(2793046 + 925, 1)
    end)
    menu.action(request_services, "复仇者", {}, "", function()
        SET_INT_GLOBAL(2793046 + 933, 1)
    end)
    menu.action(request_services, "恐霸", {}, "", function()
        SET_INT_GLOBAL(2793046 + 937, 1)
    end)
    menu.action(request_services, "重型防弹装甲", {}, "", function()
        SET_INT_GLOBAL(2793046 + 896, 1)
    end)
    menu.action(request_services, "请求豪华直升机", {}, "", function()
        Luxury_Helicopter()       
    end)
    menu.action(request_services, "请求空袭", {}, "", function()
        menu.trigger_commands("airstrike")
    end)
    menu.action(request_services, "请求弹药空投", {}, "", function()
        menu.trigger_commands("requestammodrop")
    end)
    menu.action(request_services, "请求船只接送", {}, "", function()
        menu.trigger_commands("boatpickup")
    end)
    menu.action(request_services, "请求直升机接送", {}, "", function()
        menu.trigger_commands("helipickup")
    end)
    menu.action(request_services, "请求直升机支援", {}, "", function()
        menu.trigger_commands("helibackup")
    end)

online_services = menu.list(online, "线上服务", {""}, "")
    menu.toggle(online_services, "获得牛鲨睾酮", {""}, "", function(on_toggle)
        if on_toggle then
            menu.trigger_commands("bst on")
        else
            menu.trigger_commands("bst off")
        end
        util.yield(5000)
    end)
    menu.action(online_services, "移除精神值", {}, "", function()
        menu.trigger_commands("mentalstate 0")
    end)
    menu.action(online_services, "移除悬赏", {}, "", function()
        menu.trigger_commands("removebounty")
    end)
    menu.toggle(online_services, "人间蒸发", {}, "",function(state)
        menu.set_value(menu.ref_by_path("Online>Off The Radar", 38), state)
        announce("Ghostmode " .. (state and "On" or "Off"))
    end)
    menu.action(online_services, "立刻完成刑事破坏", {}, "", function()
        if SCRIPT.GET_NUMBER_OF_THREADS_RUNNING_THE_SCRIPT_WITH_THIS_HASH(util.joaat("am_criminal_damage")) ~= 0 then
            SET_INT_LOCAL('am_criminal_damage', 105,  10000)
            util.yield(3000)
            SET_INT_LOCAL('am_criminal_damage', 110 + 39, 0)
        end
    end)
    menu.action(online_services, "立刻完成检查点", {}, "", function()
        if SCRIPT.GET_NUMBER_OF_THREADS_RUNNING_THE_SCRIPT_WITH_THIS_HASH(util.joaat("am_cp_collection")) ~= 0 then
            SET_INT_LOCAL('am_cp_collection', 3456 + (NETWORK.PARTICIPANT_ID_TO_INT() + 5) + 4 + 1, 120)
            local int = GET_INT_LOCAL('am_cp_collection', 3456 + (NETWORK.PARTICIPANT_ID_TO_INT() + 5) + 4 + 1 )
            util.yield(10000)
            SET_INT_LOCAL('am_cp_collection', 815 + 708, 0)
            SET_INT_LOCAL('am_cp_collection', 815 + 661, 0)--finish 
        end
    end)

local popularity_loop_command_ref = menu.ref_by_path("Online>Quick Progress>Set Nightclub Popularity", 38)
menu.toggle_loop(online, "夜总会人气", {}, "夜总会保持人气最高",function()
    menu.trigger_command(popularity_loop_command_ref, 100)
    util.toast("夜店人气保持中")
    util.yield(2000)
end)
auto_host = menu.toggle_loop(online, "自动获取主机", {}, "", function()
    autogethost()
end)
menu.action(online, "获得脚本主机", {}, "获取脚本主机（加载战局会快哦！！）", function()
    menu.trigger_commands("scripthost")
  end)
menu.toggle_loop(online, "自动获取脚本主机", {}, "", function()
    if players.get_script_host() ~= players.user() then
        menu.trigger_commands("scripthost")
    end
end)
menu.toggle_loop(online, "自动接受并加入游戏", {}, "将自动接受加入任务", function() -- credits to soulreaper for sending me this :D
    local message_hash = HUD.GET_WARNING_SCREEN_MESSAGE_HASH()
    if message_hash == 15890625 or message_hash == -587688989 then
        PAD.SET_CONTROL_VALUE_NEXT_FRAME(2, 201, 1.0)
        util.yield(50)
    end
end)

menu.action(online, "索赔所有车辆", {}, "", function()
	reclaimVehicles()
end)

------------------------------------------------------全局选项
all = menu.list(online, "全局选项", {}) 
        menu.divider(all, "全局娱乐")
    all_happy = menu.list(all, "娱乐选项", {}) 
        menu.divider(all, "全局恶搞")
    sn = menu.list(all, "恶搞选项", {}, "")
    sk = menu.list(all, "崩溃全局", {}, "")
    kickall_list = menu.list(all, "踢出选项", {}, "")

menu.action(all_happy, '雪球大战', {}, '圣诞快乐', function()
    local plist = players.list()
    local snowballs = util.joaat('WEAPON_SNOWBALL')
    for i = 1, #plist do
        local plyr = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(plist[i])
        WEAPON.GIVE_DELAYED_WEAPON_TO_PED(plyr, snowballs, 20, true)
        WEAPON.SET_PED_AMMO(plyr, snowballs, 20)
        players.send_sms(plist[i], players.user(), '雪球大战!你获得了雪球')
        util.yield()
    end
end)
menu.action(all_happy, '烟花大战', {}, '新年快乐', function()
    local plist = players.list()
    local fireworks = util.joaat('weapon_firework')
    for i = 1, #plist do
        local plyr = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(plist[i])
        WEAPON.GIVE_DELAYED_WEAPON_TO_PED(plyr, fireworks, 20, true)
        WEAPON.SET_PED_AMMO(plyr, fireworks, 20)
        players.send_sms(plist[i], players.user(), '去你妈的美国!你获得了烟花')
        util.yield()
    end
end)
menu.action(all_happy, "给予所有玩家MK-2", {}, "", function()
    for k,v in pairs(players.list(true, true, true)) do
        give_oppressor(v)
        util.yield()
    end
end)

----全局恶搞选项
menu.divider(sn, "全局恶搞")
menu.toggle_loop(sn,  "禁止进入天基炮室", {}, "生成一个物体 挡住天基炮的门", function()
    local mdd = util.joaat("h4_prop_h4_garage_door_01a")
    if orb_obj_smc == nil or not ENTITY.DOES_ENTITY_EXIST(orb_obj_smc) then
        orb_obj_smc = entities.create_object(mdd, v3(335.9, 4833.9, -59.0))
        ENTITY.SET_ENTITY_HEADING(orb_obj_smc, 125.0)
        ENTITY.FREEZE_ENTITY_POSITION(orb_obj_smc, true)
    end
end,function()
    if orb_obj_smc ~= nil then
        entities.delete_by_handle(orb_obj_smc)
    end
end)
menu.toggle_loop(sn,  "禁止进入高跟鞋", {}, "生成一个物体 挡住高跟鞋的门", function()
    local mdd = util.joaat("h4_prop_h4_garage_door_01a")
    local pos = players.get_position(players.user())
    if orb_obj_hh == nil or not ENTITY.DOES_ENTITY_EXIST(orb_obj_hh) then
        orb_obj_hh = entities.create_object(mdd, v3(128, -1298.5, 29.5))
        ENTITY.SET_ENTITY_ROTATION(orb_obj_hh, 0.0, 0.0, 30, 1, true)
        ENTITY.FREEZE_ENTITY_POSITION(orb_obj_hh, true)
    end
end,function()
    if orb_obj_hh ~= nil then
        entities.delete_by_handle(orb_obj_hh)
    end
end)
menu.toggle_loop(sn, "脚本主机轮盘", {}, "循环给予所有人脚本主机\n可能破坏战局", function()
    for _, pid in ipairs(players.list(false, true, true)) do
        menu.trigger_commands("givesh" .. players.get_name(pid))
        util.yield(1500)
    end
end)
menu.action(sn, "发送到介绍界面", {}, "将战局中的每个人都送到GTAOnline的介绍动画中去.", function()
    for _, pid in players.list(false, true, true) do
        local int = memory.read_int(memory.script_global(1894573 + 1 + (pid * 608) + 510))  -- Global_1894573[PLAYER::PLAYER_ID() /*608*/].f_510
            util.trigger_script_event(1 << pid, {-95341040, players.user(), 20, 0, 0, 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1, 0, 0, 0, 0, 0, int})
            util.trigger_script_event(1 << pid, {1742713914, players.user(), 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0})
    end
end)
menu.action(sn, "发送到高尔夫俱乐部", {}, "让战局中所有人都去打高尔夫.", function()
    for _, pid in players.list(false, true, true) do
        local int = memory.read_int(memory.script_global(1894573 + 1 + (pid * 608) + 510))
            util.trigger_script_event(1 << pid, {-95341040, players.user(), 193, 0, 0, 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1, 0, 0, 0, 0, 0, int})
            util.trigger_script_event(1 << pid, {1742713914, players.user(), 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0})
    end
end)
auto_bounty = menu.list(sn, "悬赏", {}, "")
    local InSession = function() return util.is_session_started() and not util.is_session_transition_active() end
    local bounty_include_self = false
        local session_bounty_amount = 10000
            menu.toggle_loop(auto_bounty,"自动悬赏",{},"循环向每个人提供悬赏",function()
                for _,pid in pairs(players.list(bounty_include_self)) do
                    if InSession() and players.get_bounty(pid) ~= session_bounty_amount and players.get_name(pid) ~= "UndiscoveredPlayer" then
                        menu.trigger_commands("bounty"..players.get_name(pid).." "..session_bounty_amount)
                    end
                    util.yield(150)
                end
                util.yield(5000)
            end)
            auto_bounty:slider("悬赏金额",{"autobountyamount"},"选择自动提供的赏金金额",1,10000,10000,1000,function(amount)
                session_bounty_amount = amount
            end)
            menu.toggle(auto_bounty,"排除自己",{},"悬赏不会提供给你自己",function(on)
                if on then
                    bounty_include_self = false
                else
                    bounty_include_self = true
                end
            end,true)
menu.action(sn, "劫持所有载具", {}, "生成一个劫匪NPC,把他们从车里带出来并开走开.", function()
    for _, pid in players.list(false, true, true) do
        local ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        local pos = players.get_position(pid)
        local ped_dist = v3.distance(players.get_position(players.user()), players.get_position(pid))
        local cam_dist = v3.distance(pos, players.get_cam_pos(players.user()))

        if ped_dist < 1000.0 and cam_dist < 1000.0 and PED.IS_PED_IN_ANY_VEHICLE(ped, false) then
            menu.trigger_commands("hijack " .. players.get_name(pid))
        end
    end
end)
menu.toggle_loop(sn,  "赌场陷阱", {}, "", function() 
    local mdl = util.joaat("hei_prop_ss1_mpint_garage2")
    request_model(mdl)
    if trap_obj == nil or trap_obj2 == nil or not ENTITY.DOES_ENTITY_EXIST(trap_obj) or not ENTITY.DOES_ENTITY_EXIST(trap_obj2) then
        trap_obj = entities.create_object(mdl, v3(1089.62, 206.334, -48.473))
        trap_obj2 = entities.create_object(mdl, v3(1090.0166, 213.826, -48.473))
        ENTITY.SET_ENTITY_HEADING(trap_obj2, 31.0)
        local objs = {trap_obj, trap_obj2}
        for _, obj in objs do
            entities.set_can_migrate(entities.handle_to_pointer(obj), false)
            ENTITY.FREEZE_ENTITY_POSITION(obj, true)
            ENTITY.SET_ENTITY_NO_COLLISION_ENTITY(players.user_ped(), obj, false)
        end
    end
    util.yield()
end, function()
    local objs = {trap_obj, trap_obj2}
    for _, obj in objs do
        if obj ~= nil then
            NETWORK.NETWORK_REQUEST_CONTROL_OF_ENTITY(obj)
            entities.delete_by_handle(obj)
        end
    end
end)
penitentiary = menu.list(sn, "监狱")
    menu.action(penitentiary, "创建监狱", {}, "仿2t监狱", function()
        local hash = 779277682
        local cage = OBJECT.CREATE_OBJECT_NO_OFFSET(hash, 970, -1020, 40, true, false, false)
        ENTITY.SET_ENTITY_ROTATION(cage, 0.0, -90.0, 0.0, 1, true)
    end)
    menu.action(penitentiary, "创建监狱2", {}, "2t监狱", function()
        local hash = 267648181
        local cage1 = OBJECT.CREATE_OBJECT_NO_OFFSET(hash, 980, -1025, 41.5, true, false, false)
        ENTITY.SET_ENTITY_ROTATION(cage1, 0.0, 0.0, -88.0, 1, true)
        ENTITY.FREEZE_ENTITY_POSITION(cage1, true)
        local cage2 = OBJECT.CREATE_OBJECT_NO_OFFSET(hash, 976, -1033, 41.5, true, false, false)
        ENTITY.SET_ENTITY_ROTATION(cage2, 0.0, 0.0, -143.0, 1, true)
        ENTITY.FREEZE_ENTITY_POSITION(cage2, true)
        local cage3 = OBJECT.CREATE_OBJECT_NO_OFFSET(hash, 967, -1035, 41.5, true, false, false)
        ENTITY.SET_ENTITY_ROTATION(cage3, 0.0, 0.0, 170.0, 1, true)
        ENTITY.FREEZE_ENTITY_POSITION(cage3, true)
        local cage4 = OBJECT.CREATE_OBJECT_NO_OFFSET(hash, 976, -1016, 41.5, true, false, false)
        ENTITY.SET_ENTITY_ROTATION(cage4, 0.0, 0.0, -44, 1, true)
        ENTITY.FREEZE_ENTITY_POSITION(cage4, true)
        local cage5 = OBJECT.CREATE_OBJECT_NO_OFFSET(hash, 967, -1012, 41.5, true, false, false)
        ENTITY.SET_ENTITY_ROTATION(cage5, 0.0, 0.0, -5, 1, true)
        ENTITY.FREEZE_ENTITY_POSITION(cage5, true)
    end)
    menu.action(penitentiary, "发送所有玩家到监狱", {}, "", function()
        menu.trigger_commands("apt24all")
    end)
    menu.action(penitentiary, "将自己传送到监狱外侧", {}, "", function()
        TELEPORT(994,-1013,42)
    end)

menu.action(sn, "匿名杀人", {}, "匿名杀死所有人", function()
    nimingsharen()
end)
menu.action(sn, '爆炸所有人', {}, '爆炸所有玩家.', function()
    local playerList = getNonWhitelistedPlayers(whitelistListTable, whitelistGroups, whitelistedName)
    for _, pid in pairs(playerList) do
        local playerPed = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        explodePlayer(playerPed, false, expSettings)
    end
end)
explodeLoopAll = menu.toggle_loop(sn, '循环爆炸所有人', {}, '不断的爆炸所有玩家.', function()
    local playerList = getNonWhitelistedPlayers(whitelistListTable, whitelistGroups, whitelistedName)
    for _, pid in pairs(playerList) do
        local playerPed = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        explodePlayer(playerPed, true, expSettings)
    end
    util.yield(getTotalDelayabcd(expLoopDelay))
end)
menu.action(sn, "车辆电磁脉冲", {}, "让每个人的车都熄火", function()
    xihuoba()
end)
menu.toggle_loop(sn, '禁飞区', {}, '强迫所有乘坐飞行载具的玩家回到地面.', function()
    local playerList = getNonWhitelistedPlayers(whitelistListTable, whitelistGroups, whitelistedName)
    for _, pid in pairs(playerList) do
        local playerPed = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        local playerVehicle = PED.GET_VEHICLE_PED_IS_IN(playerPed, false)
        if ENTITY.IS_ENTITY_IN_AIR(playerVehicle) then
            NETWORK.NETWORK_REQUEST_CONTROL_OF_ENTITY(playerVehicle)
            ENTITY.APPLY_FORCE_TO_ENTITY(playerVehicle, 1, 0, 0, -0.8, 0, 0, 0.5, 0, false, false, true)
                menu.toast('已应用强制返回地面')
        end
    end
end)
menu.action(sn, "发送所有玩家海滩", {}, "", function () 
    for pid = 0, 32 do
        if pid ~= players.user() and players.exists(pid) then
            util.trigger_script_event(1 << pid, {330622597 ,1, 0, 0, 4,0,PLAYER.GET_PLAYER_INDEX(), pid})
        end
    end
end)
menu.action(sn, "发送所有玩家岛屿", {}, "", function () 
    for pid = 0, 31 do
        if pid ~= players.user() and players.exists(pid) then
            util.trigger_script_event(1 << pid, {330622597, 1, 0, 0, 1, 1,PLAYER.GET_PLAYER_INDEX(), pid})
        end
    end
end)
menu.action(sn, "困住所有玩家", {}, "", function () 
    for pid = 0, 31 do
        if pid ~= players.user() and players.exists(pid) then
            local pos = ENTITY.GET_ENTITY_COORDS(PLAYER.GET_PLAYER_PED(pid))
                pos.z = pos.z + 0.95  
                local pos1 = ENTITY.GET_ENTITY_COORDS(PLAYER.GET_PLAYER_PED(pid))
                pos1.z = pos1.z - 0.90
                local cage = util.joaat("prop_feeder1_cr")
                STREAMING.REQUEST_MODEL(cage)
                OBJECT.CREATE_OBJECT_NO_OFFSET(cage, pos.x, pos.y ,pos.z , true, true)
                OBJECT.CREATE_OBJECT_NO_OFFSET(cage, pos1.x, pos1.y ,pos1.z , true, true)
        end
    end
end)

----全局踢出玩家
menu.toggle_loop(kickall_list, "自动踢出无敌玩家", {}, "", function()
    for pid = 0, 31 do
        if players.is_godmode(pid) and players.get_name(pid) ~= players.get_name(players.user()) then
            menu.trigger_commands("breakup" .. players.get_name(pid))
            util.toast("已踢出 " .. players.get_name(pid) .. " 无敌 :D")
        end
    end
end)
menu.action(kickall_list, "踢出所有玩家", {}, "", function () 
    menu.trigger_commands("kickall")
end)

online_other = menu.list(online, "其他选项", {""}, "")
    unlocks = menu.list(online_other, "解锁选项")
        menu.toggle_loop(unlocks, "50辆载具车库", {}, "", function()
            if memory.read_byte(memory.script_global(262145 + 32688)) ~= 0 then-- thx aero for this global <3
                memory.write_byte(memory.script_global(262145 + 32688), 0) 
            end
            if memory.read_byte(memory.script_global(262145 + 32702)) ~= 1 then
                memory.write_byte(memory.script_global(262145 + 32702), 1)  
            end
        end)
        menu.action(unlocks, "毒品战争内容", {}, "", function()
            for i = 33974, 34112, 1 do
                memory.write_byte(memory.script_global(262145 + i), 1)  
            end
        end)
        menu.action(unlocks, "圣诞和新年礼物", {}, "Change sessions for the gifts to be awarded.", function()
            memory.write_byte(memory.script_global(262145 + 33915), 1)  
            memory.write_byte(memory.script_global(262145 + 33916), 1)  
        end)
    menu.toggle(online_other, "关闭电台", {"closeradio"}, "",function(on)
        if on then
            AUDIO.SET_RADIO_TO_STATION_NAME("OFF")
            menu.trigger_commands("Playmusic off")
        end
    end)
    menu.toggle(online_other, '同步时间', {}, '与现实时间同步', function(toggle)
        Real_world_time(toggle)
    end)
    show_time = menu.toggle(online_other, "显示时间", {}, "配置[√]\n请于其他选项使用[保存配置]", function(state)
        daidaishijian(state)
    end)
    menu.set_value(show_time, config_active2)

    host_sequence_list = menu.list(online_other,"主机序列",{},"")
        host_sequence = menu.toggle_loop(host_sequence_list, "主机序列", {}, "配置[√]\n请于其他选项使用[保存配置]", function()
            zhujixvlie()
        end)
        menu.set_value(host_sequence, config_active1)
        host_sequence_x = menu.slider(host_sequence_list, "x坐标", {"watermark-x"}, "配置[√]\n请于其他选项使用[保存配置]", -1000, 1000, config_active1_x, 10, function(x_)
            zhujixvlie_x(x_)
        end)
        host_sequence_y = menu.slider(host_sequence_list, "y坐标", {"watermark-y"}, "配置[√]\n请于其他选项使用[保存配置]", -1000, 1000, config_active1_y, 10, function(y_)
            zhujixvlie_y(y_)
        end)

    numfps = menu.toggle(online_other, "显示fps", {}, "配置[√]\n请于其他选项使用[保存配置]", function(on)
        fps(on)
    end)
    menu.set_value(numfps, config_active4)

    show_entityinfo = menu.toggle_loop(online_other, "实体池信息", {}, "配置[√]\n请于其他选项使用[保存配置]", function()
        entityinfo()
    end)
    menu.set_value(show_entityinfo, config_active5)

    script_name = menu.toggle(online_other, "显示脚本名称", {}, "配置[√]\n请于其他选项使用[保存配置]", function(state)
        daidaijiaoben(state)
    end)
    menu.set_value(script_name, config_active3)


------翻译
TRANROOT = menu.list(chat_m, "聊天翻译", {""}, "")
    menu.toggle(TRANROOT, "开启翻译", {}, "", function(on)
        translate_toggle(on)
    end)
    settingtrad = menu.list(TRANROOT, "翻译设置")
        tradlocamenu = menu.list_select(settingtrad, "翻译语言的位置", {}, "", {"团队聊天","全部聊天", "通知"},1, function(s)
            translate_pos(s)
        end)
        menu.toggle(settingtrad, "翻译自我", {}, "", function(on)
            translate_myself(on)
        end, true)
        menu.toggle(settingtrad, "强制翻译", {}, "即使语言与目标语言相同,也要进行翻译", function(on)
            translate_cc(on)
        end)
    targetlangmenu = menu.list_select(TRANROOT, "目标语言", {}, "", LangName, 1, function(s)
        translate_target(s)  
    end)
    

chatspamtrash = menu.list(chat_m, "聊天刷屏")
    taunt = menu.list(chatspamtrash, "嘲讽")
        menu.action(taunt, "嘲讽v1", {""}, ": u cant crash 2stand1 daidaiScript user XD", function()
            chat.send_message("u cant crash 2stand1 daidaiScript user XD",false,true,true)
        end)
        menu.action(taunt, "嘲讽v2", {""}, ": u cant crash GTA5 Online assistant user XD", function()
            chat.send_message("u cant crash GTA5 Online assistant user XD",false,true,true)
        end)
    custom_taunt = menu.list(chatspamtrash, "自定义")
        menu.action(custom_taunt, tauntname1, {""}, "内容可在lib/daidailib/freetext中修改", function()
            chat.send_message(custom_taunt_sentence1,false,true,true)
        end)
        menu.action(custom_taunt, tauntname2, {""}, "内容可在lib/daidailib/freetext中修改", function()
            chat.send_message(custom_taunt_sentence2,false,true,true)
        end)
    menu.action(chat_m, "清除聊天历史", {""}, "", function()
        chat.send_message("\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",false,true,true)
    end)

-------载具选项
veh_max_speed = menu.list(vehicle, "最大速度限制", {}, "")
    local max_speed_value = 200
    menu.toggle_loop(veh_max_speed, "开启", {}, "",function()
        ENTITY.SET_ENTITY_MAX_SPEED(entities.get_user_vehicle_as_handle(), max_speed_value / 3.6)
    end)
    menu.slider(veh_max_speed, "速度设置", {}, "", 0, 300, 200, 10, function (s)
        max_speed_value = s
    end)

menu.slider(vehicle, "载具透明度", {}, "", 0, 255, 255, 51, function (s)
    ENTITY.SET_ENTITY_ALPHA(entities.get_user_vehicle_as_handle(), s, false)
end)
set_self_license = menu.list(vehicle, "自定义车牌", {}, "")
    local default_license = "daidai"
    menu.text_input(set_self_license, "自定义车牌", {"setcarlicense"}, "", function(value)
        default_license = value
    end)
    menu.toggle_loop(set_self_license, "设置车牌", {}, "", function()
        local car = PED.GET_VEHICLE_PED_IS_IN(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(players.user()), true)
        if car ~= 0 then
            request_control_of_entity(car)
            VEHICLE.SET_VEHICLE_NUMBER_PLATE_TEXT(car, default_license)
        end
    end)
    menu.toggle_loop(set_self_license, "渐变车牌", {}, "", function()
        car_card = {"i","i l","i lo","i lov","i love","i love u"}
        for i = 1, #car_card do
            local car = PED.GET_VEHICLE_PED_IS_IN(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(players.user()), true)
            if car ~= 0 then
                request_control_of_entity(car)
                VEHICLE.SET_VEHICLE_NUMBER_PLATE_TEXT(car, car_card[i])
            end
            util.yield(100)
        end
        util.yield(200)
    end)

menu.toggle_loop(vehicle, "自动翻转", {}, "如果你的车辆颠倒或侧面将自动翻转回正", function()
    vehicle_automatically()
end)

vehicleWeaponRoot = menu.list(vehicle, "载具武器", {}, "")
    vehicleWeaponmissile = menu.list(vehicleWeaponRoot, "载具导弹", {}, "")
        menu.toggle_loop(vehicleWeaponmissile, "载具导弹", {}, "", function()
            vehweapon_veh()
        end, function () 
            Vw_state = 0 
        end)
        menu.toggle_loop(vehicleWeaponmissile, "载具激光", {}, "", function ()
            vehlaser()
        end)
        menu.list_select(vehicleWeaponmissile, "设置载具武器", {}, "", {{util.get_label_text("WT_V_SPACERKT")}, {util.get_label_text("WT_RAYPISTOL")},{util.get_label_text("WT_FWRKLNCHR")}, {util.get_label_text("WT_V_TANK")}, {util.get_label_text("WT_V_PLRBUL")}}, 1, function (index)
            setvehweapon(index)
        end)
        vehicleWeaponsControl = menu.list(vehicleWeaponmissile, "更改按键", {}, "")
            for name, control in pairs(Imputs_vehweapon) do
                local keyboard, controller = control[1]:match('^(.+)%s?;%s?(.+)$')
                local strg = ("%s: %s, %s: %s"):format(trans_plane.Keyboard, keyboard, trans_plane.Controller, controller)
                menu.action(vehicleWeaponsControl, strg, {}, "", function()
                    Config.controls.vehicleweapons = control[2]
                    util.show_corner_help(trans_plane.VehicleWeapons:format(name))
                end)
            end

    list_homingMissiles = menu.list(vehicleWeaponRoot, "先进追踪导弹", {}, "允许您在任何载具上使用追踪导弹,并一次射出最多六个目标 ..")
        toggle = menu.toggle_loop(list_homingMissiles, "先进追踪导弹", {}, "", function ()
            if not UFO.exists() and not GuidedMissile.exists() then
                HomingMissiles.mainLoop()
            else
                menu.set_value(toggle, false)
            end
        end)
    whiteList = menu.list(list_homingMissiles, "白名单", {}, "")
        menu.toggle(whiteList, "朋友", {}, "", HomingMissiles.SetIgnoreFriends)
        menu.toggle(whiteList, "组织成员", {}, "", HomingMissiles.SetIgnoreOrgMembers)
        menu.toggle(whiteList, "帮会成员", {}, "", HomingMissiles.SetIgnoreCrewMembers)
        
    menu.slider(list_homingMissiles, "最大目标数" , {}, "", 1, 6, 6, 1, HomingMissiles.SetMaxTargets)


menu.toggle_loop(vehicle, "随机升级", {}, "", function()
    randomupdatcar_self()
    util.yield(500)
end)

---------载具喇叭音乐
local SCRIPT_NAME = "daidai-audio/HornSongs"
local script_store_dir = filesystem.store_dir() .. SCRIPT_NAME .. '\\'
V_horn_music = menu.list(vehicle, '载具喇叭音乐', {}, '')
    local songs_dir = join_path(script_store_dir, "songs")
    songs = load_songs(songs_dir)
    for _, song in pairs(songs) do
        menu.action(V_horn_music, "播放 "..song.name, {}, song.description .. "\n音乐速度: " .. song.bpm, function()
            play_song(song)
        end)
    end


menu.toggle_loop(vehicle, "锁定全部载具", {}, "", function()
    for _, pid in players.list(false, true, true) do
        for _, vehicle in entities.get_all_vehicles_as_handles() do
            VEHICLE.SET_VEHICLE_DOORS_LOCKED_FOR_PLAYER(vehicle, pid, true)
            util.yield()
        end
    end
end)
menu.toggle_loop(vehicle, "Mk2自瞄玩家", {}, "当玩家在可视范围是发射导弹后自动瞄准玩家", function()
    for _, pid in players.list(false, true, true) do
        local ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        local ped_dist = v3.distance(players.get_position(players.user()), players.get_position(pid))
        if not PED.IS_PED_DEAD_OR_DYING(ped) and PAD.IS_CONTROL_PRESSED(0, 70) and ped_dist < 200.0 then
            VEHICLE1.SET_VEHICLE_SHOOT_AT_TARGET(players.user_ped(), ped, players.get_position(pid))
        end
    end
end)
Torque_switching = menu.list(vehicle, '扭矩切换', {}, '')
    local num_for_torque = 51
    menu.slider(Torque_switching, "扭矩速度", {"torquespeed"}, "", 1, 500, 51, 1, function(s)
        num_for_torque = s
    end)
    menu.toggle_loop(Torque_switching, "开启", {}, "", function()
        local veh = entities.get_user_vehicle_as_handle()
        if veh ~= nil then
            if not NETWORK.NETWORK_HAS_CONTROL_OF_ENTITY(veh) then
                NETWORK.NETWORK_REQUEST_CONTROL_OF_ENTITY(veh)
            end
            VEHICLE.MODIFY_VEHICLE_TOP_SPEED(veh, num_for_torque)
            ENTITY.SET_ENTITY_MAX_SPEED(veh, num_for_torque)
        end
    end)

menu.toggle(vehicle, '启用车辆轨迹', {}, '在所有表面上留下车辆的轨迹', function(toggle)
    GRAPHICS1._SET_FORCE_VEHICLE_TRAILS(toggle)
end)
menu.action(vehicle,"允许当前车辆进入车库", {}, "允许您将任何车辆驶入车库", function()
    carinto()
end)

nitrogen_acceleration = menu.list(vehicle, '氮气加速', {}, '')
    menu.toggle_loop(nitrogen_acceleration, "氮气加速", {}, "按X使用", function()
        nnitrogen_acceleration()
    end)
    menu.slider(nitrogen_acceleration, "氮气时间", {"nitroduration"}, "", 1, 30, 5, 1, function(val)
        nnitro_duration(val)
    end)
    menu.slider(nitrogen_acceleration, "氮气速度", {"nitropower"}, "", 1, 10000, 2000, 50, function(val)
        nnitro_power(val)
    end)

menu.toggle(vehicle, "反向控制", {}, "", function(state)
    car_crash(state)
end)

dow_block = 0
driveonwater = false
ls_driveonwater = menu.toggle(vehicle, "水上驾驶", {"driveonwater"}, "", function(on)
    driveonwater = on
    if on then
        menu.set_value(ls_driveonair, false)
        menu.set_value(ls_walkwater, false)
    else
        if not driveonair and not walkonwater then
            ENTITY.SET_ENTITY_COORDS_NO_OFFSET(dow_block, 0, 0, 0, false, false, false)
        end
    end
end)

doa_ht = 0
driveonair = false
ls_driveonair = menu.toggle(vehicle, "空中驾驶", {"driveonair"}, "", function(on)
    driveonair = on
    if on then
        local pos = players.get_position(players.user())
        doa_ht = pos['z']
        notification("~y~~bold~使用空格键和ctrl键微调驾驶高度!", HudColour.blue)
        if driveonwater or walkonwater then
            menu.set_value(ls_driveonwater, false)
            menu.set_value(ls_walkwater, false)
        end
    end
end)

menu.toggle_loop(vehicle, "水下驾驶", {}, "", function ()
    menu.trigger_commands("waterwheels")
end)

menu.toggle_loop(vehicle, "载具平移", {}, "使用左右箭头键使车辆水平移动", function(toggle)
    if player_cur_car ~= 0 then
        local rot = ENTITY.GET_ENTITY_ROTATION(player_cur_car, 0)
        if PAD.IS_CONTROL_PRESSED(175, 175) then
            ENTITY.APPLY_FORCE_TO_ENTITY(player_cur_car, 1, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0, true, true, true, false, true)
            ENTITY.SET_ENTITY_ROTATION(player_cur_car, rot['x'], rot['y'], rot['z'], 0, true)
        end
        if PAD.IS_CONTROL_PRESSED(174, 174) then
            ENTITY.APPLY_FORCE_TO_ENTITY(player_cur_car, 1, -1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0, true, true, true, false, true)
            ENTITY.SET_ENTITY_ROTATION(player_cur_car, rot['x'], rot['y'], rot['z'], 0, true)
        end
    end
end)

menu.toggle_loop(vehicle, "车辆下降", {}, "按ctrl", function(toggle)
    if player_cur_car ~= 0 then
        if PAD.IS_CONTROL_JUST_PRESSED(36,36) then
            ENTITY.APPLY_FORCE_TO_ENTITY(player_cur_car, 1, 0.0, 0.0, -20, 0.0, 0.0, 0.0, 0, true, true, true, false, true)
        end
    end
end)
menu.toggle_loop(vehicle, "显示车辆角度", {}, "", function()
    if player_cur_car ~= 0 and PED.IS_PED_IN_ANY_VEHICLE(players.user_ped(), true) then
        local ang = math.abs(math.ceil(math.abs(ENTITY.GET_ENTITY_ROTATION(player_cur_car, 0).z) - math.abs(CAM.GET_GAMEPLAY_CAM_ROT(0).z)))
        directx.draw_text(0.5, 1.0, tostring(ang) .. '°', 5, 1.4, {r=1, g=1, b=1, a=1}, true)
    end
end)

menu.toggle_loop(vehicle, "引擎始终启动", {}, "", function()
	if PED.IS_PED_IN_ANY_VEHICLE(players.user_ped(), false) then
		local vehicle = PED.GET_VEHICLE_PED_IS_IN(players.user_ped(), false)
		VEHICLE.SET_VEHICLE_ENGINE_ON(vehicle, true, true, true)
		VEHICLE.SET_VEHICLE_LIGHTS(vehicle, 0)
		VEHICLE.SET_VEHICLE_HEADLIGHT_SHADOWS(vehicle, 2)
	end
end)

local fastTurnVehicleScale = 3
menu.toggle_loop(vehicle, "自定义转弯", {}, "用A/D键快速转动载具.", function ()
    FastTurnVehicleWithKeys(fastTurnVehicleScale)
end)

chauffeur_root = menu.list(vehicle, "司机服务", {}, "呼叫您的私人司机.")
    menu.list_action(chauffeur_root, "传唤司机", {"summonchauffeur"}, "", {"Stretch", "T20", "Kuruma"}, function(index, value, click_type)
        summ_car(index, value)
    end)
    menu.action(chauffeur_root, "驾车前往航点", {}, "", function(click_type)
        summ_car_topoint()
    end)
    menu.action(chauffeur_root, "传送到驾驶室", {}, "", function(click_type)
        summ_car_tp()
    end)
    menu.action(chauffeur_root, "自我毁灭", {}, "", function(click_type)
        summ_car_bmob()
    end)

menu.click_slider(vehicle, "垂直堆叠", {}, "", 1, 10, 3, 1, function(s)
    setstacky(s)
end)
menu.click_slider(vehicle, "水平堆叠", {}, "", 1, 10, 3, 1, function(s)
    setstackx(s)
end)




menu.toggle(vehicle, "烧焦外形", {}, "", function(on)
    if on then
        menu.trigger_commands("scorched on")
    else
        menu.trigger_commands("scorched off")
    end
end)

menu.toggle_loop(vehicle, '贴地/贴墙行驶', {}, '车辆粘在地上/墙上行驶', function ()
    local curcar = entities.get_user_vehicle_as_handle()
    if PED.IS_PED_IN_ANY_VEHICLE(players.user_ped()) then
        ENTITY.APPLY_FORCE_TO_ENTITY_CENTER_OF_MASS(curcar, 1, 0, 0, - 0.5, 0, true, true, true, true)
        VEHICLE.MODIFY_VEHICLE_TOP_SPEED(curcar, 40)
    end
end)

local veh_jump = menu.list(vehicle, "载具跳跃")
local force = 25.00
menu.slider_float(veh_jump, "跳跃倍率", {"jumpiness"}, "", 0, 10000, 2500, 100, function(value)
    force = value / 100
end)
menu.toggle_loop(veh_jump, "启动", {}, "按空格键跳跃.", function()
    local veh = entities.get_user_vehicle_as_handle()
    if veh ~= 0 and ENTITY.DOES_ENTITY_EXIST(veh) and PAD.IS_CONTROL_JUST_RELEASED(0, 102) then
        ENTITY.APPLY_FORCE_TO_ENTITY(veh, 1, 0.0, force/1.5, force, 0.0, 0.0, 0.0, 0, 1, 1, 1, 0, 1)
        repeat
            util.yield()
        until not ENTITY.IS_ENTITY_IN_AIR(veh)
    end
end)

speedometer_car = menu.list(vehicle, "可视化速度表", {}, "")
    menu.toggle_loop(speedometer_car,"开启", {}, "",function()
        Visual_speedometer()
    end)
	menu.divider(speedometer_car, "车速表选项")
        menu.colour(speedometer_car, "更改强调色", {"spcc"}, "", sp_colour, true, function(colour)
            spp_colour(colour)
        end)
        menu.colour(speedometer_car, "更改文本颜色", {"sptxtc"}, "", cartxt_colour, true, function(colour)
            txtt_colour(colour)
        end)
    menu.divider(speedometer_car, "车速表位置")
        menu.slider(speedometer_car, "车速表位置X", {"spX"}, "", 1, 1000, 865, 1, function(x)
            spp_posX(x)
        end)
        menu.slider(speedometer_car, "车速表位置Y", {"spY"}, "", 1, 1000, 860, 1, function(y)
            spp_posY(y)
        end)


ff9car = menu.list(vehicle, "道奇战马", {}, "")
    Spawn = menu.toggle_loop(ff9car, '道奇战马', {}, '按E使用', function ()
        daoqizhanma()
    end,function()
        stop_daoqizhanma()
    end)
    menu.list_select(ff9car, '电磁脉冲样式', {}, '更改样式为推开或炸毁', maglist, 1, function(magint)
        daoqizhanma_style(magint)
    end)
    
sdroot = menu.list(vehicle, '魔幻激光战马', {}, '')
    SDspawn = menu.toggle_loop(sdroot, '生成魔幻激光战马', {}, '魔幻战马可以发出激光', function ()
        Lazer_Space_Car()
    end,function()
        stop_Magic_w_w()
    end)
    menu.list_select(sdroot, '魔幻战马武器', {},'更改魔幻激光战马的武器', lsdweap, 1, function(vweap)
        Magic_Warhorse_W(vweap)
    end)


-----------UFO载具
UFO_vehicles = menu.list(vehicle, "UFO载具", {}, "")
    menu.textslider(UFO_vehicles, "UFO", {}, "驾驶UFO,使用牵引光束和大炮", ufo_name, function (index)
        local obj = objModels[index]
        UFO.setObjModel(obj)
        if not (GuidedMissile.exists() or UFO.exists()) then 
            UFO.create() 
        end
    end)
    ufoSettings = menu.list(UFO_vehicles, "设置", {}, "")
        menu.toggle(ufoSettings,"禁用玩家框", {}, "", function(toggle)
            Config.ufo.disableboxes = toggle
        end)
        menu.toggle(ufoSettings, "仅吸引玩家载具", {},"使牵引光束忽略带有非玩家驾驶员的车辆", function(toggle)
            Config.ufo.targetplayer = toggle
        end)

menu.toggle(vehicle, "载具时速表", {}, "", function(state)
    vehicle_speedometer(state)
end)
menu.slider(vehicle, "换座位", {""}, "", 1, 6, 1, 1, function(value)
    local ourped = PLAYER.PLAYER_PED_ID()
    if PED.IS_PED_IN_ANY_VEHICLE(ourped, false) then
        local veh = PED.GET_VEHICLE_PED_IS_IN(ourped, false)
        PED.SET_PED_INTO_VEHICLE(ourped, veh, value - 2)
    else
        util.toast("你还没上车呢")
    end
end)
menu.toggle_loop(vehicle, "粘在地上", {""}, "", function()
    local vehicle = PED.GET_VEHICLE_PED_IS_USING(players.user_ped())
    local velocity = ENTITY.GET_ENTITY_VELOCITY(vehicle)
    local height = ENTITY.GET_ENTITY_HEIGHT_ABOVE_GROUND(vehicle)
    local controls = {32, 33, 34, 35}
    if height < 5.0 then
        if ENTITY.IS_ENTITY_IN_AIR(vehicle) then
            VEHICLE1.SET_VEHICLE_ON_GROUND_PROPERLY(vehicle)
        end
    else
        for _, key in ipairs(controls) do
            if vehicle ~= 0 and PAD.IS_CONTROL_PRESSED(0, key) then
                while not PAD.IS_CONTROL_RELEASED(0, key) and ENTITY.IS_ENTITY_IN_AIR(vehicle) do
                    ENTITY.APPLY_FORCE_TO_ENTITY(vehicle, 2, 0, 0, -500 - velocity.z, 0, 0, 0, 0, true, false, true, false, true)
                    util.yield()
                end
            end
        end
    end
end)
menu.toggle_loop(vehicle, '部分载具无限海底挤压深度', {}, '潜水艇,虎鲸...', function ()
    local subs = {'submersible','submersible2','avisa','kosatka', 'toreador'}
    local cursub = ENTITY.GET_ENTITY_MODEL(entities.get_user_vehicle_as_handle())
    for _, s in ipairs(subs) do
        if cursub == util.joaat(s) then
            VEHICLE.SET_SUBMARINE_CRUSH_DEPTHS(entities.get_user_vehicle_as_handle(), false, 2000, 2000, 2000)
        end
    end
end)

carcolor = menu.list(vehicle, '载具变色', {}, '')
    menu.toggle_loop(carcolor, '变色载具', {}, '可使车辆变色', function ()
        zjbs()
    end)
    menu.slider(carcolor, '变色速度', {''}, '改变变色速度', 10, 200, 100, 10, function (c)
        colorspeed(c)
    end)
    menu.toggle_loop(carcolor, '前照灯', {}, '改变前灯', function ()
        qzd()
    end)
    menu.slider(carcolor, '前照灯速度', {''}, '前照灯速度', 10, 200, 100, 10, function (c)
        qzdcolorspeed(c)
    end)

tpnearcar_list = menu.list(vehicle, "传送到最近载具", {}, "")
    menu.action(tpnearcar_list, "传送一次", {}, "", function()
        tp_closest_vehicle()
    end)
    menu.toggle(tpnearcar_list, "按E传送", {}, "", function(on)
        horn_boost_tp(on)
    end)

menu.toggle_loop(vehicle, "转向灯", {}, "按A键和D键使用", function()
    if(PED.IS_PED_IN_ANY_VEHICLE(players.user_ped(), false)) then
        local vehicle = PED.GET_VEHICLE_PED_IS_IN(players.user_ped(), false)
        local left = PAD.IS_CONTROL_PRESSED(34, 34)
        local right = PAD.IS_CONTROL_PRESSED(35, 35)
        local rear = PAD.IS_CONTROL_PRESSED(130, 130)
        if left and not right and not rear then
            VEHICLE.SET_VEHICLE_INDICATOR_LIGHTS(vehicle, 1, true)
        elseif right and not left and not rear then
            VEHICLE.SET_VEHICLE_INDICATOR_LIGHTS(vehicle, 0, true)
        elseif rear and not left and not right then
            VEHICLE.SET_VEHICLE_INDICATOR_LIGHTS(vehicle, 1, true)
            VEHICLE.SET_VEHICLE_INDICATOR_LIGHTS(vehicle, 0, true)
        else
            VEHICLE.SET_VEHICLE_INDICATOR_LIGHTS(vehicle, 0, false)
            VEHICLE.SET_VEHICLE_INDICATOR_LIGHTS(vehicle, 1, false)
        end
    end
end)

car_door = menu.list(vehicle, "车门控制", {}, "")
    menu.toggle(car_door, "所有门", {""}, "", function(on_toggle)
        if on_toggle then
            menu.trigger_commands("openvehdoors on")
        else
            menu.trigger_commands("openvehdoors off")
        end
    end)
menu.action(vehicle, "强制离开载具", {}, "", function(click_type)
    TASK.CLEAR_PED_TASKS_IMMEDIATELY(players.user_ped())
    TASK.TASK_LEAVE_ANY_VEHICLE(players.user_ped(), 0, 16)
end)
menu.toggle_loop(vehicle, "喇叭加速", {}, "", function()
    remote_horn_boost()
end)
menu.toggle_loop(vehicle, "喇叭跳跳车", {}, "", function()
    remote_car_jump()
end)

acceleration_pads = menu.list(vehicle, "加(减)速带", {}, "")
    menu.action(acceleration_pads, "单个加速带", {}, "", function() 
        jiasudian()
    end)
    menu.action(acceleration_pads, "四个加速带", {}, "", function()
        sigejiasudian()
    end) 
    menu.action(acceleration_pads, "单个减速带", {}, "", function()
        jiansudai()
    end)

planehud = menu.list(vehicle, "飞机HUD", {})
    menu.toggle(planehud, "警报", {}, "", function(on)
        gpws = on
    end)
    menu.toggle(planehud , "导弹雷达", {}, "", function(state)
        Missile_radar(state)
    end)
    menu.toggle(planehud , "飞机HUD显示", {}, "", function(state)
        phaneHUD(state)
    end)

vehicle_effect = menu.list(vehicle, "载具效果", {}, "")
    menu.toggle_loop(vehicle_effect, "开关", {}, "", function ()
        vehicle_effectt()
    end)
    menu.list_select(vehicle_effect,"设置载具效果", {}, "", v_eff_options, 1, function (index)
        selectedOptt(index)
    end)

jesus_main = menu.list(vehicle, "自动驾驶", {}, "")
    jesus_toggle = menu.toggle(jesus_main, "启用", {}, "", function(toggle)
        Auto_driving(toggle)
    end)
    menu.list_select(jesus_main, "驾驶风格", {}, "点击以切换风格", style_names, 1, function(index)
        drivestylee(index)
    end)
    menu.slider_float(jesus_main, "驾驶速度", {""}, "调整自动驾驶的速度", 0, 10000, 2000, 100, function(value)
        drivespeedd(value)
    end)


menu.toggle(vehicle, "特斯拉自动驾驶", {}, "", function(toggled)
    Tesla_Autopilot(toggled)
end)

menu.toggle_loop(vehicle, "强制生成反制系统", {}, "让所有载具都有反制系统", function(on)
    if PAD.IS_CONTROL_PRESSED(46, 46) then
        local target = ENTITY.GET_OFFSET_FROM_ENTITY_IN_WORLD_COORDS(players.user_ped(), math.random(-5, 5), -30.0, math.random(-5, 5))
        MISC.SHOOT_SINGLE_BULLET_BETWEEN_COORDS(target['x'], target['y'], target['z'], target['x'], target['y'], target['z'], 100.0, true, 1198879012, players.user_ped(), true, false, 100.0)
    end
end)


vehflyroot = menu.list(vehicle, "载具飞行模式", {}, "自由控制你的载具再天上飞行")
    menu.toggle_loop(vehflyroot, '开启', {}, '', function ()
        veh_fly()
    end, function ()
        close_veh_fly()
    end)
    menu.slider(vehflyroot, '改变飞行速度', {'vehflyspeed'}, '改变载具飞行的速度', 10, 1000, 150, 10, function (s)
        veh_fly_speed(s)
    end)
    menu.toggle(vehflyroot, '无碰撞', {}, '飞行时禁止与其他物体产生碰撞', function (on)
        veh_fly_coll(on)
    end)
    menu.toggle(vehflyroot, '禁用停止', {}, '放开按键后禁止停止载具', function (on)
        veh_fly_stop(on)
    end)


vf = menu.list(vehicle, "冻结选项", {}, "")
    menu.action(vf, "冻结载具", {}, "冻结当前载具", function()
        local vehicle = PED.GET_VEHICLE_PED_IS_IN(PLAYER.PLAYER_PED_ID(), false)
        if vehicle then
            add_frozen_vehicle(vehicle)
        end
    end)
    frozen_vehicles_menu_list = menu.list(vf, "已冻结的载具")
        local tick_counter = 0
        util.create_tick_handler(function()
            if tick_counter % 1000 == 0 then
                update_frozen_vehicles()
            end
            tick_counter = tick_counter + 1
            return true
        end)

menu.action(vehicle, "摧毁载具", {}, "", function ()
    menu.trigger_commands("destroyvehicle")
end)

------模组选项
    require "lib.daidailib.Constructor"


-----任务选项
perrico_island = menu.list(Task_robbery, "佩里科岛", {""}, "")
    menu.action(perrico_island, "呼叫虎鲸", {}, "", function()
        SET_INT_GLOBAL(2793046 + 954, 1)
        notification("~y~~bold~呼叫ing~", HudColour.blue)
    end)	
    island_casino_Task_setting = menu.list(perrico_island, "任务设定", {}, "")
        menu.action(island_casino_Task_setting, "完成所有准备任务", {}, "", function()
            STAT_SET_INT("H4_MISSIONS", 65413)
            STAT_SET_INT("H4CNF_APPROACH", -1)
            STAT_SET_INT("H4CNF_BS_ENTR", 63)
            STAT_SET_INT("H4CNF_BS_GEN", 63)
            STAT_SET_INT("H4CNF_WEP_DISRP", 3)
            STAT_SET_INT("H4CNF_ARM_DISRP", 3)
            STAT_SET_INT("H4CNF_HEL_DISRP", 3)
            STAT_SET_INT("H4CNF_TARGET", 5)
            SET_INT_LOCAL("heist_island_planning", 1525, 2)-------刷新
        end)
        menu.action(island_casino_Task_setting, "重置面板", {}, "", function()
            STAT_SET_INT("H4_MISSIONS", 0)
            STAT_SET_INT("H4_PROGRESS", 0)
            STAT_SET_INT("H4CNF_APPROACH", 0)
            STAT_SET_INT("H4CNF_BS_ENTR", 0)
            STAT_SET_INT("H4CNF_BS_GEN", 0)
            STAT_SET_INT("H4_PLAYTHROUGH_STATUS", 0)
            STAT_SET_INT("H4CNF_TARGET", -1)
            SET_INT_LOCAL("heist_island_planning", 1525, 2)-------刷新
        end)
        
    TELEPORT_island = menu.list(perrico_island, "地点传送", {}, "")    
	menu.action(TELEPORT_island, "任务面板(虎鲸)", {}, "先呼叫潜艇", function()
        if STAT_GET_INT("IH_SUB_OWNED") == 0 then
        else
            TELEPORT(1561.2369, 385.8771, -49.689915)
            SET_HEADING(175)
            STAT_SET_INT("H4_PROGRESS", 131055)
        end
	end)
    menu.action(TELEPORT_island, "传送到大门(外侧)", {}, "", function()
        TELEPORT(4974.189, -5703.279, 19.898539)
    end)
    menu.action(TELEPORT_island, "传送到大门(内测)", {}, "", function()
        TELEPORT(4993.189, -5720.279, 19.898539)
    end)
    menu.action(TELEPORT_island, "主要目标", {}, "", function()
            TELEPORT(5006.7, -5756.2, 14.8)
            SET_HEADING(145)
    end)
    menu.action(TELEPORT_island, "次要目标", {}, "", function()
        TELEPORT(4999.764160, -5749.863770, 14.840000)
    end)
    menu.action(TELEPORT_island, "机场(逃离)", {}, "", function()
        TELEPORT(4443.189, -4510.279, 4.898539)
    end)
    menu.toggle_loop(TELEPORT_island, "传送到大海", {}, "", function()
        TELEPORT(3235, -4938, 56)
        util.yield(1000)
    end)

    fenhong = menu.list(perrico_island, "分红调整", {""}, "分红界面出现时再修改")
        menu.action(fenhong, "全员100%分红", {""}, "", function()
            SET_INT_GLOBAL(1977693 + 823 + 56 + 1, 100)
            SET_INT_GLOBAL(1977693 + 823 + 56 + 2, 100)
            SET_INT_GLOBAL(1977693 + 823 + 56 + 3, 100)
            SET_INT_GLOBAL(1977693 + 823 + 56 + 4, 100)
        end)
        menu.action(fenhong, "全员135%分红", {""}, "分红界面出现时再修改", function()
            SET_INT_GLOBAL(1977693 + 823 + 56 + 1, 135)
            SET_INT_GLOBAL(1977693 + 823 + 56 + 2, 135)
            SET_INT_GLOBAL(1977693 + 823 + 56 + 3, 135)
            SET_INT_GLOBAL(1977693 + 823 + 56 + 4, 135)
        end)
        menu.action(fenhong, "自保分红", {}, "全员135%,自己60%", function()
            SET_INT_GLOBAL(1977693 + 823 + 56 + 1, 60)
            SET_INT_GLOBAL(1977693 + 823 + 56 + 2, 135)
            SET_INT_GLOBAL(1977693 + 823 + 56 + 3, 135)
            SET_INT_GLOBAL(1977693 + 823 + 56 + 4, 135)
        end)
        island_custom_dividends = menu.list(fenhong, "自定义分红", {}, "")
            menu.toggle_loop(island_custom_dividends, "开启", {}, "", function()
                SET_INT_GLOBAL(1977693 + 823 + 56 + 1, menu.get_value(island_dividends))
                SET_INT_GLOBAL(1977693 + 823 + 56 + 2, menu.get_value(island_dividends))
                SET_INT_GLOBAL(1977693 + 823 + 56 + 3, menu.get_value(island_dividends))
                SET_INT_GLOBAL(1977693 + 823 + 56 + 4, menu.get_value(island_dividends))
            end)
            island_dividends = menu.slider(island_custom_dividends, "分红金额", {"hccphostcut"}, "(%)", 0, 1000, 100, 5, function(); end)



    menu.list_action(perrico_island, "抢劫难度", {}, "", {{ "正常", {"normal"} },{ "困难", {"hard"} },}, function(Index)
        if Index == 1 then
            STAT_SET_INT("H4_PROGRESS", 126823)
            SET_INT_LOCAL("heist_island_planning", 1525, 2)-------刷新
        elseif Index == 2 then
            STAT_SET_INT("H4_PROGRESS", 131055)
            SET_INT_LOCAL("heist_island_planning", 1525, 2)-------刷新
        end
    end)
    menu.toggle_loop(perrico_island, "跳过下水道切割", {}, "", function() 
        if IS_HELP_MSG_DISPLAYED("UT_WELD_PROMPT") then 
            PAD2._SET_CONTROL_NORMAL(2, 51, 1)
        elseif GET_INT_LOCAL("fm_mission_controller_2020", 26746) == 4 then 
            SET_INT_LOCAL("fm_mission_controller_2020", 26746, 6)
        end
    end)
    menu.action(perrico_island, "删除排水管", {}, "", function() 
        DELETE_OBJECT_BY_HASH(-1297635988)
    end)
    menu.toggle_loop(perrico_island, "跳过指纹锁", {}, "", function() 
        if GET_INT_LOCAL("fm_mission_controller_2020", 22032) == 4 then 
            SET_INT_LOCAL("fm_mission_controller_2020", 22032, 5)
        end
    end)
    menu.action(perrico_island, "快速切开玻璃", {}, "切割时使用", function()
            SET_FLOAT_LOCAL("fm_mission_controller_2020", 27985 + 3, 100)
        end, function()
            SET_FLOAT_LOCAL("fm_mission_controller_2020", 27985 + 3, 0)
    end)
    menu.toggle_loop(perrico_island, "绕过切割机发热", {}, "切割前开启", function()
        SET_FLOAT_LOCAL("fm_mission_controller_2020", 27985 + 4, 0)
    end)
    menu.action(perrico_island, "杀死队友", {}, "炸死队友,包括自己(无敌可免疫)", function()
        local playerList = getNonWhitelistedPlayers(whitelistListTable, whitelistGroups, whitelistedName)
            for _, pid in pairs(playerList) do
                local playerPed = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
                explodePlayer(playerPed, false, expSettings)
            end
    end)

advanced_options_island = menu.list(perrico_island, "高级选项", {""}, "")
    menu.action(advanced_options_island, "一键完成任务", {}, "", function()
        menu.trigger_commands("scripthost")
        SET_INT_LOCAL("fm_mission_controller_2020", 42279 + 1, 51338752)
        SET_INT_LOCAL("fm_mission_controller_2020", 42279 + 1375 + 1, 50)
    end)
    menu.action(advanced_options_island, "一键结束动画", {}, "仅限单人上岛使用", function()
        menu.trigger_commands("skipcutscene")
    end)
        

------------------赌场选项
casino = menu.list(Task_robbery, "名钻赌场", {""}, "")
    casino_Task_setting = menu.list(casino, "任务设定", {""}, "")
        menu.action(casino_Task_setting, "完成所有准备任务", {}, "目标：钻石\n方式:气势汹汹", function()
            STAT_SET_INT("CAS_HEIST_FLOW", -1)
            STAT_SET_INT("H3_LAST_APPROACH", 0)
            STAT_SET_INT("H3OPT_APPROACH", 3)
            STAT_SET_INT("H3_HARD_APPROACH", 0)
            STAT_SET_INT("H3OPT_TARGET", 3)
            STAT_SET_INT("H3OPT_POI", 1023)
            STAT_SET_INT("H3OPT_ACCESSPOINTS", 2047)
            STAT_SET_INT("H3OPT_CREWWEAP", 4)
            STAT_SET_INT("H3OPT_CREWDRIVER", 3)
            STAT_SET_INT("H3OPT_CREWHACKER", 4)
            STAT_SET_INT("H3OPT_DISRUPTSHIP", 3)
            STAT_SET_INT("H3OPT_BODYARMORLVL", -1)
            STAT_SET_INT("H3OPT_KEYLEVELS", 2)
            STAT_SET_INT("H3OPT_BITSET1", 799)
            STAT_SET_INT("H3OPT_BITSET0", 3670102)
        end)
        menu.action(casino_Task_setting, "重置面板", {}, "", function()
            STAT_SET_INT("H3_LAST_APPROACH", 0)
            STAT_SET_INT("H3OPT_APPROACH", 0)
            STAT_SET_INT("H3_HARD_APPROACH", 0)
            STAT_SET_INT("H3OPT_TARGET", 0)
            STAT_SET_INT("H3OPT_POI", 0)
            STAT_SET_INT("H3OPT_ACCESSPOINTS", 0)
            STAT_SET_INT("H3OPT_BITSET1", 0)
            STAT_SET_INT("H3OPT_CREWWEAP", 0)
            STAT_SET_INT("H3OPT_CREWDRIVER", 0)
            STAT_SET_INT("H3OPT_CREWHACKER", 0)
            STAT_SET_INT("H3OPT_WEAPS", 0)
            STAT_SET_INT("H3OPT_VEHS", 0)        
            STAT_SET_INT("H3OPT_DISRUPTSHIP", 0)
            STAT_SET_INT("H3OPT_BODYARMORLVL", 0)
            STAT_SET_INT("H3OPT_KEYLEVELS", 0)
            STAT_SET_INT("H3OPT_MASKS", 0)
            STAT_SET_INT("H3OPT_BITSET0", 0)
        end)
    TELEPORT_casino = menu.list(casino, "地点传送", {}, "")
        menu.action(TELEPORT_casino, "计划面板(游戏厅)", {}, "先进游戏厅", function()
            TELEPORT(2711.773, -369.458, -54.781)
        end)
        menu.action(TELEPORT_casino, "车库出口(游戏厅)", {}, "先进游戏厅", function()
            TELEPORT(2677.237, -361.494, -55.187)
        end)
        menu.action(TELEPORT_casino, "门口(赌场)", {}, "", function()
            TELEPORT(917.24634, 48.989567, 80.89892)
        end)
        menu.action(TELEPORT_casino, "员工大厅(赌场)", {}, "", function()
            TELEPORT(965.14856, -9.05023, 80.63045)
        end)
        menu.action(TELEPORT_casino, "音乐柜", {}, "", function()
            TELEPORT(997.5346, 84.51491, 80.990555)
        end)
        menu.action(TELEPORT_casino, "废物处理间(赌场)", {}, "", function()
            TELEPORT(2542.052, -214.3084, -58.722965)
        end)
        menu.action(TELEPORT_casino, "员工大门(赌场)", {}, "", function()
            TELEPORT(2547.9192, -273.16754, -58.723003)
        end)
        menu.action(TELEPORT_casino, "双人刷卡点(赌场)", {}, "", function()
            TELEPORT(2465.4746, -279.2276, -70.694145)
        end)
        menu.action(TELEPORT_casino, "金库内部(赌场)", {}, "", function()
            TELEPORT(2515.1252, -238.91661, -70.73713)
        end)
        menu.action(TELEPORT_casino, "库外部(赌场)", {}, "", function()
            TELEPORT(2497.5098, -238.50768, -70.7388)
        end)
        menu.action(TELEPORT_casino,"小金库(赌场)", {}, "", function()
            TELEPORT(2520.8645, -286.30685, -58.723007)
        end)

    fenhong1 = menu.list(casino, "分红调整", {""}, "")
        menu.action(fenhong1, "全员100%分红", {}, "分红界面出现时再修改", function()
            SET_INT_GLOBAL(1970895 + 1497 + 736 + 92+1, 100)
            SET_INT_GLOBAL(1970895 + 1497 + 736 + 92+2, 100)
            SET_INT_GLOBAL(1970895 + 1497 + 736 + 92+3, 100)
            SET_INT_GLOBAL(1970895 + 1497 + 736 + 92+4, 100)
        end)
        menu.action(fenhong1, "全员146%分红", {}, "分红界面出现时再修改", function()
            SET_INT_GLOBAL(1970895 + 1497 + 736 + 92+1, 146)
            SET_INT_GLOBAL(1970895 + 1497 + 736 + 92+2, 146)
            SET_INT_GLOBAL(1970895 + 1497 + 736 + 92+3, 146)
            SET_INT_GLOBAL(1970895 + 1497 + 736 + 92+4, 146)
        end)
        menu.action(fenhong1, "自保分红", {}, "全员146%, 自己60%", function()
            SET_INT_GLOBAL(1970895 + 1497 + 736 + 92+1, 60)
            SET_INT_GLOBAL(1970895 + 1497 + 736 + 92+2, 146)
            SET_INT_GLOBAL(1970895 + 1497 + 736 + 92+3, 146)
            SET_INT_GLOBAL(1970895 + 1497 + 736 + 92+4, 146)
        end)
        casino_custom_dividends = menu.list(fenhong1, "自定义分红", {}, "")
            menu.toggle_loop(casino_custom_dividends, "开启", {}, "", function()
                SET_INT_GLOBAL(1977693 + 823 + 56 + 1, menu.get_value(casino_dividends))
                SET_INT_GLOBAL(1977693 + 823 + 56 + 2, menu.get_value(casino_dividends))
                SET_INT_GLOBAL(1977693 + 823 + 56 + 3, menu.get_value(casino_dividends))
                SET_INT_GLOBAL(1977693 + 823 + 56 + 4, menu.get_value(casino_dividends))
            end)
            casino_dividends = menu.slider(casino_custom_dividends, "分红金额", {"hccphostcut"}, "(%)", 0, 1000, 100, 5, function(); end)


    menu.action(casino, "杀死队友", {}, "炸死队友,包括自己(无敌可免疫)", function()
        local playerList = getNonWhitelistedPlayers(whitelistListTable, whitelistGroups, whitelistedName)
            for _, pid in pairs(playerList) do
                local playerPed = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
                explodePlayer(playerPed, false, expSettings)
            end
    end)
    advanced_options_casino = menu.list(casino, "高级选项", {""}, "")
        menu.action(advanced_options_casino, "一键完成任务", {}, "", function()
            menu.trigger_commands("scripthost")
            SET_INT_LOCAL("fm_mission_controller", 19707, 12)
            SET_INT_LOCAL("fm_mission_controller", 19707 + 1741, 150)
            SET_INT_LOCAL("fm_mission_controller", 28329 + 1, 99999)
            SET_INT_LOCAL("fm_mission_controller", 31585 + 69, 99999)
        end)

doomsday = menu.list(Task_robbery, "末日豪杰", {""}, "")
    doomsday_Task_setting = menu.list(doomsday, "任务设定", {""}, "")
        menu.action(doomsday_Task_setting, "数据泄露 I", {}, "", function()
            STAT_SET_INT("GANGOPS_FLOW_MISSION_PROG", 503)
            STAT_SET_INT("GANGOPS_HEIST_STATUS", -229383)
            STAT_SET_INT("GANGOPS_FLOW_NOTIFICATIONS", 1557)
            SET_INT_LOCAL("gb_gang_ops_planning", 178, 6)------刷新
        end)
        menu.action(doomsday_Task_setting, "波格丹危机 II", {}, "", function()
            STAT_SET_INT("GANGOPS_FLOW_MISSION_PROG", 240)
            STAT_SET_INT("GANGOPS_HEIST_STATUS", -229378)
            STAT_SET_INT("GANGOPS_FLOW_NOTIFICATIONS", 1557)
            SET_INT_LOCAL("gb_gang_ops_planning", 178, 6)------刷新
        end)
        menu.action(doomsday_Task_setting, "末日降临 III", {}, "", function()
            STAT_SET_INT("GANGOPS_FLOW_MISSION_PROG", 16368)
            STAT_SET_INT("GANGOPS_HEIST_STATUS", -229380)
            STAT_SET_INT("GANGOPS_FLOW_NOTIFICATIONS", 1557)
            SET_INT_LOCAL("gb_gang_ops_planning", 178, 6)------刷新
        end)
        menu.action(doomsday_Task_setting, "重置任务面板", {}, "", function()
            STAT_SET_INT("GANGOPS_FLOW_MISSION_PROG", 240)
            STAT_SET_INT("GANGOPS_HEIST_STATUS", 0)
            STAT_SET_INT("GANGOPS_FLOW_NOTIFICATIONS", 1557)
            SET_INT_LOCAL("gb_gang_ops_planning", 178, 6)------刷新
        end)
    doomsday_Task_tp = menu.list(doomsday, "地点传送", {""}, "")
        menu.action(doomsday_Task_tp, "抢劫屏幕", {}, "", function()
            TELEPORT(350.69284, 4872.308, -60.794243)
            SET_HEADING(-50)
        end)

    doomsday_Task_fenhong = menu.list(doomsday, "分红设置", {""}, "")
        menu.action(doomsday_Task_fenhong, "全员100%分红", {}, "分红界面出现时再修改", function()
            SET_INT_GLOBAL(1966831 + 812 + 50 + 1, 100)
            SET_INT_GLOBAL(1966831 + 812 + 50 + 2, 100)
            SET_INT_GLOBAL(1966831 + 812 + 50 + 3, 100)
            SET_INT_GLOBAL(1966831 + 812 + 50 + 4, 100)
        end)
        menu.action(doomsday_Task_fenhong, "全员135%分红", {}, "分红界面出现时再修改", function()
            SET_INT_GLOBAL(1966831 + 812 + 50 + 1, 135)
            SET_INT_GLOBAL(1966831 + 812 + 50 + 2, 135)
            SET_INT_GLOBAL(1966831 + 812 + 50 + 3, 135)
            SET_INT_GLOBAL(1966831 + 812 + 50 + 4, 135)
        end)
        menu.action(doomsday_Task_fenhong, "自保分红", {}, "分红界面出现时再修改", function()
            SET_INT_GLOBAL(1966831 + 812 + 50 + 1, 60)
            SET_INT_GLOBAL(1966831 + 812 + 50 + 2, 135)
            SET_INT_GLOBAL(1966831 + 812 + 50 + 3, 135)
            SET_INT_GLOBAL(1966831 + 812 + 50 + 4, 135)
        end)
        
        local doomsday_dividends = 25
        doomsday_custom_dividends = menu.list(doomsday_Task_fenhong, "自定义分红", {}, "")
            menu.toggle_loop(doomsday_custom_dividends, "开启", {}, "", function()
                SET_INT_GLOBAL(1977693 + 823 + 56 + 1, menu.get_value(doomsday_dividends))
                SET_INT_GLOBAL(1977693 + 823 + 56 + 2, menu.get_value(doomsday_dividends))
                SET_INT_GLOBAL(1977693 + 823 + 56 + 3, menu.get_value(doomsday_dividends))
                SET_INT_GLOBAL(1977693 + 823 + 56 + 4, menu.get_value(doomsday_dividends))
            end)
            doomsday_dividends = menu.slider(doomsday_custom_dividends, "分红金额", {"hcdoomsdaycut"}, "(%)", 0, 1000, 25, 5, function(); end)
-----------

    menu.toggle_loop(Task_robbery, "达克斯冷却", {}, "移除达克斯工作的冷却时间", function()
        STATS.STAT_SET_INT(util.joaat("MP"..util.get_char_slot().."_XM22JUGGALOWORKCDTIMER"), -1, true)
    end)
    menu.toggle_loop(Task_robbery, "立刻完成刑事破坏", {}, "", function ()
        if SCRIPT.GET_NUMBER_OF_THREADS_RUNNING_THE_SCRIPT_WITH_THIS_HASH(util.joaat("am_criminal_damage")) ~= 0 then
              SET_INT_LOCAL('am_criminal_damage', 105,  2147483647)
              util.yield(3000)
              SET_INT_LOCAL('am_criminal_damage', 110 + 39, 0)
          end
      end)

------赌场刷钱
casino_brush_money = menu.list(Task_robbery, "全自动赌场刷钱", {}, "")
    CSmenus.auto_spin = menu.toggle(casino_brush_money, "自动刷钱", {}, "全自动,执行时请勿操作,以免故障", function(on)
        util.show_corner_help("全自动执行中请勿操作~~~~")
        debug_log("Toggled auto-spin "..tostring(on))
        CSstate.auto_spin = on
    end)
    CSmenus.daily_winnings = menu.readonly(casino_brush_money, "当日已获奖金")
    refresh_daily_winnings()
    CSmenus.next_spin_time = menu.readonly(casino_brush_money, "距离下一次使用的时间")
    refresh_next_spin_time()

    menu_options = menu.list(casino_brush_money, "选项", {}, "")
        menu.slider(menu_options, "目标每日奖金（百万）", {}, "", 1, 45, 40, 1, function(value)
            max_daily_winnings_value(value)
            refresh_next_spin_time()
        end)
        menu.toggle(menu_options, "自动提现", {}, "自动完成后自动兑现筹码", function(on)
            casinoconfig.auto_cash_out = on
        end)
        menu.slider(menu_options, "损失率", {}, "每获胜一次间隔失败的次数", 0, 20, 2, 1, function(value)
            loss_ratio_value(value)
        end)
        menu.toggle(menu_options, "设置永远为输", {}, "每局都输", function(on)
            only_loss(on)
        end)
        menu.toggle(menu_options, "从不钻机", {}, "如果打开,那么所有行为都将是公平的", function(on)
            casinoconfig.never_rig = on
        end)

        CSmenus.delays = menu.list(menu_options, "延误", {}, "在执行某些操作后调整暂停计时器")
            menu.slider(CSmenus.delays, "按下按钮", {}, "按下任意按钮后暂停的毫秒数", 300, 3000, casinoconfig.delay_between_button_press, 100, function(value)
                casinoconfig.delay_between_button_press = value
            end)
            menu.slider(CSmenus.delays, "进入赌场", {}, "进入赌场后暂停的毫秒数", 500, 10000, casinoconfig.delay_after_entering_casino, 100, function(value)
                casinoconfig.delay_after_entering_casino = value
            end)
        CSmenus.actions = menu.list(menu_options, "行动", {}, "由自动执行但可作为可选独立操作执行的操作")
            menu.action(CSmenus.actions, "传送到赌场", {}, "", function()
                teleport_to_casino()
            end)
            menu.action(CSmenus.actions, "获取筹码", {}, "自动从赌场收银员获得50000筹码的每日限额", function()
                acquire_chips()
            end)
            menu.action(CSmenus.actions, "查找老虎机", {}, "自动定位空置的高支出老虎机", function()
                find_free_slot_machine()
            end)
            menu.action(CSmenus.actions, "兑现筹码", {}, "自动兑现筹码,同时保留一些储备", function()
                cash_out_chips()
            end)
        CSmenus.spin_log = menu.list(menu_options, "查看日志", {}, "", function()
            show_casino_log()
        end)
        menu.action(menu_options, "清除日志", {}, "如果每日收到限制,你可以选择这里", function()
            save_spin_log({})
            refresh_daily_winnings()
            refresh_next_spin_time()
        end)
        util.create_tick_handler(bandit_tick)
        util.create_tick_handler(next_spin_time_tick)


menu.action(Task_robbery, "将拾取物传送到自己", {}, "", function()
    local counter = 0
    local pos = players.get_position(players.user())
    for _, pickup in entities.get_all_pickups_as_handles() do
        ENTITY1.SET_ENTITY_COORDS(pickup, pos, false, false, false, false)
        counter = counter + 1
        util.yield()
    end
    if counter == 0 then
        util.toast("没有发现可捡拾物. :/")
    else
        util.toast("已传送 ".. tostring(counter) .." 个拾取物.")
    end
end)

local curcoords = {}
menu.toggle_loop(Task_robbery, '自动出租车', {}, '自动传送到出租车接送人员,接他们并放下他们,直到你不再在出租车上', function ()
    if curcoords.x == nil then
        curcoords = ENTITY.GET_ENTITY_COORDS(players.user_ped())
    return curcoords
    end
        local play_car = PED.GET_VEHICLE_PED_IS_IN(players.user_ped(), false)
        local vhash = ENTITY.GET_ENTITY_MODEL(play_car)
        if play_car == 0 or util.reverse_joaat(vhash) ~= 'taxi' then
            ENTITY.SET_ENTITY_COORDS(players.user_ped(), 895.1739, -179.2708, 74.70049, false, true, true, false)
            util.yield(2500)
            PAD.SET_CONTROL_VALUE_NEXT_FRAME(0, 51, 1)
            util.yield(10000)
        end
        local taxi_blip = HUD.GET_CLOSEST_BLIP_INFO_ID(280)
        local taxi_ent = HUD.GET_BLIP_INFO_ID_ENTITY_INDEX(taxi_blip)
        local taxi = ENTITY.GET_OFFSET_FROM_ENTITY_IN_WORLD_COORDS(taxi_ent, 0, 6, 0)
        if HUD.DOES_BLIP_EXIST(HUD.GET_CLOSEST_BLIP_INFO_ID(280)) then
            if taxi.x ~= 0 and taxi.y ~= 0 and taxi.z ~= 0 then
                util.yield(500)
                PED.SET_PED_COORDS_KEEP_VEHICLE(players.user_ped(), taxi.x, taxi.y, taxi.z, false, false, false, false)
                util.yield(1500)
                PAD.SET_CONTROL_VALUE_NEXT_FRAME(0, 86, 1)
                while HUD.DOES_BLIP_EXIST(HUD.GET_CLOSEST_BLIP_INFO_ID(280)) do
                    util.yield()
                end
                util.yield(500)
                menu.trigger_commands('tpobjective')
            end
            else
                util.yield()
        end
    end, function ()
        ENTITY.SET_ENTITY_COORDS(players.user_ped(), curcoords.x, curcoords.y, curcoords.z, false, true, true, false)
            util.toast('已结束出租车工作')
            curcoords = {}
    end)

menu.toggle_loop(Task_robbery, "自动CEO/首领", {},"", function()
    if not util.is_session_started() then return end 
    for _, label in pairs(CEOLabels) do
        if IS_HELP_MSG_DISPLAYED(label) then
            if players.get_boss(players.user()) == -1 then menu.trigger_commands("ceostart") end
            if players.get_org_type(players.user()) == 1 then menu.trigger_commands("ceotomc") end
            util.toast("看起来你需要成为一个CEO")
        end
    end
    for _, label in pairs(MCLabels) do
        if IS_HELP_MSG_DISPLAYED(label) then
            if players.get_boss(players.user()) == -1 then menu.trigger_commands("mcstart") end
            if players.get_org_type(players.user()) == 0 then menu.trigger_commands("ceotomc") end
            util.toast("看起来你需要成为一个首领")
        end
    end
end)




----武器选项
menu.toggle_loop(weapons,"鲨鱼枪", {}, "", function()
    Shark_gun()
end)
menu.toggle_loop(weapons,"陨石枪", {}, "", function()
    local pos = v3.new()
    if WEAPON.GET_PED_LAST_WEAPON_IMPACT_COORD(players.user_ped(), pos) then
        entities.create_object(3751297495, pos)
    end
end)
menu.toggle_loop(weapons, "实体引力", {}, "射击两个实体以让它们互相吸引", function()
	ctst()
end, function ()
    ctst_stop()
end)

menu.toggle(weapons, "RPG自动瞄准器", {}, "发射后自动追踪视野内玩家", function (on)
    RPG_Automatic_sight(on)
end)


nuclear_weapon = menu.list(weapons, "核武器", {}, "")
    menu.toggle_loop(nuclear_weapon,"天基炮", {}, "", function()
        nuclear_weapon1()
    end)
    menu.toggle_loop(nuclear_weapon,"核弹", {}, "", function()
        nuclear_weapon2()
    end)
    menu.toggle_loop(nuclear_weapon, '核弹枪', {}, "使火箭炮发出的子弹变成核弹", function()
        nukegunmode()
    end)

menu.toggle_loop(weapons,"推进载具", {}, "", function()
    if PED.IS_PED_SHOOTING(players.user_ped()) then
        local entity = get_entity_player_is_aiming_at(players.user())
        if entity ~= 0 then
            if ENTITY.IS_ENTITY_A_VEHICLE(entity) then
                VEHICLE.SET_VEHICLE_FORWARD_SPEED(entity, 100)
            end
        end
    end
end)
menu.toggle_loop(weapons,"冻结实体", {}, "", function()
    if PED.IS_PED_SHOOTING(players.user_ped()) then
        local entity = get_entity_player_is_aiming_at(players.user())
        if entity ~= 0 then
            ENTITY.FREEZE_ENTITY_POSITION(entity, true)
        end
    end
end)

menu.toggle_loop(weapons, "转魂枪", {""}, "", function()
    Soul_Gun()
end)

crosshair = menu.list(weapons, "准星", {}, "")
    menu.toggle_loop(crosshair, "瞄准准星 (^)", {''}, '', function()
        HUD.SET_TEXT_SCALE(1.0,0.5)
        HUD.SET_TEXT_FONT(0)
        HUD.SET_TEXT_CENTRE(1)
        HUD.SET_TEXT_OUTLINE(0)
        HUD.SET_TEXT_COLOUR(255, 255, 255, 180)
        util.BEGIN_TEXT_COMMAND_DISPLAY_TEXT("^")
        HUD.END_TEXT_COMMAND_DISPLAY_TEXT(0.4999,0.486,0)
    end)
    menu.toggle_loop(crosshair, "瞄准准星 (*)", {''}, '', function()
        HUD.SET_TEXT_SCALE(1.0,0.5)
        HUD.SET_TEXT_FONT(0)
        HUD.SET_TEXT_CENTRE(1)
        HUD.SET_TEXT_OUTLINE(0)
        HUD.SET_TEXT_COLOUR(255, 255, 255, 180)
        util.BEGIN_TEXT_COMMAND_DISPLAY_TEXT("*")
        HUD.END_TEXT_COMMAND_DISPLAY_TEXT(0.4999,0.485,0)
    end)
    menu.toggle_loop(crosshair, "瞄准准星 (+)", {''}, '', function()
        HUD.SET_TEXT_SCALE(1.0,0.5)
        HUD.SET_TEXT_FONT(0)
        HUD.SET_TEXT_CENTRE(1)
        HUD.SET_TEXT_OUTLINE(0)
        HUD.SET_TEXT_COLOUR(255, 255, 255, 180)
        util.BEGIN_TEXT_COMMAND_DISPLAY_TEXT("+")
        HUD.END_TEXT_COMMAND_DISPLAY_TEXT(0.4999,0.477,0)
    end)
    crosshair1 = menu.toggle_loop(crosshair, "瞄准准星 (·)", {''}, '', function()
        HUD.SET_TEXT_SCALE(1.0,0.5)
        HUD.SET_TEXT_FONT(0)
        HUD.SET_TEXT_CENTRE(1)
        HUD.SET_TEXT_OUTLINE(0)
        HUD.SET_TEXT_COLOUR(255, 255, 255, 180)
        util.BEGIN_TEXT_COMMAND_DISPLAY_TEXT("·")
        HUD.END_TEXT_COMMAND_DISPLAY_TEXT(0.49997,0.478,0)
    end)

entity_gun = menu.list(weapons, "实体枪", {}, "")
    menu.toggle_loop(entity_gun, "实体枪1", {}, "", function()
        eentity_gun()
    end)
    local entity_hashes = {-422877666, -717142483, 1786752042}
    local entity_options = {"蔡徐坤", "足球", "水桶"}
    menu.list_select(entity_gun, "选择实体", {}, "", entity_options, 1,function(index)
        shootent = entity_hashes[index]
    end)
    menu.toggle_loop(entity_gun, '实体枪2', {}, '', function()
        xxxminecraftgun()
    end)


menu.toggle_loop(weapons, "自动扳机", {}, "", function()
    local wpn = WEAPON.GET_SELECTED_PED_WEAPON(players.user_ped())
    local dmg = SYSTEM.ROUND(WEAPON.GET_WEAPON_DAMAGE(wpn, 0))
    local delay = WEAPON1.GET_WEAPON_TIME_BETWEEN_SHOTS(wpn)
    local wpnEnt = WEAPON.GET_CURRENT_PED_WEAPON_ENTITY_INDEX(PLAYER.PLAYER_PED_ID(), false)
    local wpnCoords = ENTITY1.GET_ENTITY_BONE_POSTION(wpnEnt, ENTITY.GET_ENTITY_BONE_INDEX_BY_NAME(wpnEnt, "gun_muzzle"))
    for _, pid in ipairs(players.list(false, true, true)) do
        local ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        boneIndex = bones[math.random(#bones)]
        local pos = PED.GET_PED_BONE_COORDS(ped, boneIndex, 0.0, 0.0, 0.0)
        if PLAYER.IS_PLAYER_FREE_AIMING_AT_ENTITY(players.user(), ped) and not PED.IS_PED_RELOADING(players.user_ped()) then
            MISC1.SHOOT_SINGLE_BULLET_BETWEEN_COORDS(wpnCoords, pos, dmg, true, wpn, players.user_ped(), true, false)
            PAD2.SET_CONTROL_VALUE_NEXT_FRAME(0, 24, 1.0)
            util.yield(delay * 1000)
        end
    end
end)

local modifier = 1.00
menu.slider_float(weapons, "近战伤害修改", {"meleedamage"}, "", 100, 1000, 100, 10, function(value)
    modifier = value / 100
    PLAYER.SET_PLAYER_MELEE_WEAPON_DAMAGE_MODIFIER(players.user(), modifier)
end)

entity_control = menu.list(weapons, "实体控制枪", {}, "控制你所瞄准的实体")
    menu.toggle_loop(entity_control, "开启", {}, "", function()
        entitycontrol()
        menu.set_value(crosshair1, true)
    end,function()
        menu.set_value(crosshair1, false)
    end)
    menu.action(entity_control, "清除记录的实体", {}, "", function()
        clearcontrollog()
    end)
    menu.divider(entity_control, "实体列表")

menu.action(weapons, "分离元素", {}, "分离附加到PED的每个附着元素,不区分玩家和NPC", function()
    detach_all_entities()
end)
menu.toggle_loop(weapons, "无爆炸物", {}, "移除玩家所有爆炸性弹药,甚至是火箭弹", function(on)
        WEAPON.REMOVE_ALL_PROJECTILES_OF_TYPE(741814745, false)
        WEAPON.REMOVE_ALL_PROJECTILES_OF_TYPE(-1312131151, false)
        WEAPON.REMOVE_ALL_PROJECTILES_OF_TYPE(-1568386805, false)
        WEAPON.REMOVE_ALL_PROJECTILES_OF_TYPE(2138347493, false)
        WEAPON.REMOVE_ALL_PROJECTILES_OF_TYPE(1672152130, false)
        WEAPON.REMOVE_ALL_PROJECTILES_OF_TYPE(125959754, false)
        WEAPON.REMOVE_ALL_PROJECTILES_OF_TYPE(-1813897027, false)
        WEAPON.REMOVE_ALL_PROJECTILES_OF_TYPE(615608432, false)
        WEAPON.REMOVE_ALL_PROJECTILES_OF_TYPE(1420407917, false)
        WEAPON.REMOVE_ALL_PROJECTILES_OF_TYPE(1169823560, false)
end)

tint_thread = util.create_thread(function (thr)
    cur_tint = 0
    while true do
        if cur_tint < 7 then
            cur_tint = cur_tint + 1
        else
            cur_tint = 0
        end
        util.yield(200)
    end
end)
menu.toggle_loop(weapons, "彩虹武器色调", {}, "", function(on)
    plyr = PLAYER.PLAYER_PED_ID()
        local last_tint = WEAPON.GET_PED_WEAPON_TINT_INDEX(PLAYER.PLAYER_PED_ID(), WEAPON.GET_SELECTED_PED_WEAPON(PLAYER.PLAYER_PED_ID()))
        WEAPON.SET_PED_WEAPON_TINT_INDEX(PLAYER.PLAYER_PED_ID(),WEAPON.GET_SELECTED_PED_WEAPON(PLAYER.PLAYER_PED_ID()), cur_tint)
end)

damage_numbers_list = menu.list(weapons, "伤害数字")
    menu.toggle_loop(damage_numbers_list, "伤害数字", {"damagenumbers"}, "", function()
        damage_numbers()
    end)
    menu.toggle(damage_numbers_list, "包括车辆", {"damagenumbersvehicles"}, "", function (value)
        damage_numbers_target_vehicles = value
    end,true)
    menu.slider(damage_numbers_list, "数字尺寸", {"damagenumberstextsize"}, "", 1, 100, 7, 1, function (value)
        damage_numbers_text_size = value * 0.1
    end)
    
damage_numbers_colours_list = menu.list(damage_numbers_list, "颜色设置")
    menu.rainbow(menu.colour(damage_numbers_colours_list, "射击默认颜色", {"damagenumcolour"}, "默认命中的颜色", damage_numbers_health_colour, true, function (value)
        damage_numbers_health_colour = value
    end))
    menu.rainbow(menu.colour(damage_numbers_colours_list, "射击暴击颜色", {"damagenumcritcolour"}, "暴击颜色", damage_numbers_crit_colour, true, function (value)
        damage_numbers_crit_colour = value
    end))
    menu.rainbow(menu.colour(damage_numbers_colours_list, "射击盔甲颜色", {"damagenumarmourcolour"}, "盔甲颜色", damage_numbers_armour_colour, true, function (value)
        damage_numbers_armour_colour = value
    end))
    menu.rainbow(menu.colour(damage_numbers_colours_list, "射击载具颜色", {"damagenumvehiclecolour"}, "载具颜色", damage_numbers_vehicle_colour, true, function (value)
        damage_numbers_vehicle_colour = value
    end))

menu.toggle_loop(weapons, "踢出枪", {}, "", function()
    local ent = get_aim_info()['ent']
    if PED.IS_PED_SHOOTING(players.user_ped()) then
        if ENTITY.IS_ENTITY_A_PED(ent) then
            if PED.IS_PED_A_PLAYER(ent) then
                local pid = NETWORK.NETWORK_GET_PLAYER_INDEX_FROM_PED(ent)
                if players.get_host() == pid then 
                    util.toast("您正试图踢出的玩家是主机")
                    return
                end
                menu.trigger_commands("kick" .. players.get_name(pid))
            end
        end
    end
end)
menu.toggle_loop(weapons, "崩溃枪", {}, "", function()
    local ent = get_aim_info()['ent']
    if PED.IS_PED_SHOOTING(players.user_ped()) then
        if ENTITY.IS_ENTITY_A_PED(ent) then
            if PED.IS_PED_A_PLAYER(ent) then
                local pid = NETWORK.NETWORK_GET_PLAYER_INDEX_FROM_PED(ent)
                menu.trigger_commands("crash" .. players.get_name(pid))
            end
        end
    end
end)

menu.action(weapons, "发射引导导弹", {}, "", function()
	if not UFO.exists() then 
        GuidedMissile.create()
    end
end)

sticky_bomb_explosion = menu.list(weapons, '粘弹自动爆炸', {}, '')
    menu.toggle_loop(sticky_bomb_explosion, '粘弹自动爆炸', {}, '使您的粘弹在玩家或NPC附近时自动引爆.', function()
        proxyStickys()
    end)
    local detonate_players = true
    menu.toggle(sticky_bomb_explosion, '引爆附近的玩家', {}, '', function(toggle)
        detonate_players = toggle
    end,true)
    menu.toggle(sticky_bomb_explosion, '引爆附近的NPC', {}, '', function(toggle)
        detonate_npcs = toggle
    end)
    menu.slider(sticky_bomb_explosion, '触发半径', {}, '', 1, 10, 2, 1, function(value)
        detonate_radius = value
    end)
    menu.action(sticky_bomb_explosion, '移除所有粘性炸弹', {}, '移除所有存在的粘性炸弹', function()
        WEAPON.REMOVE_ALL_PROJECTILES_OF_TYPE(util.joaat('weapon_stickybomb'))
    end)



menu.toggle(weapons, "背藏武器", {}, "按Tab键", function(on)
    Back_weapons(on)
end)


---------载具枪
vehicleGun = menu.list(weapons,"载具枪", {}, "")
    menu.toggle_loop(vehicleGun,"开启", {}, "", function ()
        Vehicle_gun()
    end, function()
        Vehicle_gun_stop()
    end)
    menu.list_select(vehicleGun,"选择载具", {}, "", Objoptions_all, 1, function (opt)
        Vehicle_gun_opt(opt)
    end)
    menu.toggle(vehicleGun,"进入车辆", {}, "", function(toggle)
        Vehicle_gun_into(toggle)
    end)


menu.toggle(weapons, "女武神导弹",  {}, "", function(toggle)
    nvwushen(toggle)
end)


---------无声自瞄
silent_aimbotroot = menu.list(weapons, "武器自瞄", {}, "也可理解为子弹追踪")
    sa_showtarget = true---显示目标
    satarget_usefov = true---设置视野
    satarget_players = true---自瞄玩家
    menu.toggle_loop(silent_aimbotroot, "开启", {}, "", function(toggle)
        local target = get_aimbot_target()
        if target ~= 0 then
            local t_pos = PED.GET_PED_BONE_COORDS(target, 31086, 0.01, 0, 0)
            local t_pos2 = PED.GET_PED_BONE_COORDS(target, 31086, -0.01, 0, 0.00)
            if sa_showtarget then
                util.draw_ar_beacon(t_pos)
            end
            if PED.IS_PED_SHOOTING(players.user_ped()) then
                local wep = WEAPON.GET_SELECTED_PED_WEAPON(players.user_ped())
                local dmg = WEAPON.GET_WEAPON_DAMAGE(wep, 0)
                if satarget_damageo then
                    dmg = sa_odmg
                end
                local veh = PED.GET_VEHICLE_PED_IS_IN(target, false)
                MISC.SHOOT_SINGLE_BULLET_BETWEEN_COORDS_IGNORE_ENTITY(t_pos['x'], t_pos['y'], t_pos['z'], t_pos2['x'], t_pos2['y'], t_pos2['z'], dmg, true, wep, players.user_ped(), true, false, 10000, veh)
            end
        end
    end)
    select_target = menu.list(silent_aimbotroot, "选择目标", {}, "默认为玩家")
        menu.toggle(select_target, "瞄准玩家", {}, "", function(on)
            satarget_players = on
        end, true)
        menu.toggle(select_target, "瞄准NPC", {}, "", function(on)
            satarget_npcs = on
        end)
        menu.toggle(select_target, "瞄准朋友", {}, "", function(on)
            satarget_targetfriends = on
        end)
    set_view = menu.list(silent_aimbotroot, "设置视野", {}, "")
        menu.toggle(set_view, "设置视野", {}, "选择合适的视野大小", function(on)
            satarget_usefov = on
        end, true)
        sa_fov = 10
        menu.slider(set_view, "视野大小", {}, "推荐视野10", 0, 270, 10, 1, function(s)
            sa_fov = s
        end)
    exclude = menu.list(silent_aimbotroot, "排除选项", {}, "")
        menu.toggle(exclude, "忽略载具内目标", {}, "", function(on)
            satarget_novehicles = on
        end)
        menu.toggle(exclude,  "忽略无敌玩家", {}, "", function(on)
            satarget_nogodmode = on
        end)
    modify_damage = menu.list(silent_aimbotroot, "修改伤害", {}, "")
        menu.toggle(modify_damage, "伤害覆盖", {}, "", function(on)
            satarget_damageo = on
        end, true)
        sa_odmg = 100
        menu.slider(modify_damage, "伤害覆盖量", {}, "", 0, 1000, 100, 10, function(s)
            sa_odmg = s
        end)
    menu.toggle(silent_aimbotroot, "显示目标", {}, "标记自瞄对象", function(on)
        sa_showtarget = on
    end)
    menu.toggle_loop(silent_aimbotroot, "瞄准时的透视", {}, "", function()
        if PLAYER.IS_PLAYER_FREE_AIMING(players.user()) then
            menu.trigger_command(menu.ref_by_path("World>Inhabitants>Player ESP>Name ESP>Name ESP>Low Latency Rendering"))
        else
            menu.trigger_command(menu.ref_by_path("World>Inhabitants>Player ESP>Name ESP>Name ESP>Disabled"))
        end
    end, function()
        menu.trigger_command(menu.ref_by_path("World>Inhabitants>Player ESP>Name ESP>Name ESP>Disabled"))
    end)
    menu.toggle_loop(silent_aimbotroot, "3D准线框", {}, "", function(on)
        request_texture_dict_load('visualflow')
        local rc = raycast_gameplay_cam(-1, 10000.0)[2]
        local c = players.get_position(players.user())
        local dist = MISC.GET_DISTANCE_BETWEEN_COORDS(rc.x, rc.y, rc.z, c.x, c.y, c.z, false)
        local dir = v3.toDir(CAM.GET_GAMEPLAY_CAM_ROT(0))
        size = {}
        size.x = 0.5+(dist/50)
        size.y = 0.5+(dist/50)
        size.z = 0.5+(dist/50)
        GRAPHICS.DRAW_MARKER(3, rc.x, rc.y, rc.z, 0.0, 0.0, 0.0, 0.0, 90.0, 0.0, size.y, 1.0, size.x, 255, 255, 255, 50, false, true, 2, false, 'visualflow', 'crosshair')
    end)
-------------------------


menu.toggle(weapons, "隐形武器", {"invisiblweaponse"}, "换枪后失效", function(on)
    WEAPON.SET_PED_CURRENT_WEAPON_VISIBLE(players.user_ped(), not on, false, false, false)
end)

menu.toggle(weapons, "偷车枪", {}, "", function(on)
    if on then
        menu.trigger_commands("drivegun on")
    else
        menu.trigger_commands("drivegun off")
    end
end)

special_weapons = menu.list(weapons, "特殊武器", {}, "")
    menu.toggle(special_weapons, "大锤", {}, "", function(on)
        hammer(on)
    end)
    menu.toggle(special_weapons, "白白大锤", {}, "", function(on)
        baibaihammer(on)
    end)
    menu.toggle(special_weapons, "GT大锤", {""}, "", function(on)
        gthammer(on)
    end)
    menu.toggle(special_weapons, "棕色小熊", {}, "", function(on)
        daidaihammer(on)
    end)
    menu.toggle(special_weapons, "粉色独角兽", {}, "", function(on)
        daidaiunicorn(on)
    end)
    menu.toggle(special_weapons, "太刀",{""}, "",function(on)
        knife(on)
    end)

weapon_thing = menu.list(weapons, "更改子弹", {}, "")
    zidanleixing()

menu.toggle_loop(weapons, "快速更换武器", {}, "武器更换速度更快.", function()
    if TASK.GET_IS_TASK_ACTIVE(players.user_ped(), 56) then
        PED.FORCE_PED_AI_AND_ANIMATION_UPDATE(players.user_ped())
    end
end)
menu.toggle_loop(weapons, '热成像枪', {}, '当您瞄准时按"E"可以启用热成像功能.', function()
    thermalgun()
end)
menu.toggle_loop(weapons, "快速热成像", {}, "更快地在热成像之间进行切换.", function()
    if TASK.GET_IS_TASK_ACTIVE(players.user_ped(), 92) then
        PED.FORCE_PED_AI_AND_ANIMATION_UPDATE(players.user_ped())
    end
end)
menu.toggle_loop(weapons, "快速近战", {}, "近战速度更快.", function()
    if TASK.GET_IS_TASK_ACTIVE(players.user_ped(), 130) then
        PED.FORCE_PED_AI_AND_ANIMATION_UPDATE(players.user_ped())
    end
end)

menu.toggle_loop(weapons, "NPC枪", {""}, "随机射出NPC", function()
    shechuNPC()
end)
menu.toggle_loop(weapons, '喷火器', {}, '将加特林改为喷火枪', function()
    flamegun()
end)
menu.toggle(weapons, "允许射击队友", {}, '使你在游戏中能够射击队友', function(toggle)
    PED.SET_CAN_ATTACK_FRIENDLY(players.user_ped(), toggle, false)
end)

shooting_effects = menu.list(weapons, "射击特效", {}, "")
    menu.toggle_loop(shooting_effects, "射击效果", {}, "", function ()
        Shoot_effect()
    end)
    menu.list_select(shooting_effects, "设置效果", {}, "", Shoot_effect_options, 1, function (index)
        Shoot_effect_option(index)
    end)

hitEffectRoot = menu.list(weapons, "命中效果", {}, "")
    menu.toggle_loop(hitEffectRoot, "开启效果", {}, "", function()
        Hit_effect()
    end)
    menu.list_select(hitEffectRoot, "设置效果", {}, "", hit_effect_options, 1, function (opt)
        hit_effect_option(opt)
    end)
    hit_menuColour = menu.colour(hitEffectRoot, "设置颜色", {"dwuahjudhau"}, "仅对某些效果有效", hiteffectColour, false, function(colour)
        set_effectColour(colour)
    end)
    menu.rainbow(hit_menuColour)

menu.toggle_loop(weapons, "彩弹枪", {""}, "射击更改载具颜色", function()
	if PED.IS_PED_SHOOTING(players.user_ped()) then
		local entity = get_entity_player_is_aiming_at(players.user())
		if entity ~= NULL and ENTITY.IS_ENTITY_A_VEHICLE(entity) and request_control(entity, 1000) then
			local primary, secundary = get_random_colour(), get_random_colour()
			VEHICLE.SET_VEHICLE_CUSTOM_PRIMARY_COLOUR(entity, primary.r, primary.g, primary.b)
			VEHICLE.SET_VEHICLE_CUSTOM_SECONDARY_COLOUR(entity, secundary.r, secundary.g, secundary.b)
		end
	end
end)

menu.toggle_loop(weapons, "空袭枪", {}, "", function()
    kxq()
end)

magnetic_gun = menu.list(weapons, "磁力枪", {}, "")
    menu.toggle_loop(magnetic_gun, "磁力枪", {}, "具有磁力的枪,可控制车辆去向", function ()
        ciliqiang()
    end)
    menu.list_select(magnetic_gun, "设置磁力枪", {}, "选择后才生效", {"平滑模式", "混沌模式"}, 1,function(index)
        szclq(index)
    end)

menu.toggle_loop(weapons, "传送枪", {}, "", function()
    csq()
end)
menu.toggle_loop(weapons, '翻滚换弹', {}, '', function()
    fghd()
end)

----------娱乐选项
menu.action(funfeatures, "火箭人", {}, "", function()
    Rocket_Man()
end)

menu.action(funfeatures, "黑人抬棺", {}, "", function ()
    blacks_coffins()
end)
menu.toggle_loop(funfeatures, "罪城的水", {""}, "碰水就死", function()
    VicecityWater()
end)
menu.action(funfeatures, "堆叠行人", {}, "", function()
    stack_npc()
end)

bodyguard_heli_options = menu.list(funfeatures, "保镖直升机", {}, "")
    menu.list_select(bodyguard_heli_options, "直升机类型", {}, "", sel_heli_name_list, 1,function(value)
        Bodyguard_helicopter(value)
    end)
    menu.toggle(bodyguard_heli_options, "直升机无敌", {}, "", function(toggle)
        Bodyguard_helicopter_invincible(toggle)
    end)
    menu.action(bodyguard_heli_options, "生成保镖直升机", {}, "", function()
        Spawn_bodyguard_helicopter()
    end)
    menu.action(bodyguard_heli_options, "删除所有保镖直升机", {}, "", function()
        delete_bodyguard_helicopter()
    end)

menu.action(funfeatures, "天空岛", {}, "", function()
    local c = {x=0, y=0, z=500}
    PED.SET_PED_COORDS_KEEP_VEHICLE(players.user_ped(), 0, 0, 503)
    if not ENTITY.DOES_ENTITY_EXIST(island_block) then
        request_model_load(1054678467)
        island_block = entities.create_object(1054678467, c)
    end
end)

flappygame = menu.list(funfeatures, "flappybird")
    require "lib.daidailib.flappybird"

menu.toggle(funfeatures, "保护球", {}, "", function(on)
    Protect_ball(on)
end)
menu.toggle_loop(funfeatures,"抛掷载具", {}, "在载具附近按E将载具抬起来,在按E将载具投掷出去.", function(on)
    throwvehs()
end)
menu.toggle_loop(funfeatures,"抛掷NPC", {}, "在NPC附近按E将NPC抬起来,在按E将NPC投掷出去.", function(on)
    throwpeds()
end)

Shooting_practice = menu.list(funfeatures, "射击馆")
    menu.divider(Shooting_practice,"射击训练场")
    create_lab = menu.action(Shooting_practice,"创建训练场", {}, "", function()
        load_lab()
    end)
    menu.action(Shooting_practice,"传送到训练场", {}, "", function()
        teleport_to_lab()
        clear_all_peds()
    end)
    menu.action(Shooting_practice,"结束训练", {}, "", function()
        Clean_training_ground()
    end)
    menu.divider(Shooting_practice,"射击类型")
    simple_3d = menu.list(Shooting_practice,"3D射击", {}, "")
        menu.divider(simple_3d,"3D射击")
        simple_3d_toggle = menu.toggle(simple_3d,"开始", {}, "", function(toggle)
            Shooting_simulation_3D(toggle)
        end)
        menu.divider(simple_3d,"游戏设置")
        menu.list_action(simple_3d,"设定状况", {}, "", ped_health_selector.display_options, function(index)
            Set_condition_3D(index)
        end)
        menu.list_action(simple_3d,"游戏时间", {}, "", time_selector.display_options, function(index)
            Set_shoot_time_3D(index)
        end)
        menu.list_action(simple_3d,"目标最大生成高度", {}, "", simple3d_target_max_height.display_options, function(index)
            Target_build_height_3D(index)
        end)
    simple_2d = Shooting_practice:list("2D射击", {}, "")
        menu.divider(simple_2d,"2D射击")
        simple_2d_toggle = menu.toggle(simple_2d,"开始", {}, "", function(toggle)
            Shooting_simulation_2D(toggle)
        end)
        menu.divider(simple_2d,"游戏设置")
        menu.list_action(simple_2d,"设定状况", {}, "", ped_health_selector.display_options, function(index)
            Set_condition_2D(index)
        end)
        menu.list_action(simple_2d,"游戏时间", {}, "", time_selector.display_options, function(index)
            Set_shoot_time_2D(index)
        end)

Green_soda = menu.list(funfeatures, "绿汽水")
    menu.action(Green_soda, "汽水罐", {}, "在你附近掉落一罐汽水", function()
        sprunk_can_drop(players.get_position(players.user()))
    end)
    menu.toggle_loop(Green_soda, "汽水暴雨", {}, "在你附近下起汽水暴雨", function()
        sprunk_raindrop_player(players.user())
        util.yield(100)
    end)
    menu.action(Green_soda, "生成绿车", {}, "绿汽水载具", function(click_type, pid)
        local sprunk_vehicle = random_spawn_vehicles[math.random(1, #random_spawn_vehicles)]
        local vehicle = spawn_vehicle_for_player(pid, sprunk_vehicle.model)
        if vehicle then
            sprunkify_vehicle(vehicle)
            for i = 1,10,1 do
                sprunk_raindrop_vehicle(vehicle)
            end
        end
    end)
    menu.action(Green_soda, "变成绿车", {}, "", function(click_type, pid)
        local vehicle = get_player_vehicle_in_control(pid)
        if vehicle then
            sprunkify_vehicle(vehicle)
        end
    end)
    menu.action(Green_soda, "绿气传染", {}, "将附近载具染成绿色", function()
        Green_contagion()
    end)
    menu.action(Green_soda, "倾倒垃圾罐", {}, "一大堆垃圾罐!", function(click_type)
        local pid = players.user()
        trash_dump_player(pid)
    end)
    menu.toggle(Green_soda, "幸福的飞艇", {}, "快抬头看看!", function(on)
        happy_blimps_toggle = on
        if on then
            for i = 1, 4, 1 do
                spawn_sprunk_blimp(players.user())
            end
        else
            clear_blimps()
        end
    end)

menu.toggle(funfeatures, "灵魂出窍", {}, "", function(toggle)
    Out_body(toggle)
end)

menu.toggle_loop(funfeatures, "homer粒子", {""}, "", function()
    local player_pos = players.get_position(players.user())
    request_ptfx_asset("scr_sum2_hal")
    GRAPHICS.USE_PARTICLE_FX_ASSET("scr_sum2_hal")
    GRAPHICS.START_NETWORKED_PARTICLE_FX_NON_LOOPED_AT_COORD(
    suijijianqi(jianqi), player_pos.x, player_pos.y, player_pos.z, 0, 0, 0, 2.5, false, false, false)
    util.yield(200)
end)

menu.toggle(funfeatures, "火拳",{""}, "",function(on)
    Fire_Fist(on)
end)
menu.toggle(funfeatures, "血拳",{}, "",function(on)
    Blood_Fist(on)
end)
menu.toggle(funfeatures, "雷电拳",{""}, "",function(on)
    Raiden_Fist(on)
end)


spawn_truck = menu.list(funfeatures, "拉车")
    spawn_truck_car = menu.list(spawn_truck, "生成拉车")
    menu.action(spawn_truck_car, "废土", {}, "生成一个废土人进行拖曳", function()
        menu.trigger_commands("wastelander")
    end)
    menu.action(spawn_truck_car, "猛击卡车", {}, "生成一辆猛击卡车进行牵引", function()
        menu.trigger_commands("slamtruck")
    end)
    menu.toggle(spawn_truck, "附加", {}, "任何近距离车辆都将连接到您当前的车辆上", function(on)
        if on then
            attach_nearest_vehicle()
        else
            detach_attached_vehicle() 
        end
    end)


Hell_Undead = menu.list(funfeatures, "地狱亡灵", {}, "")
    menu.toggle(Hell_Undead, "地狱亡灵", {}, "", function(on)
        if on then
            menu.trigger_commands("grace on")
            menu.set_value(Burning_Man, true)
            menu.set_value(runspeed, true)
            menu.set_value(superjump, true)
            menu.trigger_commands("trails on")
            menu.trigger_commands("trailcolourrainbow 1")
        else
            menu.set_value(Burning_Man, false)
            menu.set_value(runspeed, false)
            menu.set_value(superjump, false)
            menu.trigger_commands("trails off")
            menu.trigger_commands("trailcolourrainbow 0")
        end
    end)

    menu.divider(Hell_Undead,"设置")
        runspeed = menu.toggle(Hell_Undead, "奔跑速度", {}, "", function(on)
            if on then
                menu.trigger_commands("walkspeed 1.5")
                menu.trigger_commands("gracefullanding on")
                menu.trigger_commands("superrun 1.2")
            else
                menu.trigger_commands("walkspeed 1")
                menu.trigger_commands("gracefullanding off")
                menu.trigger_commands("superrun 0")
            end
        end)
        superjump = menu.toggle_loop(Hell_Undead, "亡灵跳跃", {}, "", function()
            if PAD.IS_CONTROL_PRESSED(1, 22) then
                ENTITY.APPLY_FORCE_TO_ENTITY(players.user_ped(), 1, 0.0, 0.0, 1.5, 0.0, 0.0, 0.0, 0, true, true, true, false, true)
            end
        end)

menu.toggle(funfeatures, "GPS导航", {}, "", function(value)
    GPS_navigation(value)
end)

headlamp = menu.list(funfeatures, "头灯", {}, "仅本地可见")
    menu.toggle_loop(headlamp, "开启", {}, "", function()
        local head_pos = PED.GET_PED_BONE_COORDS(players.user_ped(), 31086, 0.0, 0.0, 0.0)
        local cam_rot = players.get_cam_rot(players.user())
        GRAPHICS1.DRAW_SPOT_LIGHT(head_pos, cam_rot:toDir(), math.floor(headlamp_color.r * 255), math.floor(headlamp_color.g * 255), math.floor(headlamp_color.b * 255), distance * 1.5, brightness, 0.0, radius, distance)
    end)
    distance = 25.0
    menu.slider_float(headlamp, "距离", {"distance"}, "光照距离.", 100, 10000, 1500, 100, function(value)
        distance = value / 100
    end)
    brightness = 10.0
    menu.slider_float(headlamp, "亮度", {"brightness"}, "光亮强度.", 100, 10000, 1000, 100, function(value)
        brightness = value / 100
    end)
    radius = 15.0
    menu.slider_float(headlamp, "半径", {"radius"}, "光束半径.", 100, 5000, 2000, 100, function(value)
        radius = value / 100
    end)
    headlamp_color = {r = 0, g = 1, b = 1, a = 0}
    local head_lamp_color = menu.colour(headlamp, "颜色", {"colour"}, "", headlamp_color, true, function(value)
        headlamp_color = value 
    end)
    menu.rainbow(head_lamp_color)


menu.toggle(funfeatures, "移除交通", {}, "对其它玩家生效", function(on)
    if on then
        pop_multiplier_id = MISC.ADD_POP_MULTIPLIER_SPHERE(1.1, 1.1, 1.1, 15000.0, 0, 0, false, true)
        MISC.CLEAR_AREA(1.1, 1.1, 1.1, 19999.9, true, false, false, true)
    else
        MISC.REMOVE_POP_MULTIPLIER_SPHERE(pop_multiplier_id, false);
    end
end)

appearance = menu.list(funfeatures, "伪装")
    menu.toggle(appearance, "开始伪装", {}, "", function(state)
        player_disguise(state)
    end)
    menu.list_select(appearance, "伪装选择", {}, "", disguise_names, 1, function(index)
        player_disguise_select(index)
    end)


menu.toggle(funfeatures,"恶灵骑士" ,{""}, "", function(on)
    elqss(on)
end)
menu.toggle(funfeatures, "飞天扫帚", {""}, "", function(on)
    flying_broom(on)
end)

fire_work_setting = menu.list(funfeatures, "烟花", {}, "")
    menu.action(fire_work_setting,"安放烟花",{},"",function()
        anfangyanhua()
    end)	
    menu.action(fire_work_setting,"烟花发射",{},"",function()
        yanhuafashe()
    end)
    
acrobatics = menu.list(funfeatures, "车辆跳跃", {}, "")
    menu.action(acrobatics, "豚跳", {}, "", function()
        local vehicle = get_vehicle_player_is_in(players.user())
        if ENTITY.DOES_ENTITY_EXIST(vehicle) and VEHICLE.IS_VEHICLE_ON_ALL_WHEELS(vehicle) and
        request_control(vehicle, 1000) then
            ENTITY.APPLY_FORCE_TO_ENTITY(vehicle, 1, 0.0, 0.0, 10.0, 0.0, 0.0, 0.0, 1, false, true, true, true, true)
        end
    end)
    menu.action(acrobatics, "左侧空翻", {}, "", function()
        local vehicle = get_vehicle_player_is_in(players.user())
        if ENTITY.DOES_ENTITY_EXIST(vehicle) and VEHICLE.IS_VEHICLE_ON_ALL_WHEELS(vehicle) and
        request_control(vehicle, 1000) then
            ENTITY.APPLY_FORCE_TO_ENTITY(vehicle, 1, 0.0, 0.0, 10.71, 5.0, 0.0, 0.0, 1, false, true, true, true, true)
        end
    end)
    menu.action(acrobatics, "双左侧空翻", {}, "", function()
        local vehicle = get_vehicle_player_is_in(players.user())
        if ENTITY.DOES_ENTITY_EXIST(vehicle) and VEHICLE.IS_VEHICLE_ON_ALL_WHEELS(vehicle) and
        request_control(vehicle, 1000) then
            ENTITY.APPLY_FORCE_TO_ENTITY(vehicle, 1, 0.0, 0.0, 21.43, 20.0, 0.0, 0.0, 1, false, true, true, true, true)
        end
    end)
    menu.action(acrobatics, "右侧空翻", {}, "", function()
        local vehicle = get_vehicle_player_is_in(players.user())
        if ENTITY.DOES_ENTITY_EXIST(vehicle) and VEHICLE.IS_VEHICLE_ON_ALL_WHEELS(vehicle) and
        request_control(vehicle, 1000) then
            ENTITY.APPLY_FORCE_TO_ENTITY(vehicle, 1, 0.0, 0.0, 10.71, -5.0, 0.0, 0.0, 1, false, true, true, true, true)
        end
    end)

---------黑洞
black_hole = menu.list(funfeatures, "黑洞", {}, "")
local yourself
local yourselfCoord = {x=0,y=0,z=0}
local visualHelp = false
local visualHelpEnt
local entityToSpawn = util.joaat("prop_mk_sphere")
local blackHole = false
local blackHoleType = "black"
local blackHoleVehicle
local blackHolePos = {x = 0, y = 0, z = 0}
local vehiclePos = {x = 0, y = 0, z = 0}
local tableBlackHole = {"拉", "推",}
local pushStrength = 1
local pushToX = 1
local pushToY = 1
local pushToZ = 1

local blackHoleMenu = menu.toggle(black_hole, "开启黑洞", {}, "", function(a)
    blackHole = a
end)
local visualHelpMenu = menu.toggle(black_hole, "视觉帮助", {}, "查看我的黑洞在哪", function(a)
    visualHelp = a
end)
black_hole_position = menu.list(black_hole, "调整黑洞位置", {}, "")

local pushStrengthMenu = menu.slider(black_hole, "设置黑洞强度", {}, "设置拉或推的力度(如果力度设置为100,距离太近会使你在地图中走样)我建议力度在5到10之间", 1, 100, 1, 1, function(a)
    pushStrength = a
end)

local blackHoleTypeMenu = menu.list_select(black_hole, "黑洞类型 ", {}, "选择黑洞的作用", tableBlackHole, 1, function(a)
    a = a - 1
    if a == 0 then
        blackHoleType = "Black"
    elseif a == 1 then
        blackHoleType = "White"
    end
end)
menu.action(black_hole, "删除废弃黑洞", {}, "", function() 
    menu.trigger_commands("superclean2")
end)

local blackHolePosX = menu.slider(black_hole_position, "黑洞位置 X", {"coordBlackHoleX"}, "设置黑洞在地图X轴上的坐标", -100000, 100000, 0, 1, function(a)
    blackHolePos.x = a
end)
local blackHolePosY = menu.slider(black_hole_position, "黑洞位置 Y", {"coordBlackHoleY"}, "设置黑洞在地图Y轴上的坐标", -100000, 100000, 0, 1, function(a)
    blackHolePos.y = a
end)
local blackHolePosZ = menu.slider(black_hole_position, "黑洞位置 Z", {"coordBlackHoleZ"}, "设置黑洞在地图Z轴上的坐标", -100000, 100000, 0, 1, function(a)
    blackHolePos.z = a
end)
menu.action(black_hole_position, "在玩家处设定黑洞的位置", {}, "在你的人物当前位置设置黑洞的位置", function()
    blackHolePos.x = yourselfCoord.x
    blackHolePos.y = yourselfCoord.y
    blackHolePos.z = yourselfCoord.z
    blackHolePosX.value = math.floor(blackHolePos.x)
    blackHolePosY.value = math.floor(blackHolePos.y)
    blackHolePosZ.value = math.floor(blackHolePos.z)
end)

util.create_tick_handler(function()
    if ENTITY.DOES_ENTITY_EXIST(visualHelpEnt) then
        if visualHelp == true then
            ENTITY.SET_ENTITY_COORDS(visualHelpEnt, blackHolePos.x, blackHolePos.y, blackHolePos.z, false, false, false, false)
        elseif visualHelp == false then
            ENTITY.SET_ENTITY_COORDS(visualHelpEnt, 0, 0, 0, false, false, false, false)
        end
    else
        visualHelpEnt = entities.create_object(entityToSpawn, blackHolePos)
        ENTITY.FREEZE_ENTITY_POSITION(visualHelpEnt, true)
        ENTITY.SET_ENTITY_COLLISION(visualHelpEnt, true, false)
    end
    util.yield(100)
end)
util.create_tick_handler(function()
    yourself = PLAYER.GET_PLAYER_PED(players.user())
    yourselfCoord = ENTITY.GET_ENTITY_COORDS(yourself)
    if blackHole == true then
        blackHoleVehicle = entities.get_all_vehicles_as_handles()
        for index, value in ipairs(blackHoleVehicle) do
            vehiclePos = ENTITY.GET_ENTITY_COORDS(value)
            if ENTITY.DOES_ENTITY_EXIST(value) == true then
                if NETWORK.NETWORK_HAS_CONTROL_OF_ENTITY(value) == false then
                    NETWORK.NETWORK_REQUEST_CONTROL_OF_ENTITY(value)
                end
                if blackHoleType == "black" then
                    if blackHolePos.x > vehiclePos.x then
                        pushToX = pushStrength
                    elseif blackHolePos.x < vehiclePos.x then
                        pushToX = -pushStrength
                    end
                    if blackHolePos.y > vehiclePos.y then
                        pushToY = pushStrength
                    elseif blackHolePos.y < vehiclePos.y then
                        pushToY = -pushStrength
                    end
                    if blackHolePos.z > vehiclePos.z then
                        pushToZ = pushStrength
                    elseif blackHolePos.z < vehiclePos.z then
                        pushToZ = -pushStrength
                    end
                    ENTITY.APPLY_FORCE_TO_ENTITY(value, 1, pushToX, pushToY, pushToZ, 0, 0, 0, 0, false, true, true, false)
                elseif blackHoleType == "white" then
                    if blackHolePos.x > vehiclePos.x then
                        pushToX = -pushStrength
                    elseif blackHolePos.x < vehiclePos.x then
                        pushToX = pushStrength
                    end
                    if blackHolePos.y > vehiclePos.y then
                        pushToY = -pushStrength
                    elseif blackHolePos.y < vehiclePos.y then
                        pushToY = pushStrength
                    end
                    if blackHolePos.z > vehiclePos.z then
                        pushToZ = -pushStrength
                    elseif blackHolePos.z < vehiclePos.z then
                        pushToZ = pushStrength
                    end
                    ENTITY.APPLY_FORCE_TO_ENTITY(value, 1, pushToX, pushToY, pushToZ, 0, 0, 0, 0, false, true, true, false)
                end
            end
        end
    end
end)
----------------
menu.toggle_loop(funfeatures, "神指", {"godfinger"}, "按B使用", function()
    godfinger()
end)

menu.toggle_loop(funfeatures, "满天烟花", {}, "", function()
    coords = ENTITY.GET_ENTITY_COORDS(PLAYER.PLAYER_PED_ID(), true)
        coords['x'] = coords['x'] + math.random(-100, 100)
        coords['y'] = coords['y'] + math.random(-100, 100)
        coords['z'] = coords['z'] + math.random(30, 100)
        FIRE.ADD_EXPLOSION(coords['x'], coords['y'], coords['z'], 38, 100.0, true, false, 0.0)
    util.yield(100)
end)

--------NPC雨 
menu.toggle(funfeatures, "NPC雨", {}, "", function(on)
    rain_peds = on
    if rain_peds then
        ped_varnum = 1
    else
        ped_varnum = -1
    end
    mod_uses("ped", ped_varnum)
    while rain_peds do
        Npc_Rain()
    end
end)

menu.toggle(funfeatures, "载具雨", {}, "", function(on)
    rain_vehicles = on
    if rain_vehicles then
        veh_varnum = 1
    else
        veh_varnum = -1
    end
    mod_uses("vehicle", veh_varnum)
    while rain_vehicles do
        Vehicle_Rain()
    end
end)


menu.toggle(funfeatures, "陨落的飞机", {},"", function(on)
    angry_planes = on
    start_angryplanes_thread()
end)

menu.action(funfeatures,"生成多米诺骨牌", {}, "", function()
    local hash = util.joaat("prop_boogieboard_01")
    request_model_load(hash)
    local last_ent = players.user_ped()
    for i=2, 25 do 
        local c = ENTITY.GET_OFFSET_FROM_ENTITY_IN_WORLD_COORDS(last_ent, 0, -i, 0)
        local d = entities.create_object(hash, c)
        ENTITY.SET_ENTITY_HEADING(d, ENTITY.GET_ENTITY_HEADING(last_ent))
        OBJECT.PLACE_OBJECT_ON_GROUND_PROPERLY(d)
    end
end)

menu.toggle_loop(funfeatures, "一拳超人", {}, "", function()
    supermanpersonl()
end)

local Forcestate = 0
menu.toggle_loop(funfeatures, "原力", {}, "通过鼠标左键或右键来控制", function()
	if Forcestate == 0 then
		local effect = Effect.new("scr_ie_tw", "scr_impexp_tw_take_zone")
		local colour = {r = 0.5, g = 0.0, b = 0.5, a = 1.0}
		request_fx_asset(effect.asset)
		GRAPHICS.USE_PARTICLE_FX_ASSET(effect.asset)
		GRAPHICS.SET_PARTICLE_FX_NON_LOOPED_COLOUR(colour.r, colour.g, colour.b)
		GRAPHICS.START_NETWORKED_PARTICLE_FX_NON_LOOPED_ON_ENTITY(effect.name, players.user_ped(), 0.0, 0.0, -0.9,1.0, 1.0,1, 1.0, false, false, false)
		Forcestate = 1
	elseif Forcestate == 1 then
		PLAYER.DISABLE_PLAYER_FIRING(players.user(), true)
		PAD.DISABLE_CONTROL_ACTION(0, 25, true)
		PAD.DISABLE_CONTROL_ACTION(0, 68, true)
		PAD.DISABLE_CONTROL_ACTION(0, 91, true)
		local entities = get_ped_nearby_vehicles(players.user_ped())
		for _, vehicle in ipairs(entities) do
			if PED.IS_PED_IN_ANY_VEHICLE(players.user_ped(), false) and PED.GET_VEHICLE_PED_IS_IN(players.user_ped(), false) == vehicle then
				continue --跳过并执行
			end
			if PAD.IS_DISABLED_CONTROL_PRESSED(0, 24) and
			request_control_once(vehicle) then
				ENTITY.APPLY_FORCE_TO_ENTITY(vehicle, 1, 0.0, 0.0, 0.5, 1.0, 1.0,1, 0, false, false, true, false, false)
			elseif PAD.IS_DISABLED_CONTROL_PRESSED(0, 25) and
			request_control_once(vehicle) then
				ENTITY.APPLY_FORCE_TO_ENTITY(vehicle, 1, 0.0, 0.0, -70.0,1.0, 1.0,1, 0, false, false, true, false, false)
			end
		end
	end
end, function()
	Forcestate = 0
end)

Targeted_bombing = menu.toggle_loop(funfeatures, "定点轰炸", {"pointbombing"}, "标点指定轰炸", function ()
    local waypointPos = get_waypoint_v3()
    if waypointPos then
        local hash = util.joaat('w_arena_airmissile_01a')
        loadModel(hash)

        waypointPos.z = waypointPos.z + 30
        local bomb = entities.create_object(hash, waypointPos)
        waypointPos.z = waypointPos.z - 30
        ENTITY.SET_ENTITY_ROTATION(bomb, -90, 0, 0,  2, true)
        ENTITY.APPLY_FORCE_TO_ENTITY(bomb, 0, 0, 0, 0, 0.0, 0.0, 0.0, 0, true, false, true, false, true)
        STREAMING.SET_MODEL_AS_NO_LONGER_NEEDED(hash)

        while not ENTITY.HAS_ENTITY_COLLIDED_WITH_ANYTHING(bomb) do
            util.yield_once()
        end
        entities.delete_by_handle(bomb)
        executeNuke(waypointPos)
    end
end)

menu.toggle_loop(funfeatures, "地毯飞行", {}, "", function()
    carpetridexx()
end,function()
    carpetridexx1()
end)

menu.toggle(funfeatures, "忍者跑",{""}, "忍者跑步动作",function(on)--===heezy
    renzhepao(on)
end)
menu.toggle(funfeatures, "举起手来",{""}, "长按x",function(state)
    handsup = state
    while handsup do
        juqishoulai()
        util.yield()
    end
end)

menu.action(funfeatures, "自定义假R*警告", {"banner"}, "", function()
    notification("~bold~~y~请输入自定义内容(汉字可通过cv)", HudColour.blue)
    menu.show_command_box("banner ") 
end, function(text)
    custom_alert(text)
end)

local explosion_circle_angle = 0
menu.toggle_loop(funfeatures, "爆炸圈", {}, "在周围生成爆炸圈", function ()
    local ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(players.user())
    explosion_circle(ped, explosion_circle_angle, 25)
    explosion_circle_angle = explosion_circle_angle + 0.15
    util.yield(50)
end)

----钢铁侠
menu.toggle_loop(funfeatures, '钢铁侠', {}, '', function()
    Iron_Man()
end, function()
    Iron_Man_stop()
end)

menu.toggle_loop(funfeatures, "UFO勇闯洛城", {}, "在你的周围随机生成UFO", function(toggle)
    UFO_Los_Angeles(toggle)
end)

menu.toggle(funfeatures, "洛城暴乱", {}, "开启后,周围的npc会进入无差别攻击模式！", function(toggle)
    MISC.SET_RIOT_MODE_ENABLED(toggle)
end)

jinx_cats = menu.list(funfeatures, "宠物猫", {}, "")
    local jinx_pet
    jinx_toggle = menu.toggle_loop(jinx_cats, "宠物猫", {}, "招一只可爱的小猫咪\n跟着你喵喵叫!", function()
        if not jinx_pet or not ENTITY.DOES_ENTITY_EXIST(jinx_pet) then
            local jinx = util.joaat("a_c_cat_01")
            request_model(jinx)
            local pos = players.get_position(players.user())
            jinx_pet = entities.create_ped(28, jinx, pos, 0)
            PED.SET_PED_COMPONENT_VARIATION(jinx_pet, 0, 0, 1, 0)
            ENTITY.SET_ENTITY_INVINCIBLE(jinx_pet, true)
        end
        NETWORK.NETWORK_REQUEST_CONTROL_OF_ENTITY(jinx_pet)
        TASK.TASK_FOLLOW_TO_OFFSET_OF_ENTITY(jinx_pet, players.user_ped(), 0, -0.3, 0, 7.0, -1, 1.5, true)
        util.yield(2500)
    end, function()
        entities.delete_by_handle(jinx_pet)
        jinx_pet = nil
    end)

    menu.action(jinx_cats, "找到猫猫", {}, "将猫猫传送到你身边", function()
            local player = players.user_ped()
            local pos = ENTITY.GET_ENTITY_COORDS(player, false)
            ENTITY.SET_ENTITY_COORDS_NO_OFFSET(jinx_pet, pos.x, pos.y, pos.z, false, false, false)
        end)


    local jinx_army = {}
    local army = menu.list(jinx_cats, "宠物猫猫军队", {}, "哈哈哈,一群小猫猫")
    menu.click_slider(army, "生成数量", {}, "选吧,多生成点,最多256只", 1, 256, 30, 1, function(val)
        local ped = players.user_ped()
        local pos = ENTITY.GET_ENTITY_COORDS(ped, false)
        pos.y = pos.y - 5
        pos.z = pos.z + 1
        local jinx = util.joaat("a_c_cat_01")
        request_model(jinx)
        for i = 1, val do
            jinx_army[i] = entities.create_ped(28, jinx, pos, 0)
            ENTITY.SET_ENTITY_INVINCIBLE(jinx_army[i], true)
            PED.SET_BLOCKING_OF_NON_TEMPORARY_EVENTS(jinx_army[i], true)
            PED.SET_PED_COMPONENT_VARIATION(jinx_army[i], 0, 0, 1, 0)
            TASK.TASK_FOLLOW_TO_OFFSET_OF_ENTITY(jinx_army[i], ped, 0, -0.3, 0, 7.0, -1, 10, true)
            util.yield()
        end 
    end)

    menu.action(army, "清除宠物猫", {}, "", function()
        for i, ped in ipairs(entities.get_all_peds_as_handles()) do
            if PED.IS_PED_MODEL(ped, util.joaat("a_c_cat_01")) then
                entities.delete_by_handle(ped)
            end
        end
    end)


menu.toggle_loop(funfeatures, "激光眼", {}, "按住E键", function(on)
    laser_eyes()
end)


menu.toggle_loop(funfeatures, "镭射炮", {}, "", function()
    Laser_cannon()
end)

finger_thing = menu.list(funfeatures, "手指枪", {}, "按B键")
    shouzhiqiang()


menu.toggle(funfeatures, "力场", {}, "", function(on)
    force_Field(on)
end)


force_field = menu.list(funfeatures, "力场Pro", {}, "")
    menu.toggle_loop(force_field, "开启", {}, "", function()
        force_Field_pro()
    end)
    menu.list_select(force_field, "力场方向", {}, "", s_forcefield_names, 0, function(val)
        force_Field_direction(val)
    end)
    menu.slider_float(force_field, "力场范围", {"sforcefieldrange"}, "", 100, 10000, 2000, 100, function(value)
        force_Field_range(value)
    end)
    menu.toggle_loop(force_field, "绘制力场范围", {}, "", function()
        Plot_force_field_range()
    end)




-------崩溃全局
menu.action(sk, "无效降落伞", {}, "", function ()
    Invalid_parachute()
end)

menu.action(sk, "载具伞崩全局", {}, "崩溃全局", function ()
    local SelfPlayerPed = PLAYER.PLAYER_PED_ID()
    local PreviousPlayerPos = ENTITY.GET_ENTITY_COORDS(SelfPlayerPed, true)
    for i = 1, 20 do
        local SelfPlayerPos = ENTITY.GET_ENTITY_COORDS(SelfPlayerPed, true)
        local Ruiner2 = CreateVehicle(util.joaat("Ruiner2"), SelfPlayerPos, ENTITY.GET_ENTITY_HEADING(TargetPlayerPed), true)
        PED.SET_PED_INTO_VEHICLE(SelfPlayerPed, Ruiner2, -1)
        ENTITY.SET_ENTITY_COORDS_NO_OFFSET(Ruiner2, SelfPlayerPos.x, SelfPlayerPos.y, 1000, false, true, true)
        util.yield(200)
        VEHICLE1._SET_VEHICLE_PARACHUTE_MODEL(Ruiner2, util.joaat("prop_beach_parasol_05"))
        VEHICLE1._SET_VEHICLE_PARACHUTE_ACTIVE(Ruiner2, true)
        util.yield(200)
        entities.delete_by_handle(Ruiner2)
    end
    ENTITY.SET_ENTITY_COORDS_NO_OFFSET(SelfPlayerPed, PreviousPlayerPos.x, PreviousPlayerPos.y, PreviousPlayerPos.z, false, true, true)
    util.toast("崩溃执行结束")
end)

airplane_collapsed = menu.list(sk, "飞机模型崩溃", {}, "慎用")
    menu.toggle_loop(airplane_collapsed, "开始", {}, "耗时很久", function()
        airplane_collapsed1()
    end)
    menu.action(airplane_collapsed, "防崩镜头关闭", {}, "", function()
        menu.trigger_commands("anticrashcamera off")
    end)

menu.action(sk, "崩溃主机", {}, "使用前请确认自己是否为主机", function(pid)
    hostcrash(pid)
end)

menu.action(sk, "人物伞崩V1", {}, "", function()
    local SelfPlayerPed = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(PLAYER.PLAYER_ID())
    local PreviousPlayerPos = ENTITY.GET_ENTITY_COORDS(SelfPlayerPed, true)
    for n = 0 , 3 do
        local object_hash = util.joaat("prop_logpile_06b")
        STREAMING.REQUEST_MODEL(object_hash)
          while not STREAMING.HAS_MODEL_LOADED(object_hash) do
           util.yield()
        end
        PLAYER.SET_PLAYER_PARACHUTE_MODEL_OVERRIDE(PLAYER.PLAYER_ID(),object_hash)
        ENTITY.SET_ENTITY_COORDS_NO_OFFSET(SelfPlayerPed, 0,0,500, false, true, true)
        WEAPON.GIVE_DELAYED_WEAPON_TO_PED(SelfPlayerPed, 0xFBAB5776, 1000, false)
        util.yield(1000)
        for i = 0 , 20 do
            PED.FORCE_PED_TO_OPEN_PARACHUTE(SelfPlayerPed)
        end
        util.yield(1000)
        ENTITY.SET_ENTITY_COORDS_NO_OFFSET(SelfPlayerPed, PreviousPlayerPos.x, PreviousPlayerPos.y, PreviousPlayerPos.z, false, true, true)

        local object_hash2 = util.joaat("prop_beach_parasol_03")
        STREAMING.REQUEST_MODEL(object_hash2)
          while not STREAMING.HAS_MODEL_LOADED(object_hash2) do
           util.yield()
        end
        PLAYER.SET_PLAYER_PARACHUTE_MODEL_OVERRIDE(PLAYER.PLAYER_ID(),object_hash2)
        ENTITY.SET_ENTITY_COORDS_NO_OFFSET(SelfPlayerPed, 0,0,500, 0, 0, 1)
        WEAPON.GIVE_DELAYED_WEAPON_TO_PED(SelfPlayerPed, 0xFBAB5776, 1000, false)
        util.yield(1000)
        for i = 0 , 20 do
            PED.FORCE_PED_TO_OPEN_PARACHUTE(SelfPlayerPed)
        end
        util.yield(1000)
        ENTITY.SET_ENTITY_COORDS_NO_OFFSET(SelfPlayerPed, PreviousPlayerPos.x, PreviousPlayerPos.y, PreviousPlayerPos.z, false, true, true)
    end
    ENTITY.SET_ENTITY_COORDS_NO_OFFSET(SelfPlayerPed, PreviousPlayerPos.x, PreviousPlayerPos.y, PreviousPlayerPos.z, false, true, true)
end)

menu.action(sk,"人物伞崩V2", {}, "", function()
    for n = 0 , 5 do
        PEDP = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(PLAYER.PLAYER_ID())
        object_hash = 1381105889
                                    STREAMING.REQUEST_MODEL(object_hash)
      while not STREAMING.HAS_MODEL_LOADED(object_hash) do
           util.yield()
         end
        PLAYER.SET_PLAYER_PARACHUTE_MODEL_OVERRIDE(PLAYER.PLAYER_ID(),object_hash)
        ENTITY.SET_ENTITY_COORDS_NO_OFFSET(PEDP, 0,0,500, 0, 0, 1)
        WEAPON.GIVE_DELAYED_WEAPON_TO_PED(PEDP, 0xFBAB5776, 1000, false)
        util.yield(1000)
        for i = 0 , 20 do
        PED.FORCE_PED_TO_OPEN_PARACHUTE(PEDP)
        end
        util.yield(1000)
        menu.trigger_commands("tplsia")
        bush_hash = 720581693
                                    STREAMING.REQUEST_MODEL(bush_hash)
      while not STREAMING.HAS_MODEL_LOADED(bush_hash) do
           util.yield()
         end
        PLAYER.SET_PLAYER_PARACHUTE_MODEL_OVERRIDE(PLAYER.PLAYER_ID(),bush_hash)
        ENTITY.SET_ENTITY_COORDS_NO_OFFSET(PEDP, 0,0,500, 0, 0, 1)
        WEAPON.GIVE_DELAYED_WEAPON_TO_PED(PEDP, 0xFBAB5776, 1000, false)
           util.yield(1000)
        for i = 0 , 20 do
        PED.FORCE_PED_TO_OPEN_PARACHUTE(PEDP)
        end
        util.yield(1000)
        menu.trigger_commands("tplsia")
        end
end)

menu.action(sk,"人物伞崩V3",{},"",function()
    for n = 0 , 5 do
        PEDP = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(PLAYER.PLAYER_ID())
        object_hash =192829538
                                    STREAMING.REQUEST_MODEL(object_hash)
      while not STREAMING.HAS_MODEL_LOADED(object_hash) do
           util.yield()
         end
        PLAYER.SET_PLAYER_PARACHUTE_MODEL_OVERRIDE(PLAYER.PLAYER_ID(),object_hash)
        ENTITY.SET_ENTITY_COORDS_NO_OFFSET(PEDP, 0,0,500, 0, 0, 1)
        WEAPON.GIVE_DELAYED_WEAPON_TO_PED(PEDP, 0xFBAB5776, 1000, false)
        util.yield(1000)
        for i = 0 , 20 do
        PED.FORCE_PED_TO_OPEN_PARACHUTE(PEDP)
        end
        util.yield(1000)
        menu.trigger_commands("tplsia")
        bush_hash = 	192829538
                                    STREAMING.REQUEST_MODEL(bush_hash)
      while not STREAMING.HAS_MODEL_LOADED(bush_hash) do
           util.yield()
         end
        PLAYER.SET_PLAYER_PARACHUTE_MODEL_OVERRIDE(PLAYER.PLAYER_ID(),bush_hash)
        ENTITY.SET_ENTITY_COORDS_NO_OFFSET(PEDP, 0,0,500, 0, 0, 1)
        WEAPON.GIVE_DELAYED_WEAPON_TO_PED(PEDP, 0xFBAB5776, 1000, false)
           util.yield(1000)
        for i = 0 , 20 do
        PED.FORCE_PED_TO_OPEN_PARACHUTE(PEDP)
        end
        util.yield(1000)
        menu.trigger_commands("tplsia")
    end
end)

menu.action(sk,"人物伞崩V4",{},"",function()
    for n = 0 , 5 do
        PEDP = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(PLAYER.PLAYER_ID())
        object_hash = 1117917059
                                    STREAMING.REQUEST_MODEL(object_hash)
      while not STREAMING.HAS_MODEL_LOADED(object_hash) do
           util.yield()
         end
        PLAYER.SET_PLAYER_PARACHUTE_MODEL_OVERRIDE(PLAYER.PLAYER_ID(),object_hash)
        ENTITY.SET_ENTITY_COORDS_NO_OFFSET(PEDP, 0,0,500, 0, 0, 1)
        WEAPON.GIVE_DELAYED_WEAPON_TO_PED(PEDP, 0xFBAB5776, 1000, false)
        util.yield(1000)
        for i = 0 , 20 do
        PED.FORCE_PED_TO_OPEN_PARACHUTE(PEDP)
        end
        util.yield(1000)
        menu.trigger_commands("tplsia")
        bush_hash = 1117917059
                                    STREAMING.REQUEST_MODEL(bush_hash)
      while not STREAMING.HAS_MODEL_LOADED(bush_hash) do
           util.yield()
         end
        PLAYER.SET_PLAYER_PARACHUTE_MODEL_OVERRIDE(PLAYER.PLAYER_ID(),bush_hash)
        ENTITY.SET_ENTITY_COORDS_NO_OFFSET(PEDP, 0,0,500, 0, 0, 1)
        WEAPON.GIVE_DELAYED_WEAPON_TO_PED(PEDP, 0xFBAB5776, 1000, false)
           util.yield(1000)
        for i = 0 , 20 do
        PED.FORCE_PED_TO_OPEN_PARACHUTE(PEDP)
        end
        util.yield(1000)
        menu.trigger_commands("tplsia")
    end
end)

menu.action(sk,"CARGO崩溃",{},"崩溃所有玩家",function()
    CARGO()
end)

menu.action(sk, "大自然全局崩溃", {}, "", function()
    nature()
end)

menu.action(sk, "懂哥崩溃", {}, "", function()
    util.toast("I'll try to convince them to leave :) ")
    PLAYER.SET_PLAYER_PARACHUTE_PACK_MODEL_OVERRIDE(PLAYER.PLAYER_ID(),0xE5022D03)
    TASK.CLEAR_PED_TASKS_IMMEDIATELY(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(players.user()))
    util.yield(20)
    local p_pos = ENTITY.GET_ENTITY_COORDS(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid))
    ENTITY.SET_ENTITY_COORDS_NO_OFFSET(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(players.user()),p_pos.x,p_pos.y,p_pos.z,false,true,true)
    WEAPON.GIVE_DELAYED_WEAPON_TO_PED(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(players.user()), 0xFBAB5776, 1000, false)
    TASK.TASK_PARACHUTE_TO_TARGET(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(players.user()),-1087,-3012,13.94)
    util.yield(500)
    TASK.CLEAR_PED_TASKS_IMMEDIATELY(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(players.user()))
    util.yield(1000)
    PLAYER.CLEAR_PLAYER_PARACHUTE_PACK_MODEL_OVERRIDE(PLAYER.PLAYER_ID())
    TASK.CLEAR_PED_TASKS_IMMEDIATELY(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(players.user()))
end)

menu.action(sk, "数学崩溃", {}, "", function()
    math1()
end)

menu.action(sk, "全局顶崩", {}, "", function()
    unknown()
end)

menu.action(sk, "5G崩溃", {""}, "", function()
    local TPP = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
    local pos = ENTITY.GET_ENTITY_COORDS(TPP, true)
    pos.z = pos.z + 10
    veh = entities.get_all_vehicles_as_handles()
    for i = 1, #veh do
        NETWORK.NETWORK_REQUEST_CONTROL_OF_ENTITY(veh[i])
        ENTITY.SET_ENTITY_COORDS_NO_OFFSET(veh[i], pos.x,pos.y,pos.z, ENTITY.GET_ENTITY_HEADING(TPP), 10)
        TASK.TASK_VEHICLE_TEMP_ACTION(TPP, veh[i], 18, 999)
        TASK.TASK_VEHICLE_TEMP_ACTION(TPP, veh[i], 16, 999)
    end
end)
menu.action(sk,"冷战崩溃",{},"崩崩崩",function()
    for n = 0 , 5 do
        PEDP = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(PLAYER.PLAYER_ID())
        object_hash = 1117917059
        STREAMING.REQUEST_MODEL(object_hash)
        while not STREAMING.HAS_MODEL_LOADED(object_hash) do
           util.yield()
        end
        PLAYER.SET_PLAYER_PARACHUTE_MODEL_OVERRIDE(PLAYER.PLAYER_ID(),object_hash)
        ENTITY.SET_ENTITY_COORDS_NO_OFFSET(PEDP, 0,0,500, 0, 0, 1)
        WEAPON.GIVE_DELAYED_WEAPON_TO_PED(PEDP, 0xFBAB5776, 1000, false)
        util.yield(1000)
        for i = 0 , 20 do
        PED.FORCE_PED_TO_OPEN_PARACHUTE(PEDP)
        end
        util.yield(1000)
        menu.trigger_commands("tplsia")
        bush_hash = -908104950
        STREAMING.REQUEST_MODEL(bush_hash)
        while not STREAMING.HAS_MODEL_LOADED(bush_hash) do
           util.yield()
        end
        PLAYER.SET_PLAYER_PARACHUTE_MODEL_OVERRIDE(PLAYER.PLAYER_ID(),bush_hash)
        ENTITY.SET_ENTITY_COORDS_NO_OFFSET(PEDP, 0,0,500, 0, 0, 1)
        WEAPON.GIVE_DELAYED_WEAPON_TO_PED(PEDP, 0xFBAB5776, 1000, false)
           util.yield(1000)
        for i = 0 , 20 do
            PED.FORCE_PED_TO_OPEN_PARACHUTE(PEDP)
        end
        util.yield(1000)
        menu.trigger_commands("tplsia")
    end
end)
menu.action(sk,"声音崩溃战局", {}, "", function()
    local TPP = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
    local time = util.current_time_millis() + 2000
    while time > util.current_time_millis() do
    local TPPS = ENTITY.GET_ENTITY_COORDS(TPP, true)
        for i = 1, 20 do
            AUDIO.PLAY_SOUND_FROM_COORD(-1, "Event_Message_Purple", TPPS.x,TPPS.y,TPPS.z, "GTAO_FM_Events_Soundset", true, 100000, false)
        end
        util.yield()
        for i = 1, 20 do
        AUDIO.PLAY_SOUND_FROM_COORD(-1, "5s", TPPS.x,TPPS.y,TPPS.z, "GTAO_FM_Events_Soundset", true, 100000, false)
        end
        util.yield()
    end
end)

---------------------------------------------------玩家选项--------------------------------------
players.on_join(function(pid)
    menu.divider(menu.player_root(pid), "daidai_Script")
    local Player_list = menu.list(menu.player_root(pid), "daidai脚本", {"daidai"}, F)
        menu.toggle(Player_list, "观看玩家", {}, "", function(toggle)
            menu.trigger_commands("spectate".. players.get_name(pid), toggle)
        end)
        menu.action(Player_list, "宣布玩家", {}, "公宣布玩家信息", function()
            chat.send_message("玩家"..PLAYER.GET_PLAYER_NAME(pid)..": "..
            "\nRID: "..players.get_rockstar_id(pid)..
            "\nPID: "..pid..
            "\nIP: "..intToIp(players.get_connect_ip(pid))..
            "\n主机令牌: "..players.get_host_token(pid)..
            "\n人物模型: "..int_to_uint(ENTITY.GET_ENTITY_MODEL(PLAYER.GET_PLAYER_PED(pid)))..
            "\n生命值: "..ENTITY.GET_ENTITY_HEALTH(PLAYER.GET_PLAYER_PED(pid)),false,true,true)
        end)
        menu.toggle_loop(Player_list, "自动传送到玩家", {}, "当与玩家的距离大于3时自动传送到玩家", function()
            local playerpos = players.get_position(pid)
            local mypos = players.get_position(players.user())
            local distance = math.ceil(MISC.GET_DISTANCE_BETWEEN_COORDS(playerpos.x, playerpos.y, playerpos.z, mypos.x, mypos.y, mypos.z))
            if distance > 3 then
                TELEPORT(playerpos.x, playerpos.y, playerpos.z)
            end
        end)
        local friendly = menu.list(Player_list, "友好选项", {}, "")
        local trolling = menu.list(Player_list, "恶搞选项", {}, "")
        local kickplayer = menu.list(Player_list, "踢出玩家", {}, "")
        local crashplayer = menu.list(Player_list, "崩溃玩家", {}, "")
        local cussinglayer = menu.list(Player_list, "猛怼玩家", {}, "使劲骂他")
        menu.action(Player_list, "玩家自检", {}, "检测玩家是否触发作弊者检测", function() 
            is_player_modder(pid) 
        end)

    ------友好选项
    menu.toggle_loop(friendly, "自动给予脚本主机", {}, "", function()
        while players.get_script_host() ~= pid do 
            menu.trigger_commands("givesh" .. players.get_name(pid))
            util.yield(10)
        end
        util.yield(500)
    end)
    menu.action(friendly,"升级车辆", {}, "", function()
        local player_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        local vehicle = PED.GET_VEHICLE_PED_IS_USING(player_ped)
        request_control_of_entity(vehicle)
        upgrade_vehicle(vehicle)
    end)


    menu.list_action(friendly, "更改弹药效果", {}, "", explosion_names, function(index)
            explosion_id = index - 2
            local coords_exp = v3.new()
            while players.exists(pid) do
                if explosion_id ~= -1 then
                    if WEAPON.GET_PED_LAST_WEAPON_IMPACT_COORD(PLAYER.GET_PLAYER_PED(pid), coords_exp) then
                        local x, y, z = v3.get(coords_exp)
                        FIRE.ADD_OWNED_EXPLOSION(PLAYER.GET_PLAYER_PED(pid), x, y, z, explosion_id, 1.0, true, false, 0)
                    end
                end
                util.yield()
            end
    end)


    dropRP = menu.list(friendly, "天降RP值", {}, "")
        rpdropDelay = 1500
        menu.slider(dropRP, "RP天降延迟", {}, "RP天降延迟", 100, 10000, 1500, 100, function(rpDelay)
            rpDropDelay = rpDelay
        end)
        menu.toggle_loop(dropRP, "天降RP", {}, "RP天降,但延迟可调", function()
            local coords = players.get_position(pid)
            coords.z = coords.z + 1.5
            local figure = MISC.GET_HASH_KEY("vw_prop_vw_colle_prbubble")
            STREAMING.REQUEST_MODEL(figure)
            if STREAMING.HAS_MODEL_LOADED(figure) == false then  
                STREAMING.REQUEST_MODEL(figure)
            end
            OBJECT.CREATE_AMBIENT_PICKUP(-1009939663, coords.x, coords.y, coords.z, 0, 1, figure, false, true)
            util.yield(rpDropDelay)
        end)
    dropCard = menu.list(friendly, "天降收集牌", {}, "")
        cardDropDelay = 1500
        menu.slider(dropCard, "收集牌延迟", {}, "延迟收集牌", 100, 10000, 1500, 100, function(cardDelay)
            cardDropDelay = cardDelay
        end)
        menu.toggle_loop(dropCard, "天降收集牌", {}, "玩家每次只能拾取54张牌,请注意,这还没有测试过禁令,但应该是安全的", function()
            local coords = players.get_position(pid)
            coords.z = coords.z + 1.5
            local card = MISC.GET_HASH_KEY("vw_prop_vw_lux_card_01a")
            STREAMING.REQUEST_MODEL(card)
            if STREAMING.HAS_MODEL_LOADED(card) == false then  
                STREAMING.REQUEST_MODEL(card)
            end
            OBJECT.CREATE_AMBIENT_PICKUP(-1009939663, coords.x, coords.y, coords.z, 0, 1, card, false, true)
            util.yield(cardDropDelay)
        end)

    --------玩家恶搞选项
    kill_godmode = menu.list(trolling, "击杀玩家", {}, "")
    Classic_trolling = menu.list(trolling, "经典恶搞", {}, "")
    lz = menu.list(trolling, "套笼子", {}, "")
    npc_trolling = menu.list(trolling, "NPC恶搞", {}, "")
    weapon_trolling = menu.list(trolling, "武器恶搞", {}, "")
    vehicle_car = menu.list(trolling, "载具恶搞", {}, "")
    tp_player_trolling = menu.list(trolling, "发送玩家", {}, "")
    entspam_root = menu.list(trolling, "生成实体垃圾", {}, "")


    ------击杀玩家
    menu.action(kill_godmode, "用天基炮杀死他", {}, "", function()
            if is_player_in_any_interior(pid) then
                util.toast("该玩家正在室内")
            elseif is_player_passive(pid) then
                util.toast("该玩家正处于被动模式")
            elseif not OrbitalCannon.exists() and PLAYER.IS_PLAYER_PLAYING(pid) then
                OrbitalCannon.create(pid)
            end
    end)
    menu.action(kill_godmode, "杀死被动", {}, "", function()
        local coords = players.get_position(pid)
        local playerPed = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        coords.z = coords.z + 5
        local playerCar = PED.GET_VEHICLE_PED_IS_IN(playerPed, false)
        if playerCar > 0 then
            entities.delete_by_handle(playerCar)
        end
        local carHash = util.joaat("dukes2")
        loadModel(carHash)
        local car = entities.create_vehicle(carHash, coords, 0)
        ENTITY.SET_ENTITY_VISIBLE(car, false, 0)
        ENTITY.APPLY_FORCE_TO_ENTITY(car, 1, 0.0, 0.0, -65, 0.0, 0.0, 0.0, 1, false, true, true, true, true)
    end)
    menu.action(kill_godmode, "死亡屏障击杀", {}, "", function()
        Death_barrier(pid)
    end)
    menu.toggle_loop(kill_godmode,"移除玩家无敌", {}, "", function()
        util.trigger_script_event(1 << pid, {0xAD36AA57, pid, 0x96EDB12F, math.random(0, 0x270F)})
    end)
    menu.action(kill_godmode, "杀死无敌玩家v1", {""}, "普通击杀", function()
        local ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        local pos = ENTITY.GET_ENTITY_COORDS(ped)
        MISC.SHOOT_SINGLE_BULLET_BETWEEN_COORDS(pos.x, pos.y, pos.z + 1, pos.x, pos.y, pos.z, 99999, true, util.joaat("weapon_stungun"), players.user_ped(), false, true, 1.0)
    end)
    menu.textslider(kill_godmode, "杀死无敌玩家v2", {}, "强制击杀", {"Khanjali", "APC"}, function(index, veh)
        Force_kill(index, veh, pid)
    end)   
    menu.toggle_loop(kill_godmode,"炸死无敌玩家", {}, "被大多数菜单拦截", function()
        local ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        local pos = ENTITY.GET_ENTITY_COORDS(ped)
        if not PED.IS_PED_DEAD_OR_DYING(ped) and not NETWORK.NETWORK_IS_PLAYER_FADING(pid) then
            util.trigger_script_event(1 << pid, {0xAD36AA57, pid, 0x96EDB12F, math.random(0, 0x270F)})
            FIRE.ADD_OWNED_EXPLOSION(players.user_ped(), pos.x, pos.y, pos.z, 2, 50, true, false, 0.0)
        end
    end)


    ----经典恶搞
    menu.action(Classic_trolling, "消防栓大喷水", {}, "", function()
        firefighting(pid)
    end)
    menu.action(Classic_trolling, "强制打开降落伞", {}, "", function()
        PED.FORCE_PED_TO_OPEN_PARACHUTE(PLAYER.GET_PLAYER_PED(pid))
    end)
    enemyVehiclesOpt = menu.list(Classic_trolling, "敌对载具", {}, "")
        menu.textslider(enemyVehiclesOpt, "派遣敌对载具", {}, "", enemy_options, function(index, option)
            send_enemy_veh(index, option, pid)
        end)
        menu.list_select(enemyVehiclesOpt, "迷你坦克武器", {}, "", gunnerWeaponNames, 1, function(index)
            mini_tank_weapon(index)
        end)
        menu.list_select(enemyVehiclesOpt, "枪手的武器", {}, "", enemVehOptions, 1, function(index)
            enemy_gunman_weapon(index)
        end)
        menu.slider(enemyVehiclesOpt, "数量", {}, "",1, 10, 1, 1, function (value)
            set_enemy_count(value)
        end)
        menu.toggle(enemyVehiclesOpt, "无敌", {}, "",function(toggle)
            set_enemy_Godmode(toggle)
        end)
        menu.action(enemyVehiclesOpt, "删除", {}, "", function()
            delete_enemy_veh()
        end)

    menu.toggle(Classic_trolling, "摇晃镜头", {}, "", function(on)
        usingShakeCam = on
        while usingShakeCam and is_player_active(pid, false, true) and not util.is_session_transition_active() do
            local pos = players.get_position(pid)
            FIRE.ADD_OWNED_EXPLOSION(players.user_ped(), pos.x, pos.y, pos.z, 0, 0.0, false, true, 80.0)
            util.yield(150)
        end
    end)
    menu.action(Classic_trolling, "清除任务", {}, "可将玩家踢出载具", function ()
        local pedp = PLAYER.GET_PLAYER_PED(pid)
        TASK.CLEAR_PED_TASKS_IMMEDIATELY(pedp)
    end)
    menu.action(Classic_trolling, "炸鱼", {}, "", function ()
        fried_fish(pid)
    end)
    menu.action(Classic_trolling,"泰坦号轰炸", {}, "", function()
        Titan_bombing(pid)
    end)
    menu.toggle_loop(Classic_trolling, "渲染粒子", {}, "", function()
        Render_particles(pid)
    end)

    tp_entity = menu.list(Classic_trolling, "传送实体", {}, "")
        menu.toggle_loop(tp_entity, "传送所有PED给玩家", {}, "", function ()
            TpAllPeds(pid)
        end)
        menu.toggle_loop(tp_entity, "传送所有载具给玩家", {}, "", function ()
            TpAllVehs(pid)
        end)
        menu.toggle_loop(tp_entity, "传送所有物体给玩家", {}, "", function ()
            TpAllObjects(pid)
        end)

    Monster_Army = menu.list(Classic_trolling, "怪兽军队", {}, "")
        menu.action(Monster_Army, "生成怪兽军队", {}, "",function()
            local player_Yule_army = {}
            local ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
            local pos = ENTITY.GET_ENTITY_COORDS(ped, false)
            pos.y = pos.y - 5
            pos.z = pos.z + 1
            local Yule = util.joaat("U_M_M_YuleMonster")
            request_model(Yule)
            for i = 1, 48 do
            player_Yule_army[i] = entities.create_ped(28, Yule, pos, 0)
            ENTITY.SET_ENTITY_INVINCIBLE(player_Yule_army[i], true)
            PED.SET_BLOCKING_OF_NON_TEMPORARY_EVENTS(player_Yule_army[i], true)
            PED.SET_PED_COMPONENT_VARIATION(player_Yule_army[i], 0, 0, 1, 0)
            TASK.TASK_FOLLOW_TO_OFFSET_OF_ENTITY(player_Yule_army[i], ped, 0, -0.3, 0, 7.0, -1, 10, true)
            WEAPON.GIVE_WEAPON_TO_PED(player_Yule_army[i], util.joaat('WEAPON_CANDYCANE'),  9999, true, true)
            PED.SET_PED_COMBAT_ATTRIBUTES(player_Yule_army[i], 20, true)
            PED.SET_PED_SHOOT_RATE(player_Yule_army[i], 1000)
            util.yield()
            end 
        end)
        menu.action(Monster_Army, "清除圣诞怪兽", {}, "", function()
            for i, ped in ipairs(entities.get_all_peds_as_handles()) do
                if PED.IS_PED_MODEL(ped, util.joaat("U_M_M_YuleMonster")) then
                    entities.delete_by_handle(ped)
                end
            end
        end)

    glitch_player = menu.list(Classic_trolling, "鬼畜玩家", {}, "")
        menu.list_select(glitch_player, "物体", {}, "选择鬼畜玩家使用的物体.", object_stuff.names, 1, function(index)
            obj_creat(index)
        end)
        menu.slider(glitch_player, "物体生成延迟", {"spawndelay"}, "", 0, 3000, 150, 10, function(amount)
            obj_creat_speed(amount)
        end)
        glitchplayer = menu.toggle_loop(glitch_player,"鬼畜玩家", {}, "", function()
            Ghost_Beast_Player(pid)
        end)

    menu.toggle_loop(Classic_trolling, "电击玩家", {}, "", function()
        local ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        local pos = players.get_position(pid)
        MISC.SHOOT_SINGLE_BULLET_BETWEEN_COORDS(pos.x, pos.y, pos.z + 1, pos.x, pos.y, pos.z, 1000, true, util.joaat("weapon_stungun"), false, false, true, 1.0)
    end)
    menu.action(Classic_trolling, "核弹1", {}, "", function()----heezy
        nuclear_bomb_player(pid)
    end)
    menu.action(Classic_trolling, "核弹2", {}, "", function()
        local hash = util.joaat("prop_military_pickup_01")
        request_model(hash)
        local pos = players.get_position(pid)
        local nuke = OBJECT.CREATE_OBJECT_NO_OFFSET(hash, pos.x, pos.y, pos.z + 20, true, false, true)
        ENTITY.APPLY_FORCE_TO_ENTITY(nuke, 3, 0.0, 0.0, -50, 0.0, 0.0, 0.0, 0, true, false, true, false, true)
        ENTITY.SET_ENTITY_HAS_GRAVITY(nuke, true)
        while not ENTITY.HAS_ENTITY_COLLIDED_WITH_ANYTHING(nuke) and not ENTITY.IS_ENTITY_IN_WATER(nuke) do
            util.yield(0)
        end
        local nukePos = ENTITY.GET_ENTITY_COORDS(nuke, true)
        entities.delete_by_handle(nuke)
        create_nuke_explosion(nukePos)
    end)
    menu.click_slider(Classic_trolling, "虚假抢钱", {}, "", 0, 2147483647, 0, 1000, function(amount)
        util.trigger_script_event(1 << pid, {548471420, players.user(), 532932991, amount, 0, 0, 0, 0, 0, 0, pid, players.user(), 0, 0})
        util.trigger_script_event(1 << players.user(), {548471420, players.user(), 532932991, amount, 0, 0, 0, 0, 0, 0, pid, players.user(), 0, 0})
    end)
    bountyplayer = menu.list(Classic_trolling, "给予悬赏", {}, "")
        local bounty_amount = 10000
        menu.action(bountyplayer,"悬赏",{""},"",function()
            local name = PLAYER.GET_PLAYER_NAME(pid)
            menu.trigger_commands("bounty"..name.." "..bounty_amount)
        end)
        bountyplayer:slider("悬赏金额",{"Bountyamountplayer"},"",1,10000,10000,1000,function(amount)
            bounty_amount = amount
        end)
    menu.action(Classic_trolling,  "踢出室内", {}, "强制将玩家踢出室内.", function()
        Kick_room(pid)
    end)
    menu.toggle(Classic_trolling, "撒尿", {}, "随地大小便应该遭到谴责", function(on)
        peeloop_player(pid,on)
    end)
    menu.action(Classic_trolling, "UFO引力", {}, "使用UFO将它们拉起一秒钟", function()
        local coords = players.get_position(pid)
        coords.z = coords.z + 63
        local ufoModel = MISC.GET_HASH_KEY("p_spinning_anus_s")
        local ufo = entities.create_object(ufoModel, coords)
        local player = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        local vehicle = PED.GET_VEHICLE_PED_IS_IN(player, false)

        if PED.IS_PED_IN_VEHICLE(player, vehicle, false) then 
            caremp(pid)
            util.yield(1000)
            NETWORK.NETWORK_REQUEST_CONTROL_OF_ENTITY(vehicle)
            VEHICLE.BRING_VEHICLE_TO_HALT(vehicle, 3, 4, false)
            VEHICLE.SET_VEHICLE_ENGINE_ON(vehicle, false, true, true)
            ENTITY.APPLY_FORCE_TO_ENTITY(vehicle, 1, 0.0, 0.0, 65, 0.0, 0.0, 0.0, 1, false, true, true, true, true)
            util.yield(6000)
            entities.delete_by_handle(ufo)
        else
            entities.delete_by_handle(ufo)
            util.toast("目标不在车辆中") 
    end
    end)

    send_sms = menu.list(trolling, "发送短信", {}, "")
        local mmessage = "您已被永久禁止进入Grand Theft Auto 在线模式"
        menu.text_input(send_sms, "自定义短信", {"customizemmessage"}, "", function(value)
            mmessage = value
        end,mmessage)
        local ffont_size = 11
        menu.slider(send_sms, "字体尺寸", {"fonttextsize"}, "", 1, 20, 11, 1, function (value)
            ffont_size = value
        end)
        menu.action(send_sms,  "发送", {}, "", function()
            menu.trigger_commands("smstext" .. PLAYER.GET_PLAYER_NAME(pid).. " " .. "<font size='"..ffont_size.. "'>~w~"..mmessage)
            menu.trigger_commands("smssend" .. PLAYER.GET_PLAYER_NAME(pid))
        end)

    --------武器恶搞
        menu.toggle_loop(weapon_trolling,"移除玩家武器", {}, "", function()
            util.trigger_script_event(1 << pid, {0xAD36AA57, pid, 0x96EDB12F, math.random(0, 0x270F)})
        end)
        menu.toggle_loop(weapon_trolling, "重型狙击枪", {}, "", function()
            local hash <const> = util.joaat("weapon_heavysniper")
            local camPos = CAM.GET_GAMEPLAY_CAM_COORD()
            local pos = ENTITY.GET_ENTITY_COORDS(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid), false)
            request_weapon_asset(hash)
            WEAPON.GIVE_WEAPON_TO_PED(players.user_ped(), hash, 120, true, false)
            MISC.SHOOT_SINGLE_BULLET_BETWEEN_COORDS(camPos.x, camPos.y, camPos.z, pos.x, pos.y, pos.z, 200, false, hash, players.user_ped(), true, false, -1.0)
        end)
        menu.toggle_loop(weapon_trolling, "烟花", {"Fireworksdownward"}, "", function()
            local pos = ENTITY.GET_ENTITY_COORDS(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid), false)
            local hash <const> = util.joaat("weapon_firework")
            request_weapon_asset(hash)
            WEAPON.GIVE_WEAPON_TO_PED(players.user_ped(), hash, 120, true, false)
            MISC.SHOOT_SINGLE_BULLET_BETWEEN_COORDS(pos.x, pos.y, pos.z + 3.0, pos.x, pos.y, pos.z - 2.0, 200, false, hash, 0, true, false, 2500.0)
        end)
        menu.toggle_loop(weapon_trolling, "原子波", {}, "", function()
            local pos = ENTITY.GET_ENTITY_COORDS(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid), false)
            local hash <const> = util.joaat("weapon_raypistol")
            request_weapon_asset(hash)
            WEAPON.GIVE_WEAPON_TO_PED(players.user_ped(), hash, 120, true, false)
            MISC.SHOOT_SINGLE_BULLET_BETWEEN_COORDS(pos.x, pos.y, pos.z + 3.0, pos.x, pos.y, pos.z - 2.0, 200, false, hash, 0, true, false, 2500.0)
        end)
        menu.toggle_loop(weapon_trolling, "燃烧弹", {}, "", function()
            local pos = ENTITY.GET_ENTITY_COORDS(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid), false)
            local hash <const> = util.joaat("weapon_molotov")
            request_weapon_asset(hash)
            WEAPON.GIVE_WEAPON_TO_PED(players.user_ped(), hash, 120, true, false)
            MISC.SHOOT_SINGLE_BULLET_BETWEEN_COORDS(pos.x, pos.y, pos.z, pos.x, pos.y, pos.z - 2.0, 200, false, hash, 0, true, false, 2500.0)
        end)
        menu.toggle_loop(weapon_trolling, "电磁脉冲发射器", {}, "", function()
            local pos = ENTITY.GET_ENTITY_COORDS(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid), false)
            local hash = util.joaat("weapon_emplauncher")
            request_weapon_asset(hash)
            WEAPON.GIVE_WEAPON_TO_PED(players.user_ped(), hash, 120, true, false)
            MISC.SHOOT_SINGLE_BULLET_BETWEEN_COORDS(pos.x, pos.y, pos.z, pos.x, pos.y, pos.z - 2.0, 200, false, hash, 0, true, false, 2500.0)
        end)

    menu.toggle(trolling, "烟花发射玩家", {}, "", function(on)
        if on then
            menu.trigger_commands("Bouncetheplayerfly"..PLAYER.GET_PLAYER_NAME(pid))
            util.yield(2000)
            menu.trigger_commands("Fireworksdownward"..PLAYER.GET_PLAYER_NAME(pid))
        else
            menu.trigger_commands("Bouncetheplayerfly"..PLAYER.GET_PLAYER_NAME(pid))
            menu.trigger_commands("Fireworksdownward"..PLAYER.GET_PLAYER_NAME(pid)) 
        end
    end)
    fire_work_show = menu.list(trolling, "烟火秀", {}, "")
        local firw = {speed = 1000}
        menu.toggle_loop(fire_work_show, '头顶烟火', {}, '开始一场烟火秀', function ()
            local targets = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
            local tar1 = ENTITY.GET_ENTITY_COORDS(targets, true)
            local weap = util.joaat('weapon_firework')
            WEAPON.REQUEST_WEAPON_ASSET(weap)
            for y = 0, 1 do
                MISC.SHOOT_SINGLE_BULLET_BETWEEN_COORDS(tar1.x, tar1.y, tar1.z + 4.0, tar1.x - math.random(-100, 100), tar1.y - math.random(-100, 100), tar1.z + math.random(10, 15), 200, 0, weap, 0, false, false, firw.speed)
                MISC.SHOOT_SINGLE_BULLET_BETWEEN_COORDS(tar1.x, tar1.y, tar1.z + 4.0, tar1.x + math.random(-100, 100), tar1.y + math.random(-100, 100), tar1.z + math.random(10, 15), 200, 0, weap, 0, false, false, firw.speed)
                FIRE.ADD_EXPLOSION(tar1.x + math.random(-100, 100), tar1.y + math.random(-100, 100), tar1.z + math.random(50, 75), 38, 1, false, false, 0, false)
                FIRE.ADD_EXPLOSION(tar1.x - math.random(-100, 100), tar1.y - math.random(-100, 100), tar1.z + math.random(50, 75), 38, 1, false, false, 0, false) 
            end
        end)
        menu.toggle_loop(fire_work_show, '脚下烟火', {}, '', function ()
            local targets = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
            local tar1 = ENTITY.GET_ENTITY_COORDS(targets, true)
            local weap = util.joaat('weapon_firework')
            WEAPON.REQUEST_WEAPON_ASSET(weap)
            for y = 0, 1 do
                MISC.SHOOT_SINGLE_BULLET_BETWEEN_COORDS(tar1.x, tar1.y, tar1.z + -1.0, tar1.x - math.random(-100, 100), tar1.y - math.random(-100, 100), tar1.z + math.random(10, 15), 200, 0, weap, 0, false, false, firw.speed)
                --MISC.SHOOT_SINGLE_BULLET_BETWEEN_COORDS(tar1.x, tar1.y, tar1.z + 2.0, tar1.x + math.random(-100, 100), tar1.y + math.random(-100, 100), tar1.z + math.random(10, 15), 200, 0, weap, 0, false, false, firw.speed)
                FIRE.ADD_EXPLOSION(tar1.x + math.random(-100, 100), tar1.y + math.random(-100, 100), tar1.z + math.random(50, 75), 38, 1, false, false, 0, false)
                FIRE.ADD_EXPLOSION(tar1.x - math.random(-100, 100), tar1.y - math.random(-100, 100), tar1.z + math.random(50, 75), 38, 1, false, false, 0, false) 
            end
        end)
    menu.toggle_loop(trolling, '假钱雨', {}, '', function ()
        local targets = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        local tar1 = ENTITY.GET_ENTITY_COORDS(targets, true)
        Streamptfx('core')
        GRAPHICS.START_NETWORKED_PARTICLE_FX_NON_LOOPED_AT_COORD( 'ent_brk_banknotes', tar1.x, tar1.y, tar1.z + 1, 0, 0, 0, 3.0, true, true, true)
        if not players.exists(pid) then
            util.stop_thread()
        end
    end)

    ------笼子
    menu.action(lz, "栅栏", {}, "", function()
        fence_lz(pid)
    end)
    menu.list_action(lz, "移动笼子", {}, "", kidnap_types, function(index, value)
        kidnapplayer(pid, index, value)
    end)
    menu.action(lz, "缆车笼子", {}, "", function()
        local hash = util.joaat("p_cablecar_s")
        local pos = players.get_position(pid)
        local obj = OBJECT.CREATE_OBJECT_NO_OFFSET(hash, pos.x, pos.y - 0.1, pos.z + 4.2, true, false, false)
        ENTITY.FREEZE_ENTITY_POSITION(obj, true)
    end)
    menu.action(lz, "小桶笼子", {}, "", function()
        Kegs_cage(pid)
    end)
    menu.action(lz, "电击笼子", {}, "", function()
        Shock_cage(pid)
    end)
    menu.action(lz, "集装箱笼子", {}, "", function()
        Container_cage(pid)
    end)
    menu.action(lz, "隐形笼子", {}, "", function()
        Vehicle_cage(pid)
    end)
    menu.action(lz, "树木笼子", {}, "", function()
        local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        spam_entity_on_player(target_ped, -37176073)
    end)
    menu.action(lz, "关门放狗", {}, "", function()
        Close_dog(pid)
    end)
    menu.action(lz, "恐怖之牢", {}, "听说半夜能吓死人", function()
        Terror_Prison(pid)
    end)
    menu.action(lz, "普通笼子", {""}, "", function ()
        ptlz(pid)
    end)
    menu.action(lz, "小的竞技管", {}, "", function()
        Small_athletics(pid)
    end)
    menu.action(lz, "竖向货机笼子", {}, "", function()
        Vertical_freighter_cage(pid)
    end)
    menu.action(lz, "横行货机笼子", {}, "", function()
        Rampage_plane_cage(pid)
    end)
    menu.action(lz, "支柱笼子", {}, "", function ()
        menu.trigger_commands("cage".. players.get_name(pid))
    end)
    menu.toggle_loop(lz, "全自动笼子", {}, "每一秒套一次", function ()
        menu.trigger_commands("cage".. players.get_name(pid))
        util.yield(1000)
    end)
    menu.action(lz, "英国女王笼子", {}, "", function(cl)
        gueencage(pid)
    end)
    menu.action(lz, "燃气笼", {}, "", function()
        gascage(pid)
    end)
    menu.action(lz, "七度空间", {""}, "", function ()
        qdkj(pid)
    end)
    menu.action(lz, "钱笼子", {""}, "", function ()
        zdlz(pid)
    end)
    menu.action(lz, "垃圾箱", {""}, "", function ()
        yylz(pid)
    end)
    menu.action(lz, "小车车", {""}, "", function ()
        cclz(pid)
    end)
    menu.action(lz, "圣诞树", {""}, "", function ()
        sdkl1(pid)
    end)
    menu.action(lz, "圣诞快乐pro", {""}, "", function ()
        sdkl2(pid)
    end)
    menu.action(lz, "圣诞快乐promax", {""}, "", function ()
        sdkl3(pid)
    end)
    menu.action(lz, "竞技管", {""}, "", function ()
        jjglz(pid)
    end)

    ----------NPC恶搞
    menu.toggle_loop(npc_trolling, "敌对行人", {}, "周围的npc干他", function()
        Enemy_NPCS(pid)
    end)
    menu.action(npc_trolling, "NPC杀", {}, "", function()
        NPC_kill(pid)
    end)
    menu.action(npc_trolling, "派遣劫匪", {}, "", function()
        sendmugger_npc(pid)
    end)

    menu.action(npc_trolling, "苦力怕小丑(MC里的爬行者)", {}, "", function()
        creep(pid)
    end)
    menu.action(npc_trolling, "发送崔佛", {}, "派崔佛去撞他们或碾压他们", function()
        send_Angry_Trevor(pid)
    end)


    attackers_root = menu.list(npc_trolling, "攻击者", {}, "")
        menu.action(attackers_root, "狗子攻击者", {}, "arf uwu", function()
            send_attacker(-1788665315, pid, false)
        end)
        menu.action(attackers_root, "山狮攻击者", {}, "rawr", function()
            send_attacker(307287994, pid, false)
        end)
        menu.action(attackers_root, "布拉德攻击者", {}, "恐怖的\n没有下体", function()
            send_attacker(util.joaat("CS_BradCadaver"), pid, false)
        end)
        menu.action(attackers_root, "悲伤的耶稣", {}, "产生一个不可战胜的耶稣和一个轨道枪,将不断攻击玩家,即使他们死后。如果他们太远,传送到他们。这有时会非常容易出错,但通常是由于网络", function()
            dispatch_griefer_jesus(pid)
        end)
        menu.action(attackers_root, "天煞战斗机", {}, "", function()
            Celestial_Fighter(pid)
        end)
        menu.action(attackers_root, "A10轰炸机", {}, "", function()
            send_aircraft_attacker(1692272545, -163714847, pid)
        end)
        menu.action(attackers_root, "派货机", {}, "", function()
            send_aircraft_attacker(util.joaat("cargoplane"), -163714847, pid)
        end)

    --------生成实体垃圾
    menu.action(entspam_root, "肿瘤", {}, "", function()
        local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        spam_entity_on_player(target_ped, 148511758)
    end)
    menu.action(entspam_root, "肿瘤2", {}, "", function()
        local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        spam_entity_on_player(target_ped, -26957549)
    end)
    menu.action(entspam_root, "肿瘤3", {}, "", function()
        local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        spam_entity_on_player(target_ped, 1467574459)
    end)
    menu.action(entspam_root, "树木", {}, "", function()
        local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        spam_entity_on_player(target_ped, -37176073)
    end)
    menu.action(entspam_root, "交通锥", {}, "生成交通锥", function()
        local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        spam_entity_on_player(target_ped, 3760607069)
    end)
    menu.action(entspam_root, "假鸡巴", {}, "给爷冲", function()
        local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        spam_entity_on_player(target_ped, 3872089630)
    end)
    menu.action(entspam_root, "热狗", {}, "", function()
        local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        spam_entity_on_player(target_ped, 2565741261)
    end)
    menu.action(entspam_root, "热狗摊", {}, "", function()
        local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        spam_entity_on_player(target_ped, 2713464726)
    end)
    menu.action(entspam_root, "摩天轮", {}, "", function()
        local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        spam_entity_on_player(target_ped, 3291218330)
    end)
    menu.action(entspam_root, "过山车", {}, "欢乐时光", function()
        local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        spam_entity_on_player(target_ped, 3413442113)
    end)
    menu.action(entspam_root, "空中雷达", {}, "让他们旋转", function()
        local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        spam_entity_on_player(target_ped, 2306058344)
    end)

    pteleportEntities = menu.list(trolling, "发送垃圾", {}, "给他生成一推垃圾玩意")
        menu.action(pteleportEntities, "NPC", {""}, "", function ()
            TpAllPeds(pid)
        end)
        menu.action(pteleportEntities, "载具", {""}, "", function ()
            TpAllVehs(pid)
        end)
        menu.action(pteleportEntities, "实体", {""}, "", function ()
            TpAllObjects(pid)
        end)
        menu.action(pteleportEntities, "拾取物", {""}, "", function ()
            TpAllPickups(pid)
        end)

    menu.action(trolling, "送进监狱", {}, "将此玩家传送到博林布鲁克监狱", function()
        local my_pos = ENTITY.GET_ENTITY_COORDS(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid))
        local my_ped = PLAYER.GET_PLAYER_PED(players.user())
        ENTITY.SET_ENTITY_COORDS_NO_OFFSET(my_ped, 1628.5234, 2570.5613, 45.56485, true, false, false, false)
        menu.trigger_commands("givesh " .. players.get_name(pid))
        menu.trigger_commands("summon " .. players.get_name(pid))
        menu.trigger_commands("invisibility on")
        menu.trigger_commands("otr")
        util.yield(5000)
        menu.trigger_commands("invisibility off")
        menu.trigger_commands("otr")
        ENTITY.SET_ENTITY_COORDS_NO_OFFSET(my_ped, my_pos.x, my_pos.y, my_pos.z)
    end)

    menu.action(trolling, "喷射", {"peeloop"}, "", function(state)
        local player_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        local bone_index = PED.GET_PED_BONE_INDEX(player_ped, 0x2e28)
        request_ptfx_asset_peeloop("core_snow")
        GRAPHICS.USE_PARTICLE_FX_ASSET("core_snow")
        ptfx_id = GRAPHICS.START_NETWORKED_PARTICLE_FX_LOOPED_ON_ENTITY_BONE(
            "cs_mich1_spade_dirt_throw", player_ped, 0, 0, 0, -90, 0, 0, bone_index, 2, false, false, false
        ) 
    end)

    menu.toggle(trolling, "范围删除", {}, "将玩家附近的模型删除", function(toggled)
        glitchForcefield = toggled
        local glitch_hash = util.joaat("p_spinning_anus_s")
        request_model(glitch_hash)
        while glitchForcefield do
            local player = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
            local playerpos = ENTITY.GET_ENTITY_COORDS(player, false) 
            if PED.IS_PED_IN_ANY_VEHICLE(player, true) then
                    deleplayercar(pid)
                end
            local stupid_object = entities.create_object(glitch_hash, playerpos)
            ENTITY.SET_ENTITY_VISIBLE(stupid_object, false)
            ENTITY.SET_ENTITY_INVINCIBLE(stupid_object, true)
            ENTITY.SET_ENTITY_COLLISION(stupid_object, true, true)
            util.yield()
            entities.delete_by_handle(stupid_object)
            util.yield()    
        end
    end)

    player_toggle_loop(trolling,pid, "弹飞玩家", {"Bouncetheplayerfly"}, "也适用于载具", function() 
        local poopy_butt = util.joaat("adder")
        local player = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        local pos = ENTITY.GET_ENTITY_COORDS(player)
        pos.z = pos.z - 10
        request_model(poopy_butt)
        local vehicle = entities.create_vehicle(poopy_butt, pos, 0)
        ENTITY.SET_ENTITY_VISIBLE(vehicle, false)
        util.yield(250)
        if vehicle ~= 0 then
            ENTITY.APPLY_FORCE_TO_ENTITY(vehicle, 1, 0.0, 0.0, 100, 0.0, 0.0, 0.0, 0, 1, 1, 1, 0, 1)
            util.yield(250)
            entities.delete_by_handle(vehicle)
        end
    end)


    set_models = menu.list(trolling, "套模型", {}, "")
        menu.toggle(set_models, "UFO", {}, "", function(toggled)
            local mdl = util.joaat("p_spinning_anus_s")
            local playerpos = ENTITY.GET_ENTITY_COORDS((pid), false)
            request_model(mdl)
            if toggled then
                obj = entities.create_object(mdl, playerpos)
                ENTITY.SET_ENTITY_VISIBLE(obj, false)
                ENTITY.ATTACH_ENTITY_TO_ENTITY(obj, players.user_ped(), 0, 0, 0, 0, 0, 0, 0, false, false, true, false, 0, false, 0)
            else
                if obj ~= nil then 
                    entities.delete_by_handle(obj)
                end
            end
        end)

    -------玩家载具恶搞
    menu.toggle(vehicle_car, "儿童锁", {}, "", function(on)
        Child_Lock(on,pid)
    end)
    menu.toggle_loop(vehicle_car, "敌对交通", {}, "使附近NPC载具恶意撞击玩家载具", function()
        Hostile_traffic()
    end)
    menu.action(vehicle_car, "变成恐龙", {""}, "", function()
        changemodel(pid)
    end)
    menu.action(vehicle_car, "给载具套笼子", {""}, "", function()
        longzi_veh(pid)
    end)
    menu.action(vehicle_car, "放置墙壁", {}, "在玩家前面放置墙壁,半秒后删除", function ()
        Place_wall(pid)
    end)
    
    menu.list_action(vehicle_car, "在车内生成NPC", {}, "用附近的行人填充玩家的车", full_with_options, function(index, value, click_type)
        npcfillthecar(pid, index,value)
    end)
    menu.list_action(vehicle_car, "拖车", {}, "将他们的车拖走", {"从前面", "从后面"}, function(index, value, click_type)
        towcarpro(pid, index, value)
    end)

    menu.action(vehicle_car, "分离载具零件", {}, "", function()
        control_vehicle1(pid, true, function(vehicle)
            local doors = VEHICLE.GET_NUMBER_OF_VEHICLE_DOORS(vehicle)
            VEHICLE.POP_OUT_VEHICLE_WINDSCREEN(vehicle)
            for i= 0, doors do
                VEHICLE.SET_VEHICLE_DOOR_BROKEN(vehicle, i, false)
            end
            menu.trigger_commands("detachwheel" ..  players.get_name(pid))
        end)
    end)
    menu.textslider(vehicle_car, "生成坡道", {}, "", ramps_names, function(ramps)
        local ramp = (ramps_hashes[ramps])
        request_model(ramp)
        control_vehicle1(pid, true, function(vehicle)
            local veh_coords_offset = ENTITY.GET_OFFSET_FROM_ENTITY_IN_WORLD_COORDS(vehicle, 0.0, 5, 0.0)
            local heading = ENTITY.GET_ENTITY_HEADING(vehicle)
            local ramp = entities.create_object(ramp, veh_coords_offset)
            ENTITY.SET_ENTITY_HEADING(ramp, heading)
        end)
    end)

    menu.toggle_loop(vehicle_car, "Mk2 自瞄", {}, "MK-2导弹自动瞄准玩家", function()
        local ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        local ped_dist = v3.distance(players.get_position(players.user()), players.get_position(pid))
        if not PED.IS_PED_DEAD_OR_DYING(ped) and PAD.IS_CONTROL_PRESSED(0, 70) and ped_dist < 200.0 then
            VEHICLE1.SET_VEHICLE_SHOOT_AT_TARGET(players.user_ped(), ped, players.get_position(pid))
        end
    end)
    menu.toggle_loop(vehicle_car, "载具爆炸", {}, "爆炸目标进入的任何车辆", function()
        local playerPed = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        local playerVehicle = PED.GET_VEHICLE_PED_IS_IN(playerPed, false)
        if PED.IS_PED_IN_VEHICLE(playerPed, playerVehicle, false) then 
            if ENTITY.IS_ENTITY_DEAD(playerPed, false) == false then
                local coords = players.get_position(pid)
                FIRE.ADD_EXPLOSION(coords.x, coords.y, coords.z, 0, 100, true, false, 1, false)
            end
        end
    end)

    acrobatics = menu.list(vehicle_car, "车辆跳跃", {}, "")
        menu.action(acrobatics, "豚跳", {"ollie"}, "", function()
            local vehicle = get_vehicle_player_is_in(pId)
            if ENTITY.DOES_ENTITY_EXIST(vehicle) and VEHICLE.IS_VEHICLE_ON_ALL_WHEELS(vehicle) and
            request_control(vehicle, 1000) then
                ENTITY.APPLY_FORCE_TO_ENTITY(vehicle, 1, 0.0, 0.0, 10.0, 0.0, 0.0, 0.0, 1, false, true, true, true, true)
            end
        end)
        menu.action(acrobatics, "左侧空翻", {"kickflip"}, "", function()
            local vehicle = get_vehicle_player_is_in(pId)
            if ENTITY.DOES_ENTITY_EXIST(vehicle) and VEHICLE.IS_VEHICLE_ON_ALL_WHEELS(vehicle) and
            request_control(vehicle, 1000) then
                ENTITY.APPLY_FORCE_TO_ENTITY(vehicle, 1, 0.0, 0.0, 10.71, 5.0, 0.0, 0.0, 1, false, true, true, true, true)
            end
        end)
        menu.action(acrobatics, "双左侧空翻", {}, "", function()
            local vehicle = get_vehicle_player_is_in(pId)
            if ENTITY.DOES_ENTITY_EXIST(vehicle) and VEHICLE.IS_VEHICLE_ON_ALL_WHEELS(vehicle) and
            request_control(vehicle, 1000) then
                ENTITY.APPLY_FORCE_TO_ENTITY(vehicle, 1, 0.0, 0.0, 21.43, 20.0, 0.0, 0.0, 1, false, true, true, true, true)
            end
        end)
        menu.action(acrobatics, "右侧空翻", {}, "", function()
            local vehicle = get_vehicle_player_is_in(pId)
            if ENTITY.DOES_ENTITY_EXIST(vehicle) and VEHICLE.IS_VEHICLE_ON_ALL_WHEELS(vehicle) and
            request_control(vehicle, 1000) then
                ENTITY.APPLY_FORCE_TO_ENTITY(vehicle, 1, 0.0, 0.0, 10.71, -5.0, 0.0, 0.0, 1, false, true, true, true, true)
            end
        end)

    set_license_plates = menu.list(vehicle_car, "设置车牌", {}, "")
        menu.action(set_license_plates, "将车牌设置为daidai", {}, "", function()
            local car = PED.GET_VEHICLE_PED_IS_IN(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid), true)
            if car ~= 0 then
                request_control_of_entity(car)
                VEHICLE.SET_VEHICLE_NUMBER_PLATE_TEXT(car, "daidai")
            end
        end)
        menu.action(set_license_plates, "将车牌设置为i am SB", {}, "", function()
            local car = PED.GET_VEHICLE_PED_IS_IN(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid), true)
            if car ~= 0 then
                request_control_of_entity(car)
                VEHICLE.SET_VEHICLE_NUMBER_PLATE_TEXT(car, "i am SB")
            end
        end)

    menu.toggle(vehicle_car, "手刹", {}, "", function(on)
        local car = PED.GET_VEHICLE_PED_IS_IN(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid), true)
        if car ~= 0 then
            request_control_of_entity(car)
            VEHICLE.SET_VEHICLE_HANDBRAKE(car, on)
        end
    end)
    menu.toggle_loop(vehicle_car, "随机制动", {}, "", function(on)
        local car = PED.GET_VEHICLE_PED_IS_IN(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid), true)
        if car ~= 0 then
            request_control_of_entity(car)
            VEHICLE.SET_VEHICLE_HANDBRAKE(car, true)
            util.yield(1000)
            request_control_of_entity(car)
            VEHICLE.SET_VEHICLE_HANDBRAKE(car, false)
            util.yield(math.random(3000, 15000))
        end
    end)
    menu.toggle_loop(vehicle_car, "冻结", {}, "", function(on)
        local car = PED.GET_VEHICLE_PED_IS_IN(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid), true)
        ENTITY.SET_ENTITY_MAX_SPEED(car, 0)
    end)

    player_toggle_loop(vehicle_car, pid, "移除载具无敌", {"removevgm"}, "", function()
        local ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        if PED.IS_PED_IN_ANY_VEHICLE(ped, false) and not PED.IS_PED_DEAD_OR_DYING(ped) then
            local veh = PED.GET_VEHICLE_PED_IS_IN(ped, false)
            ENTITY.SET_ENTITY_CAN_BE_DAMAGED(veh, true)
            ENTITY.SET_ENTITY_INVINCIBLE(veh, false)
            ENTITY.SET_ENTITY_PROOFS(veh, false, false, false, false, false, 0, 0, false)
        end
    end)

    menu.action(trolling, "外星人爆炸", {""}, "", function() 
        local p = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        local c = ENTITY.GET_ENTITY_COORDS(p)
        STREAMING.REQUEST_MODEL(ufo)
        while not STREAMING.HAS_MODEL_LOADED(ufo) do
            STREAMING.REQUEST_MODEL(ufo)
            util.yield()
        end
        menu.trigger_commands("freeze".. players.get_name(pid).. " on")
        c.z = c.z + 10
        local spawnedufo = entities.create_object(ufo, c) --creates ufo
        util.yield(2000)
        c = ENTITY.GET_ENTITY_COORDS(p)
        FIRE.ADD_EXPLOSION(c.x, c.y, c.z, exp, 100.0, true, false, 3.0, false)
        util.yield(1000)
        entities.delete_by_handle(spawnedufo)
        menu.trigger_commands("freeze".. players.get_name(pid).. " off")
    end)

    kick_car = menu.list(vehicle_car, "踢出载具", {}, "")
        menu.action(kick_car, "踢出载具v1", {}, "踢出当前载具所有人\n且当前载具不能再上", function(toggled)
            kickcar(pid)
        end)
        menu.action(kick_car, "踢出载具v2", {}, "从载具里踢出玩家", function()
            menu.trigger_commands("vehkick".. players.get_name(pid))
        end)

    menu.action(vehicle_car, "删除载具", {}, "删除此玩家正在驾驶的载具", function()
        deleplayercar(pid)
    end)

    menu.toggle_loop(vehicle_car, "禁用载具", {}, "", function(toggle)
        local p = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        local veh = PED.GET_VEHICLE_PED_IS_IN(p, false)
        if (PED.IS_PED_IN_ANY_VEHICLE(p)) then
            TASK.CLEAR_PED_TASKS_IMMEDIATELY(p)
        else
            local veh2 = PED.GET_VEHICLE_PED_IS_TRYING_TO_ENTER(p)
            entities.delete_by_handle(veh2)
        end
    end)

    menu.toggle_loop(vehicle_car, "喇叭加速", {}, "当他们按喇叭时,推动汽车前进.", function() 
        remote_horn_boost_pid(pid)
    end)
    menu.toggle_loop(vehicle_car, "喇叭跳跳车", {}, "", function()
        remote_car_jump_pid(pid)
    end)
    menu.action(vehicle_car, "修复载具", {}, "给他们修车.", function() 
        repair_player_vehicle(pid) 
    end)
    menu.action(vehicle_car, "爆胎", {}, "", function ()
        menu.trigger_commands("poptires".. players.get_name(pid))
    end)
    menu.action(vehicle_car, "移除车门", {}, "", function ()
        menu.trigger_commands("removedoors".. players.get_name(pid))
    end)
    menu.action(vehicle_car, "摧毁螺旋桨", {}, "使螺旋桨失效", function ()
        menu.trigger_commands("destroyprop".. players.get_name(pid))
    end)
    menu.action(vehicle_car, "引擎控制", {}, "如果他们的发动机打开,它就会关闭,反之亦然.", function() 
        toggle_player_vehicle_engine(pid) 
    end)
    menu.action(vehicle_car, "摧毁引擎", {}, "让他们的引擎起火.", function() 
        break_player_vehicle_engine(pid) 
    end)
    menu.action(vehicle_car, "向前推进", {}, "大力推动车辆前进.", function() 
        boost_player_vehicle_forward(pid) 
    end)
    menu.action(vehicle_car, "弹飞载具", {}, "", function() 
        launch_up_player_vehicle(pid) 
    end)
    menu.action(vehicle_car, "停止车辆", {}, "", function() 
        stop_player_vehicle(pid) 
    end) 
    menu.action(vehicle_car, "倒置车辆", {}, "", function() 
        flip_player_vehicle(pid) 
    end)
    menu.action(vehicle_car, "车辆翻转180度", {}, "", function()
        turn_player_vehicle(pid)
    end)

    local explosion_circle_angle = 0
    menu.toggle_loop(trolling, "爆炸圈", {}, "在他周围生成爆炸圈", function ()
        local ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        explosion_circle(ped, explosion_circle_angle, 25)
        explosion_circle_angle = explosion_circle_angle + 0.15
        util.yield(50)
    end)

    menu.action(trolling, "爆炸", {}, "", function ()
        menu.trigger_commands("explode".. players.get_name(pid))
    end)
    menu.toggle_loop(trolling, '循环爆炸', {''}, '', function()
        menu.trigger_commands("explode".. players.get_name(pid))
    end)
    menu.toggle_loop(trolling, "无损伤爆炸", {"tossplayers"}, "", function()
        local playerCoords = ENTITY.GET_ENTITY_COORDS(PLAYER.GET_PLAYER_PED(pid), true)
        SE_add_explosion(playerCoords['x'], playerCoords['y'], playerCoords['z'], 1, 1, SEisExploAudible, SEisExploInvis, 0, true)
    end)
    menu.toggle_loop(trolling, "原子弹轰炸", {"atomicbomb"}, "", function()
        do
        orbital(pid)
        end
    end)         
    menu.toggle_loop(trolling,"火箭雨", {'rockets'}, '', function()
        rain_rockets(pid, false)
        util.yield(500)
    end)
    menu.toggle_loop(trolling, "火箭撞击", {}, "", function()
        local coords = players.get_position(pid)
        local playerPed = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        MISC.SHOOT_SINGLE_BULLET_BETWEEN_COORDS(coords.x, coords.y, coords.z+10, coords.x, coords.y, coords.z, 1, true, -1312131151, playerPed, true, false, 50)
        util.yield(1500)
    end)
    local shenfengoptions = {"天煞", "天行巨兽",  "古邦800"}
        menu.textslider(trolling, "神风敢死队", {}, "", shenfengoptions, function (index)
            local vehicles = {"Lazer", "Mammatus",  "Cuban800"}
            local plane = vehicles[index]
            local hash  = util.joaat(plane)
            request_model(hash)
            local targetPed = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
            local pos = get_random_offset_from_entity(targetPed, 20.0, 20.0)
            pos.z = pos.z + 30.0
            local plane = entities.create_vehicle(hash, pos, 0.0)
            set_entity_face_entity(plane, targetPed, true)
            VEHICLE.SET_VEHICLE_FORWARD_SPEED(plane, 150.0)
            VEHICLE.CONTROL_LANDING_GEAR(plane, 3)
            util.yield(1000)
            entities.delete_by_handle(plane)
        end)

        crashoptions = {"叛乱", "幻影楔形",  "蝰蛇"}
        menu.textslider(trolling, "撞击玩家", {}, "", crashoptions, function (index)
            local vehicles = {"insurgent2", "phantom2", "adder"}
            local vehicleName = vehicles[index]
            local vehicleHash = util.joaat(vehicleName)
            request_model(vehicleHash)
            local targetPed = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
            local coord = get_random_offset_from_entity(targetPed, 12.0, 12.0)
            local vehicle = entities.create_vehicle(vehicleHash, coord, 0.0)
            set_entity_face_entity(vehicle, targetPed, false)
            VEHICLE.SET_VEHICLE_DOORS_LOCKED(vehicle, 2)
            VEHICLE.SET_VEHICLE_FORWARD_SPEED(vehicle, 100.0)
            util.yield(1000)
            entities.delete_by_handle(vehicle)
        end)

    menu.toggle(trolling, "粒子轰炸", {}, "", function ()
        menu.trigger_commands("particlespam".. players.get_name(pid))
    end)
    menu.action(trolling, "强制进入自由模式任务", {}, "强制玩家进入自由模式任务", function()
        menu.trigger_commands("mission".. players.get_name(pid))
    end)

    mrplaym = menu.list(trolling, '在玩家身上下雨', {}, '')
        mirloop =  menu.toggle_loop(mrplaym, '类型:雪球', {}, '启用下雨', function ()
            Rain_on_players(pid)
        end)
        menu.list_action(mrplaym, '类型', {''}, '更改在玩家身上下雨的类型', Weaplist, function(weapsel, text)
            Rain_on_players_type(weapsel, text)
        end)


    menu.action(vehicle_car, "传送到地下", {}, "", function()
        local p = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        local c = ENTITY.GET_ENTITY_COORDS(p)
        local veh = PED.GET_VEHICLE_PED_IS_IN(p, false)
        c.z = c.z - 100
        if PED.IS_PED_IN_ANY_VEHICLE(p, false) then
            local success, floorcoords
            repeat
                success, floorcoords = util.get_ground_z(c.x, c.y)
                util.yield()
            until success
            RequestControl(veh)
            floorcoords = floorcoords - 50
            ENTITY.SET_ENTITY_COORDS(veh, c.x, c.y, floorcoords, false, false, false, false) --tp undermap
        else
            util.toast("他不在车里哦")
        end
    end)

    menu.action(vehicle_car, "加速带", {}, "在他们面前产生车辆加速带", function() 
        local coords = players.get_position(pid)
            coords.z = coords.z - 0.3
            local player = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(players.user())
            local heading = ENTITY.GET_ENTITY_HEADING(player)
            local heading = heading + 80
            local boostpad = entities.create_object(3287988974, coords)
            ENTITY.SET_ENTITY_HEADING(boostpad, heading)
    end)
    menu.action(vehicle_car, "减速带", {}, "在他们面前产生车辆减速带", function() 
        local coords = players.get_position(pid)
            coords.z = coords.z - 0.4
            local player = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
            local heading = ENTITY.GET_ENTITY_HEADING(player)
            local heading = heading + 80
            local boostpad = entities.create_object(-227275508, coords)
            ENTITY.SET_ENTITY_HEADING(boostpad, heading)
    end)


    vehicle_impact = menu.list(trolling, "砸死他", {}, "")
        menu.action(vehicle_impact, "小丑车", {"crush3"}, "让他们看看他们是小丑", function()
            local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
            coords = ENTITY.GET_ENTITY_COORDS(target_ped, false)
            coords.x = coords['x']
            coords.y = coords['y']
            coords.z = coords['z'] + 20.0
            request_model(util.joaat("speedo2"))
            local truck = entities.create_vehicle(util.joaat("speedo2"), coords, 0.0)
            local vel = ENTITY.GET_ENTITY_VELOCITY(vel)
            ENTITY.SET_ENTITY_VELOCITY(truck, vel['x'], vel['y'], -200.0)
            VEHICLE.SET_VEHICLE_DOORS_LOCKED(truck, 3)
            VEHICLE.SET_VEHICLE_DOORS_LOCKED_FOR_NON_SCRIPT_PLAYERS(truck, true)
            util.yield(700)
            entities.delete_by_handle(truck)
        end)
        menu.action(vehicle_impact, "隐形车", {"crush4"}, "", function()
            local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
            coords = ENTITY.GET_ENTITY_COORDS(target_ped, false)
            coords.x = coords['x']
            coords.y = coords['y']
            coords.z = coords['z'] + 20.0
            request_model(1917016601)
            local truck = entities.create_vehicle(1917016601, coords, 0.0)
            local vel = ENTITY.GET_ENTITY_VELOCITY(vel)
            ENTITY.SET_ENTITY_VELOCITY(truck, vel['x'], vel['y'], -200.0)
            VEHICLE.SET_VEHICLE_DOORS_LOCKED(truck, 3)
            ENTITY.SET_ENTITY_VISIBLE(truck, false, 0)
            VEHICLE.SET_VEHICLE_DOORS_LOCKED_FOR_NON_SCRIPT_PLAYERS(truck, true)
            util.yield(2000)
            entities.delete_by_handle(truck)
        end)
        menu.action(vehicle_impact, "直接压倒", {"crush5"}, "", function()
            local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
            coords = ENTITY.GET_ENTITY_COORDS(target_ped, false)
            coords.x = coords['x']
            coords.y = coords['y']
            coords.z = coords['z'] + 20.0
            request_model(util.joaat("faggio2"))
            local truck = entities.create_vehicle(util.joaat("faggio2"), coords, 0.0)
            local vel = ENTITY.GET_ENTITY_VELOCITY(vel)
            ENTITY.SET_ENTITY_VELOCITY(truck, vel['x'], vel['y'], -200.0)
            VEHICLE.SET_VEHICLE_DOORS_LOCKED(truck, 3)
            ENTITY.SET_ENTITY_VISIBLE(truck, false, 0)
            VEHICLE.SET_VEHICLE_DOORS_LOCKED_FOR_NON_SCRIPT_PLAYERS(truck, true)
            util.yield(2000)
            entities.delete_by_handle(truck)
        end)
        menu.action(vehicle_impact, "大卡车", {""}, "", function()
            local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
            coords = ENTITY.GET_ENTITY_COORDS(target_ped, false)
            coords.x = coords['x']
            coords.y = coords['y']
            coords.z = coords['z'] + 20.0
            request_model(1917016601)
            local truck = entities.create_vehicle(1917016601, coords, 0.0)
            local vel = ENTITY.GET_ENTITY_VELOCITY(vel)
            ENTITY.SET_ENTITY_VELOCITY(truck, vel['x'], vel['y'], -100.0)
            VEHICLE.SET_VEHICLE_DOORS_LOCKED(truck, 3)
            VEHICLE.SET_VEHICLE_DOORS_LOCKED_FOR_NON_SCRIPT_PLAYERS(truck, true)
            util.yield(700)
            entities.delete_by_handle(truck)
        end)
        menu.action(vehicle_impact, "小绵羊", {"crush2"}, "", function()
            local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
            coords = ENTITY.GET_ENTITY_COORDS(target_ped, false)
            coords.x = coords['x']
            coords.y = coords['y']
            coords.z = coords['z'] + 20.0
            request_model(util.joaat("faggio2"))
            local truck = entities.create_vehicle(util.joaat("faggio2"), coords, 0.0)
            local vel = ENTITY.GET_ENTITY_VELOCITY(vel)
            ENTITY.SET_ENTITY_VELOCITY(truck, vel['x'], vel['y'], -200.0)
            VEHICLE.SET_VEHICLE_DOORS_LOCKED(truck, 3)
            VEHICLE.SET_VEHICLE_DOORS_LOCKED_FOR_NON_SCRIPT_PLAYERS(truck, true)
            util.yield(700)
            entities.delete_by_handle(truck)
        end)

    local player_veh_teleport = menu.list(vehicle_car, "传送载具", {}, "")
        menu.action(player_veh_teleport, "传送载具到我", {"tpvtome"}, "传送玩家最后一个载具\n或当前乘坐的载具", function()
            tpcartome(pid)
        end)
        menu.action(player_veh_teleport, "传送载具到导航点", {"tpvtoway"}, "传送玩家最后一个载具\n或当前乘坐的载具", function()
            tocartopoint(pid)
        end)
        menu.action(player_veh_teleport, "传送载具到花园银行停机坪", {"tpvtomaze"}, "传送玩家最后一个载具\n或当前乘坐的载具", function()
            tptomaze(pid)
        end)
        menu.action(player_veh_teleport, "传送载具到深海底", {"tpvunderwater"}, "传送玩家最后一个载具\n或当前乘坐的载具", function()
            tptounderwater(pid)
        end)
        menu.action(player_veh_teleport, "传送载具到高空", {""}, "传送玩家最后一个载具\n或当前乘坐的载具", function()
            tptohighair(pid)
        end)
        menu.action(player_veh_teleport, "传送载具到洛圣都改车王", {"tpvlsc"}, "传送玩家最后一个载具\n或当前乘坐的载具", function()
            tolsc(pid)
        end)
        menu.action(player_veh_teleport, "传送载具到监狱SCP-173单元", {"tpvscp"}, "传送玩家最后一个载具\n或当前乘坐的载具", function()
            tpscp(pid)
        end)
        menu.action(player_veh_teleport, "传送载具到大牢房中", {"tpvcell"}, "传送玩家最后一个载具\n或当前乘坐的载具", function()
            tocell(pid)
        end)

    menu.toggle(vehicle_car, "随机升级", {"upgradevehicle"}, "玩家必须有乘坐过的载具", function(state)
        abcd = state
    while abcd do
        randomupdatcar(pid)
    util.yield(500)
        end
    end)

    menu.action(vehicle_car, "电磁脉冲炸弹", {"empvehicle"}, "", function(on)
        caremp(pid)
    end)
    menu.toggle_loop(vehicle_car, "快乐的小陀螺", {"beybladev"}, "", function(on)
        carspin(pid)
    end)

    ---------------------------------------鬼畜载具
    local glitchVeh = false
    local glitchVehCmd
        glitchVehCmd = menu.toggle(vehicle_car, "鬼畜载具", {"glitchvehicle"}, "", function(toggle) -- credits to soul reaper for base concept
            glitchVeh = toggle
            local ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
            local pos = ENTITY.GET_ENTITY_COORDS(ped, false)
            local player_veh = PED.GET_VEHICLE_PED_IS_USING(ped)
            local veh_model = players.get_vehicle_model(pid)
            local ped_hash = util.joaat("a_m_m_acult_01")
            local object_hash = util.joaat("prop_ld_ferris_wheel")
            request_model(ped_hash)
            request_model(object_hash)
            
            while glitchVeh do
                if not players.exists(pid) then 
                    util.toast("玩家不存在. :/")
                    menu.set_value(glitchVehCmd, false);
                util.stop_thread() end

                if v3.distance(ENTITY.GET_ENTITY_COORDS(players.user_ped(), false), players.get_position(pid)) > 1000.0 
                and v3.distance(pos, players.get_cam_pos(players.user())) > 1000.0 then
                    util.toast("玩家太远了. :/")
                    menu.set_value(glitchVehCmd, false);
                break end

                if not PED.IS_PED_IN_VEHICLE(ped, player_veh, false) then 
                    util.toast("他不在车里哦! ")
                    menu.set_value(glitchVehCmd, false);
                break end

                if not VEHICLE.ARE_ANY_VEHICLE_SEATS_FREE(player_veh) then
                    util.toast("车上没空位了")
                    menu.set_value(glitchVehCmd, false);
                break end

                local seat_count = VEHICLE.GET_VEHICLE_MODEL_NUMBER_OF_SEATS(veh_model)
                local glitch_obj = entities.create_object(object_hash, pos)
                local glitched_ped = entities.create_ped(26, ped_hash, pos, 0)
                local things = {glitched_ped, glitch_obj}
                
                NETWORK.NETWORK_REQUEST_CONTROL_OF_ENTITY(glitch_obj)
                NETWORK.NETWORK_REQUEST_CONTROL_OF_ENTITY(glitched_ped)
                ENTITY.ATTACH_ENTITY_TO_ENTITY(glitch_obj, glitched_ped, 0, 0, 0, 0, 0, 0, 0, true, true, false, 0, true)

                for i, spawned_objects in ipairs(things) do
                    NETWORK.NETWORK_REQUEST_CONTROL_OF_ENTITY(spawned_objects)
                    ENTITY.SET_ENTITY_VISIBLE(spawned_objects, false)
                    ENTITY.SET_ENTITY_INVINCIBLE(spawned_objects, true)
                end
                for i = 0, seat_count -1 do
                    if VEHICLE.ARE_ANY_VEHICLE_SEATS_FREE(player_veh) then
                        local emptyseat = i
                        for l = 1, 25 do
                            PED.SET_PED_INTO_VEHICLE(glitched_ped, player_veh, emptyseat)
                            ENTITY.SET_ENTITY_COLLISION(glitch_obj, true, true)
                            util.yield()
                        end
                    end
                end
                if glitched_ped ~= nil then
                    entities.delete_by_handle(glitched_ped) 
                end
                if glitch_obj ~= nil then 
                    entities.delete_by_handle(glitch_obj)
                end
            end
        end)

    freeze_player = menu.list(trolling, "冻结", {}, "")
        player_toggle_loop(freeze_player, pid, "暴力冻结", {}, "", function()
            util.trigger_script_event(1 << pid, {330622597, players.user(), 0, 0, 0, 0, 0})
            util.yield(500)
        end)
        player_toggle_loop(freeze_player, pid, "仓库冻结", {}, "", function()
            util.trigger_script_event(1 << pid, {-1796714618, players.user(), 0, 1, 0, 0})
            util.yield(500)
        end)
        player_toggle_loop(freeze_player, pid, "模型冻结", {}, "", function()
            local ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
            TASK.CLEAR_PED_TASKS_IMMEDIATELY(ped)
        end)
        menu.action(freeze_player, "传送冻结", {}, "将冻结玩家大约20秒,然后将他们传送进网球场.", function()
            local int = memory.read_int(memory.script_global(1894573 + 1 + (pid * 608) + 510)) -- Global_1894573[PLAYER::PLAYER_ID() /*608*/].f_510
            util.trigger_script_event(1 << pid, {-95341040, players.user(), 195, 0, 0, 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1, 0, 0, 0, 0, 0, int})
            util.trigger_script_event(1 << pid, {1742713914, players.user(), 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0})
        end)

    local inf_loading = menu.list(trolling, "无限加载屏幕", {}, "")
        menu.action(inf_loading, "传送邀请", {}, "", function()
            util.trigger_script_event(1 << pid, {891653640, players.user(), 0, 32, NETWORK.NETWORK_HASH_FROM_PLAYER_HANDLE(pid), 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0})
        end)
        menu.action(inf_loading, "公寓邀请", {}, "", function()
            util.trigger_script_event(1 << pid, {-702866045, pid, 0, 1, id})
        end)

    menu.toggle_loop(trolling, "将玩家推向前方", {}, "", function()
        local player = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        local pos = ENTITY.GET_ENTITY_COORDS(player, false)
        local glitch_hash = util.joaat("prop_shuttering03")
        request_model(glitch_hash)
        local dumb_object_front = entities.create_object(glitch_hash, ENTITY.GET_OFFSET_FROM_ENTITY_IN_WORLD_COORDS(PLAYER.GET_PLAYER_PED(pid), 0, 1, 0))
        local dumb_object_back = entities.create_object(glitch_hash, ENTITY.GET_OFFSET_FROM_ENTITY_IN_WORLD_COORDS(PLAYER.GET_PLAYER_PED(pid), 0, 0, 0))
        ENTITY.SET_ENTITY_VISIBLE(dumb_object_front, false)
        ENTITY.SET_ENTITY_VISIBLE(dumb_object_back, false)
        util.yield()
        entities.delete_by_handle(dumb_object_front)
        entities.delete_by_handle(dumb_object_back)
        util.yield()    
    end)

    menu.action(trolling, "小行星攻击", {}, "用小行星来攻击他", function() 
        local coords = players.get_position(pid)
            coords.z = coords['z'] + 15.0
        local asteroid = entities.create_object(3751297495, coords)
            ENTITY.SET_ENTITY_DYNAMIC(asteroid, true)
    end)

    menu.toggle_loop(trolling, "向Ta发送垃圾邮件", {}, "", function()
        util.yield(250)
        menu.trigger_commands("commendfriendly".. PLAYER.GET_PLAYER_NAME(pid))
    end)

    -------------------发送玩家
    menu.action(tp_player_trolling, "发送到GTA5介绍界面", {}, "", function()
        local int = memory.read_int(memory.script_global(1894573 + 1 + (pid * 608) + 510))
        util.trigger_script_event(1 << pid, {-95341040, players.user(), 20, 0, 0, 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1, 0, 0, 0, 0, 0, int})
        util.trigger_script_event(1 << pid, {1742713914, players.user(), 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0})
    end)
    menu.action(tp_player_trolling, "发送到高尔夫俱乐部", {}, "派遣玩家去打高尔夫.", function()
        local int = memory.read_int(memory.script_global(1894573 + 1 + (pid * 608) + 510))
        util.trigger_script_event(1 << pid, {-95341040, players.user(), 193, 0, 0, 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1, 0, 0, 0, 0, 0, int})
        util.trigger_script_event(1 << pid, {1742713914, players.user(), 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0})
    end)
    menu.action(tp_player_trolling, "发送到自由模式", {}, "", function()
        local int = memory.read_int(memory.script_global(1894573 + 1 + (pid * 608) + 510))
        util.trigger_script_event(1 << pid, {-95341040, players.user(), 194, 0, 0, 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1, 0, 0, 0, 0, 0, int})
        util.trigger_script_event(1 << pid, {1742713914, players.user(), 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0})
    end)
    menu.action(tp_player_trolling, "强制1V1", {}, "", function()
        local int = memory.read_int(memory.script_global(1894573 + 1 + (pid * 608) + 510))
        util.trigger_script_event(1 << pid, {-95341040, players.user(), 197, 0, 0, 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1, 0, 0, 0, 0, 0, int})
        util.trigger_script_event(1 << pid, {1742713914, players.user(), 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0})
    end)
    menu.action(tp_player_trolling, "破坏室内状态", {}, "可以通过重新加入战局来取消。玩家必须在一个公寓里", function()
        if players.is_in_interior(pid) then
            util.trigger_script_event(1 << pid, {629813291, players.user(), pid, pid, pid, math.random(int_min, int_max), pid})
        else
            util.toast(players.get_name(pid) .. " 不在室内. :/")
        end
    end)
    menu.action(tp_player_trolling, "公寓邀请", {}, "", function()
        util.trigger_script_event(1 << pid, {-702866045, players.user(), pid, -1, 1, 1, 0, 1, 0}) 
    end)
    menu.action(tp_player_trolling, "任务邀请", {}, "", function()
        util.trigger_script_event(1 << pid, {36077543, players.user(), pid, 1, 7}) 
    end)
    menu.action(tp_player_trolling, "传送到佩里科岛", {"tpcayo"}, "", function()
        util.trigger_script_event(1 << pid, {330622597, pid, 0, 0, 3, 1})
    end)
    menu.action(tp_player_trolling, "传送到海滩", {"cayokick"}, "", function()
        util.trigger_script_event(1 << pid, {330622597, pid, 0, 0, 0x4, 0})
    end)

    menu.action(npc_trolling, "猫猫炸弹", {}, "", function(click_type)
        local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        local coords = ENTITY.GET_ENTITY_COORDS(target_ped, false)
        hash = util.joaat("a_c_cat_01")
        request_model_load(hash)
        for i=1, 30 do
            local cat = entities.create_ped(28, hash, coords, math.random(0, 270))
            local rand_x = math.random(-10, 10)*5
            local rand_y = math.random(-10, 10)*5
            local rand_z = math.random(-10, 10)*5
            ENTITY.SET_ENTITY_INVINCIBLE(cat, true)
            ENTITY.APPLY_FORCE_TO_ENTITY_CENTER_OF_MASS(cat, 1, rand_x, rand_y, rand_z, true, false, true, true)
            AUDIO.PLAY_PAIN(cat, 7, 0)
        end
    end)
    menu.action(npc_trolling, "墨西哥乐队", {}, "", function(click_type)
        dispatch_mariachi(pid)
    end)
    menu.action(npc_trolling, "克隆玩家", {}, "", function(click_type)
        local new_clone = PED.CLONE_PED(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid), true, false, true)
    end)

    local custom_hooker_options = {"克隆玩家", "莱斯特", "特蕾西", "贝克女士", "裸女"}
        menu.list_action(npc_trolling, "发送妓女", {}, "", custom_hooker_options, function(index, value, click_type)
            local hooker
            local c = ENTITY.GET_OFFSET_FROM_ENTITY_IN_WORLD_COORDS(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid), -5.0, 0.0, 0.0)
            pluto_switch index do
                case 1:
                    hooker = PED.CLONE_PED(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid), true, false, true)
                    break
                case 2:
                    request_model_load(util.joaat('cs_lestercrest'))
                    hooker = entities.create_ped(28, util.joaat('cs_lestercrest'), c, math.random(270))
                    break
                case 3:
                    request_model_load(util.joaat('cs_tracydisanto'))
                    hooker = entities.create_ped(28, util.joaat('cs_tracydisanto'), c, math.random(270))
                    break
                case 4:
                    request_model_load(util.joaat('csb_agatha'))
                    hooker = entities.create_ped(28, util.joaat('csb_agatha'), c, math.random(270))
                    break
                case 5:
                    request_model_load(util.joaat('a_f_y_topless_01'))
                    hooker = entities.create_ped(28, util.joaat('a_f_y_topless_01'), c, math.random(270))
                    PED.SET_PED_COMPONENT_VARIATION(hooker, 8, 1, 1, 1)
                    break 
                end
            local c = ENTITY.GET_OFFSET_FROM_ENTITY_IN_WORLD_COORDS(PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid), -5.0, 0.0, 0.0)
                ENTITY.SET_ENTITY_COORDS(hooker, c.x, c.y, c.z)
                TASK.TASK_START_SCENARIO_IN_PLACE(hooker, "WORLD_HUMAN_PROSTITUTE_HIGH_CLASS", 0, false)
        end)

    menu.toggle_loop(trolling, "切碎", {}, "", function()
        Finely_chopped(pid)
    end)

    menu.toggle_loop(trolling, "玩偶循环", {}, "目标会保持", function()
        local coords = players.get_position(pid)
        coords.z = coords['z'] - 2.0
        FIRE.ADD_EXPLOSION(coords.x, coords.y, coords.z, 11, 1, false, true, 0, true)
        util.yield(10)
    end)
    menu.toggle_loop(trolling, "烟雾掉帧", {""}, "", function()
        fumes(pid)
    end)

    make_entity = menu.list(trolling, "生成实体", {}, "")
        menu.action(make_entity, "生成竞技场", {}, "", function(click_type)
            local coords = players.get_position(pid)
            local hash = util.joaat("xs_terrain_set_dystopian_06")
            request_model_load(hash)
            local dust = OBJECT.CREATE_OBJECT_NO_OFFSET(hash, coords['x'], coords['y'], coords['z']-4, true, false, false)
            ENTITY.FREEZE_ENTITY_POSITION(dust, true)
        end)
        menu.action(make_entity, "生成黄土高坡", {}, "", function(click_type)
            local coords = players.get_position(pid)
            local hash = util.joaat("xs_terrain_dyst_ground_07")
            request_model_load(hash)
            local dust = OBJECT.CREATE_OBJECT_NO_OFFSET(hash, coords['x'], coords['y'], coords['z']-36, true, false, false)
            local hash2 = util.joaat("apa_prop_flag_brazil")
            request_model_load(hash2)
            local flag = OBJECT.CREATE_OBJECT_NO_OFFSET(hash2, coords['x'], coords['y'], coords['z'], true, false, false)
            ENTITY.FREEZE_ENTITY_POSITION(dust, true)
        end)
        local obj_options = {"斜坡", "路障", "风车","卫星"}
        menu.list_action(make_entity, "生成小实体", {},"", obj_options, function (index, value, click_type)
            local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
            pluto_switch index do 
                case 1:
                    local hash = 2282807134
                    request_model_load(hash)
                    local ramp = spawn_object_in_front_of_ped(target_ped, hash, 90, 50.0, -1, true)
                    local c = ENTITY.GET_ENTITY_COORDS(ramp, true)
                    ENTITY.SET_ENTITY_COORDS_NO_OFFSET(ramp, c['x'], c['y'], c['z']-0.2, false, false, false)
                    break
                case 2: 
                    local hash = 3729169359
                    local obj = spawn_object_in_front_of_ped(target_ped, hash, 0, 5.0, -0.5, false)
                    ENTITY.FREEZE_ENTITY_POSITION(obj, true)
                    break
                case 3: 
                    local hash = 1952396163
                    local obj = spawn_object_in_front_of_ped(target_ped, hash, 0, 5.0, -30, false)
                    ENTITY.FREEZE_ENTITY_POSITION(obj, true)
                    break
                case 4: 
                    local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
                    local hash = 2306058344
                    local obj = spawn_object_in_front_of_ped(target_ped, hash, 0, 0.0, -5.0, false)
                    ENTITY.FREEZE_ENTITY_POSITION(obj, true)
                    break
            end
        end)
        
    menu.toggle_loop(trolling, "将附近载具吸到他身上",{"magnet"}, "", function()
        local p_c = players.get_position(pid)
        for _, v in pairs(entities.get_all_vehicles_as_handles()) do 
            if not PED.IS_PED_A_PLAYER(VEHICLE.GET_PED_IN_VEHICLE_SEAT(v, -1, false)) then 
                local v_c = ENTITY.GET_ENTITY_COORDS(v)
                local c = {}
                c.x = (p_c.x - v_c.x)*2
                c.y = (p_c.y - v_c.y )*2
                c.z = (p_c.z - v_c.z)*2
                ENTITY.APPLY_FORCE_TO_ENTITY(v, 1, c.x, c.y, c.z, 0, 0, 0, 0, false, false, true, false, false)
            end
        end
    end)  

    firepillar = menu.list(trolling, "火柱", {}, "")
        menu.toggle_loop(firepillar, "循环喷火v1", {"flameloop"}, "火焰攻击！！！", function()
            local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
            local coords = ENTITY.GET_ENTITY_COORDS(target_ped, false)
            FIRE.ADD_EXPLOSION(coords['x'], coords['y'], coords['z'], 12, 100.0, true, false, 0.0)
        end)
        menu.toggle_loop(firepillar, "循环喷火v2", {}, "火焰攻击！！！", function()
            local coords = players.get_position(pid)
            coords.z = coords['z'] - 2.0
            FIRE.ADD_EXPLOSION(coords.x, coords.y, coords.z, 12, 1, true, false, 0, false)
            util.yield(25)
        end)
    waterpillar = menu.list(trolling, "水柱", {}, "")
        menu.toggle_loop(waterpillar, "循环喷水1", {}, "水柱攻击！！！", function()
            local coords = players.get_position(pid)
            coords.z = coords['z'] - 2.0
            FIRE.ADD_EXPLOSION(coords.x, coords.y, coords.z, 13, 1, true, false, 0, false)
            util.yield(25)
        end)
        menu.toggle_loop(waterpillar, "循环喷水2", {"waterloop"}, "水柱攻击！！！", function()
            local target_ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
            local coords = ENTITY.GET_ENTITY_COORDS(target_ped, false)
            FIRE.ADD_EXPLOSION(coords['x'], coords['y'], coords['z'], 13, 100.0, true, false, 0.0)
        end)

    menu.toggle_loop(trolling, "追踪", {}, "地下有痕迹", function()
        local coords = players.get_position(pid)
        coords.z = coords['z'] + 1.5
        FIRE.ADD_EXPLOSION(coords.x, coords.y, coords.z, 35, 0, false, false, 0, false)
        util.yield(65)
    end)
    menu.toggle_loop(trolling, "让他走路带火", {}, "跑起来吧！！!", function()
        local coords = players.get_position(pid)
        FIRE.ADD_EXPLOSION(coords.x, coords.y, coords.z, 38, 0, false, false, 0, false)
        util.yield(65)
    end)
    menu.toggle_loop(trolling, "在他头上浇水", {}, "", function()
        local coords = players.get_position(pid)
        coords.z = coords['z'] + 1
        util.yield(65)
        FIRE.ADD_EXPLOSION(coords.x, coords.y, coords.z, 79, 0, false, false, 0, false)
    end)
    menu.action(trolling, "发射玩家", {"launch"}, "适用于大多数菜单.", function()
        local mdl = util.joaat("boxville3")
        local ped = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(pid)
        local pos = ENTITY.GET_ENTITY_COORDS(ped)
        request_model(mdl)   
        if PED.IS_PED_IN_ANY_VEHICLE(ped, false) then
            util.toast(players.get_name(pid) .. " 在载具中. :/")
            return 
        end
        boxville = entities.create_vehicle(mdl, ENTITY.GET_OFFSET_FROM_ENTITY_IN_WORLD_COORDS(ped, 0.0, 2.0, 0.0), ENTITY.GET_ENTITY_HEADING(ped))
        ENTITY.SET_ENTITY_VISIBLE(boxville, false)
        util.yield(250)
        repeat
            if v3.distance(players.get_position(pid), ENTITY.GET_ENTITY_COORDS(boxville)) < 10.0 then
                if boxville ~= 0 and ENTITY.DOES_ENTITY_EXIST(boxville)then
                    ENTITY.APPLY_FORCE_TO_ENTITY(boxville, 1, 0.0, 0.0, 25.0, 0.0, 0.0, 0.0, 0, 1, 1, 1, 0, 1)
                end
                util.yield()
            else
                entities.delete_by_handle(boxville)
            end
            util.yield()
            pos = ENTITY.GET_ENTITY_COORDS(ped)
        until pos.z > 10000.0
        util.yield(100)
        if boxville ~= 0 and ENTITY.DOES_ENTITY_EXIST(boxville) then 
            entities.delete_by_handle(boxville)
        end
    end)
    local sounds = menu.list(trolling, "声音恶搞", {}, "")
        menu.toggle_loop(sounds, "让他听到循环爆炸死亡声音", {}, "吵死了", function()
            local coords = players.get_position(pid)
            AUDIO.PLAY_SOUND_FROM_COORD(-1, "BED", coords.x, coords.y, coords.z, "WASTEDSOUNDS", true, 5, false)
            AUDIO.PLAY_SOUND_FROM_COORD(-1, "Crash", coords.x, coords.y, coords.z, "DLC_HEIST_HACKING_SNAKE_SOUNDS", true, 5, false)
            AUDIO.PLAY_SOUND_FROM_COORD(-1, "BASE_JUMP_PASSED", coords.x, coords.y, coords.z, "HUD_AWARDS", true, 5, false)
            util.yield(20)
        end)
        menu.toggle_loop(sounds, "循环死亡的声音", {}, "", function()
            local coords = players.get_position(pid)
            AUDIO.PLAY_SOUND_FROM_COORD(1, "BED", coords.x, coords.y, coords.z, "WASTEDSOUNDS", true, 5, false)
            util.yield(5800)
        end)
        menu.toggle_loop(sounds, "循环游艇声音", {}, "", function()
            local coords = players.get_position(pid)
            AUDIO.PLAY_SOUND_FROM_COORD(-1, "Horn", coords.x, coords.y, coords.z, "DLC_Apt_Yacht_Ambient_Soundset", true, 5, false)
            util.yield(3000)
        end)
        menu.toggle_loop(sounds, "嗡嗡声", {}, "", function()
            local coords = players.get_position(pid)
            AUDIO.PLAY_SOUND_FROM_COORD(-1, "Crash", coords.x, coords.y, coords.z, "DLC_HEIST_HACKING_SNAKE_SOUNDS", true, 5, false)
            util.yield(1700)
        end)
        menu.toggle_loop(sounds, "任务成功声音", {}, "", function()
            local coords = players.get_position(pid)
            AUDIO.PLAY_SOUND_FROM_COORD(1, "BASE_JUMP_PASSED", coords.x, coords.y, coords.z, "HUD_AWARDS", true, 5, false)
            util.yield(1250)
        end)

    ----踢出玩家
    menu.action(kickplayer, "智能踢", {}, "", function()
        util.trigger_script_event(1 << pid, {0xB9BA4D30, pid, 0x4, -1, 1, 1, 1})
        util.trigger_script_event(1 << pid, {0x6A16C7F, pid, memory.script_global(0x2908D3 + 1 + (pid * 0x1C5) + 0x13E + 0x7)})
        util.trigger_script_event(1 << pid, {0x63D4BFB1, players.user(), memory.read_int(memory.script_global(0x1CE15F + 1 + (pid * 0x257) + 0x1FE))})
        menu.trigger_commands("breakup" .. players.get_name(pid))
    end)
    menu.action(kickplayer, "阻止加入踢", {}, "将该玩家踢出后加入到stand阻止加入的列表中.", function()
        menu.trigger_commands("historyblock " .. players.get_name(pid))
        menu.trigger_commands("breakup" .. players.get_name(pid))
    end)

    -----崩溃玩家
    menu.toggle_loop(crashplayer, "无效载具崩溃", {}, "", function ()
        Invalid_vehicle_crashes(pid)
    end)
    menu.action(crashplayer, "XP终结者", {}, "", function()
        xp_over(pid)
    end)
    menu.action(crashplayer, "AIO崩", {}, "远离!!!", function()
        aaaio(pid)
    end)
    menu.action(crashplayer, "OX崩", {}, "远离!!!", function()
        OXcrashgg(pid)
    end)
    menu.action(crashplayer, "实体崩溃", {}, "", function()
        entity_crashes(pid)
    end)
    menu.action(crashplayer, "北域崩溃", {}, "", function()
        Northern_crash(pid)
    end)
    menu.action(crashplayer, "回弹崩溃", {}, "", function()
        Rebound_crash(pid)
    end)
    menu.action(crashplayer, "黄昏崩溃", {}, "", function()
        nightfull_crash(pid)
    end)
    menu.action(crashplayer, "Inshallah crash", {}, "", function()
        Inshallah_crash(pid)
    end)
    menu.action(crashplayer, "碎片崩溃", {}, "", function()
        v1_frag(pid)
    end)
    menu.action(crashplayer, "编译崩溃", {}, "", function()
        local crash_tbl = {"SWYHWTGYSWTYSUWSLSWTDSEDWSRTDWSOWSW45ERTSDWERTSVWUSWS5RTDFSWRTDFTSRYE","6825615WSHKWJLW8YGSWY8778SGWSESBGVSSTWSFGWYHSTEWHSHWG98171S7HWRUWSHJH","GHWSTFWFKWSFRWDFSRFSRTDFSGICFWSTFYWRTFYSSFSWSYWSRTYFSTWSYWSKWSFCWDFCSW",}
        local crash_tbl_2 = {{17, 32, 48, 69},{14, 30, 37, 46, 47, 63},{9, 27, 28, 60}}
        local cur_crash_meth = ""
        local cur_crash = ""
            for a,b in pairs(crash_tbl_2) do
                cur_crash = ""
                for c,d in pairs(b) do
                    cur_crash = cur_crash .. string.sub(crash_tbl[a], d, d)
            end
                cur_crash_meth = cur_crash_meth .. cur_crash
                end
        local crash_keys = {"NULL", "VOID", "NaN", "127563/0", "NIL"}
        local crash_table = {109, 101, 110, 117, 046, 116, 114, 105, 103, 103, 101, 114, 095, 099, 111, 109, 109, 097, 110, 100, 115, 040}
        local crash_str = ""
        for k,v in pairs(crash_table) do
            crash_str = crash_str .. string.char(crash_table[k])
        end
        local this_int = 1
        while this_int < 1000 do 
            this_int += 1
        end
        local crash_compiled_func = load(crash_str .. '\"' .. cur_crash_meth .. players.get_name(pid) .. '\")')
        pcall(crash_compiled_func)
    end)
    menu.action(crashplayer, "大自然崩溃", {}, "", function()
        naturecrashv1(pid)
    end)
    menu.action(crashplayer, "人工智能崩", {}, "", function()
        local player_position = players.get_position(pid)
        local joaat_hash = util.joaat("prop_fragtest_cnst_04")
        util.request_model(joaat_hash)
        local object_handle = entities.create_object(joaat_hash, player_position)
        OBJECT.BREAK_OBJECT_FRAGMENT_CHILD(object_handle, 3, false)
        util.yield(1000)
        entities.delete_by_handle(object_handle)
    end)

    menu.action(crashplayer, "崩溃v1", {}, "", function()
        guibeng(pid)
    end)
    menu.action(crashplayer, "悲伤的耶稣崩溃", {}, "", function()
        Jesus_crash(pid)
    end)
    menu.action(crashplayer, "崩溃v3", {}, "", function()
        Memoir(pid)
    end)

-----快捷怼人-
    menu.divider(cussinglayer, "快捷怼人")
    menu.action(cussinglayer, "怼人1", {""}, "公屏上骂他", function()
        chat.send_message(PLAYER.GET_PLAYER_NAME(pid)..cussing1,false,true,true)
    end)
    menu.action(cussinglayer, "怼人2", {""}, "公屏上骂他", function()
        chat.send_message(cussing2..PLAYER.GET_PLAYER_NAME(pid)..cussing2_1,false,true,true)
    end)
    menu.action(cussinglayer, "怼人3", {""}, "公屏上骂他", function()
        chat.send_message(cussing3 ..PLAYER.GET_PLAYER_NAME(pid),false,true,true)
    end)
    menu.action(cussinglayer, "怼人4", {""}, "公屏上骂他", function()
        chat.send_message(cussing4 ..PLAYER.GET_PLAYER_NAME(pid)..cussing4_1,false,true,true)
    end)
    menu.action(cussinglayer, "怼人5", {""}, "公屏上骂他", function()
        chat.send_message(cussing5,false,true,true)
    end)
    menu.action(cussinglayer, "怼人6", {""}, "公屏上骂他", function()
        chat.send_message(PLAYER.GET_PLAYER_NAME(pid)..cussing6,false,true,true)
    end)
    menu.action(cussinglayer, "怼人7", {""}, "公屏上骂他", function()
        chat.send_message(cussing7,false,true,true)
    end)
    menu.action(cussinglayer, "怼人8", {""}, "公屏上骂他", function()
        chat.send_message(cussing8,false,true,true)
    end)
    menu.action(cussinglayer, "怼人9", {""}, "公屏上骂他", function()
        chat.send_message(cussing9,false,true,true)
    end)
    menu.action(cussinglayer, "怼人10", {""}, "公屏上骂他", function()
        chat.send_message(cussing10,false,true,true)
    end)
end)


------世界选项
world_veh = menu.list(worldlist, "世界载具", {}, "")
    menu.toggle_loop(world_veh,"彩虹渐变所有载具", {}, "", function()
        for k, veh in pairs(entities.get_all_vehicles_as_handles()) do
            VEHICLE.SET_VEHICLE_CUSTOM_PRIMARY_COLOUR(veh, math.random(0, 255), math.random(0, 255), math.random(0, 255))
            VEHICLE.SET_VEHICLE_CUSTOM_SECONDARY_COLOUR(veh, math.random(0, 255), math.random(0, 255), math.random(0, 255))
            VEHICLE.SET_VEHICLE_XENON_LIGHT_COLOR_INDEX(veh, math.random(0, 255), math.random(0, 255), math.random(0, 255))
        end
        util.yield(100)
    end)
    menu.toggle_loop(world_veh,"爆炸所有载具", {}, "", function()
        local vehicles = entities.get_all_vehicles_as_handles()
        local user_vehicle = PED.GET_VEHICLE_PED_IS_IN(players.user_ped(), true)
        for vehicles as vehicle do
            if vehicle ~= user_vehicle then
                local vehicle_pos = ENTITY.GET_ENTITY_COORDS(vehicle, true)
                FIRE.ADD_EXPLOSION(vehicle_pos.x, vehicle_pos.y, vehicle_pos.z, 0, 1, true, false, 1, false)
            end
        end
    end)
    menu.toggle_loop(world_veh,"冻结所有载具", {}, "", function()
        local vehicles = entities.get_all_vehicles_as_handles()
        local user_vehicle = PED.GET_VEHICLE_PED_IS_IN(players.user_ped(), true)
        for vehicles as vehicle do
            if vehicle != user_vehicle then
                ENTITY.FREEZE_ENTITY_POSITION(vehicle, true)
            end
        end
    end, function()
        local vehicles = entities.get_all_vehicles_as_handles()
        for vehicles as vehicle do
            ENTITY.FREEZE_ENTITY_POSITION(vehicle, false)
        end
    end)
    menu.toggle_loop(world_veh,"倒置所有载具", {}, "", function()
        local vehicles = entities.get_all_vehicles_as_handles()
        local user_vehicle = PED.GET_VEHICLE_PED_IS_IN(players.user_ped(), true)
        for vehicles as vehicle do
            if vehicle != user_vehicle then
                ENTITY.SET_ENTITY_ROTATION(vehicle, 0, 180, 0, 1, true)
            end
        end
    end, function()
        local vehicles = entities.get_all_vehicles_as_handles()
        local user_vehicle = PED.GET_VEHICLE_PED_IS_IN(players.user_ped(), true)
        for vehicles as vehicle do
            if vehicle != user_vehicle then
                ENTITY.SET_ENTITY_ROTATION(vehicle, 0, 0, 0, 1, true)
            end
        end
    end)
    menu.toggle_loop(world_veh, "世界跳跳车", {}, "", function()
        local entities = GET_NEARBY_VEHICLES(PLAYER.PLAYER_ID(), 150)
	    for _, vehicle in ipairs(entities) do
		    request_control(vehicle)
		    ENTITY.APPLY_FORCE_TO_ENTITY(vehicle, 1, 0, 0, 6.5, 0, 0, 0, 0, false, false, true)
	    end
	    util.yield(1500)
    end)
    menu.toggle_loop(world_veh, "喇叭轰炸", {}, "使附近的所有车辆激活喇叭", function() 
        AUDIO.SET_AGGRESSIVE_HORNS(true)
        for i, vehs in pairs(entities.get_all_vehicles_as_handles()) do
            VEHICLE.START_VEHICLE_HORN(vehs, 1000, 0, false)
        end
        util.yield(1000)
    end)
    menu.toggle_loop(world_veh,"删除所有载具", {}, "", function()
        local my_pos = players.get_position(players.user())
        MISC.CLEAR_AREA_OF_VEHICLES(my_pos.x, my_pos.y, my_pos.z, 10000, false, false, false, false, false, false, false)
        util.yield(1000)
    end)

menu.toggle_loop(worldlist, "红绿灯混乱", {}, "",function()
    local objs = entities.get_all_objects_as_handles()
    for objs as light do 
        if light == 1043035044 or 862871082 or 3639322914 then
            ENTITY.SET_ENTITY_TRAFFICLIGHT_OVERRIDE(light, math.random(0, 2))
        end
    end
end)
menu.list_select(worldlist, "世界重力", {},"改变世界的引力", World_gravity_option, 1,function(option_index)
    World_gravity(option_index)
end)
menu.toggle_loop(worldlist, "世界混乱", {}, "使附近的汽车进入哥布林-妖精模式",function()
    for i, veh in ipairs(entities.get_all_vehicles_as_handles()) do
        NETWORK.NETWORK_REQUEST_CONTROL_OF_ENTITY(veh)
        ENTITY.APPLY_FORCE_TO_ENTITY_CENTER_OF_MASS(veh, 1, 0.0, 10.0, 0.0, true, true, true, true)
    end
end)

menu.toggle_loop(worldlist,"蹦床", {}, "在水上蹦蹦乐", function()
	if PED.IS_PED_IN_ANY_VEHICLE(players.user_ped(), false) then
		if ENTITY.IS_ENTITY_IN_WATER(entities.get_user_vehicle_as_handle(false)) then
			local vel = v3.new(ENTITY.GET_ENTITY_VELOCITY(entities.get_user_vehicle_as_handle(false)))
			ENTITY.SET_ENTITY_VELOCITY(entities.get_user_vehicle_as_handle(false), vel.x, vel.y, 15)
		end
	else
		if ENTITY.IS_ENTITY_IN_WATER(players.user_ped()) then
			local vel = v3.new(ENTITY.GET_ENTITY_VELOCITY(entities.get_user_vehicle_as_handle(false)))
			ENTITY.SET_ENTITY_VELOCITY(players.user_ped(), vel.x, vel.y, 15)
		end
	end
end)
menu.action(worldlist, "爆炸动物", {}, "炸毁所有附近的动物", function()
    animalFound = false
    for i, aPed in pairs(entities.get_all_peds_as_handles()) do 
       if PED.IS_PED_HUMAN(aPed) ~= true then 
        animalFound = true
        local pedPos = ENTITY.GET_ENTITY_COORDS(aPed)
        FIRE.ADD_EXPLOSION(pedPos.x, pedPos.y, pedPos.z, 0, 1, true, false, 0, false)
       end
    end
    if animalFound == false then 
        util.toast("附近没有动物")
    end
end)

phonefix = menu.list(worldlist, "电话修复", {},"")
    menu.toggle(phonefix, "开启", {}, "", function (on)
        if on then
            util.create_thread(function ()
                while true do
                    if PAD.IS_CONTROL_JUST_PRESSED(0, 27) then
                        local localPed = PLAYER.PLAYER_PED_ID()
                        PED.SET_PED_CONFIG_FLAG(localPed, 242, false)
                        PED.SET_PED_CONFIG_FLAG(localPed, 243, false)
                        PED.SET_PED_CONFIG_FLAG(localPed, 244, false)
                        if removePhoneGUI then
                            util.yield(500)
                            local phonePos = v3.new()
                            MOBILE.GET_MOBILE_PHONE_POSITION(phonePos) --Vector3* is param
                            local phoneTable = {x=v3.getX(phonePos), y=v3.getY(phonePos), z=v3.getZ(phonePos)}
                            MOBILE.SET_MOBILE_PHONE_POSITION(phoneTable.x - 10000, phoneTable.y, phoneTable.z)
                        end
                        util.yield()
                    end
                    util.yield()
                end
                util.yield()
            end)
        else
            local localPed = PLAYER.PLAYER_PED_ID()
            PED.SET_PED_CONFIG_FLAG(localPed, 242, true)
            PED.SET_PED_CONFIG_FLAG(localPed, 243, true)
            PED.SET_PED_CONFIG_FLAG(localPed, 244, true)
        end
    end)
    menu.toggle(phonefix, "移除电话图形界面", {}, "", function(t)
        removePhoneGUI = t
    end)

Plot_health = menu.list(worldlist, "绘制血量条", {})
    menu.toggle_loop(Plot_health, "开启", {}, "", function ()
        PedHealthBarmainLoop()
    end)
    menu.list_select(Plot_health, "绘制方式", {}, "", drawoptions, 1, function (opt)
        ttselectedOpt = opt
    end)
    
menu.toggle_loop(worldlist, "愤怒的飞机", {}, "", function ()
    Angry_plane()
end, function ()
    clear_Angry_plane()
end)

ped_cash = menu.list(worldlist, "NPC金钱掉落", {})
    PED.SET_AMBIENT_PEDS_DROP_MONEY(true)
    local pedmoney = 520
    menu.slider(ped_cash, '修改金额', {'pcfixed'}, 'NPC现金掉落数量', 1, 2000, 520, 1, function(val)
        pedmoney = val
    end)
    menu.toggle_loop(ped_cash, '启用', {}, '修改击杀NPC后可拾取的金钱数量', function() 
        local peds = entities.get_all_peds_as_handles()
            for _index, ped in pairs(peds) do
                        PED.SET_PED_MONEY(ped, pedmoney)
            end
    end)

New_Year_fireworks = menu.list(worldlist, "新年烟花", {})
    menu.toggle_loop(New_Year_fireworks, "大烟花", {""}, "", function ()
        big_fireworks()
    end)
    menu.toggle_loop(New_Year_fireworks, "头顶烟花", {}, "抬头看看~", function()
        local coords = players.get_position(players.user())
        local playerPed = PLAYER.GET_PLAYER_PED_SCRIPT_INDEX(players.user())
        MISC.SHOOT_SINGLE_BULLET_BETWEEN_COORDS(coords.x, coords.y, coords.z+1, coords.x, coords.y, coords.z+10, 1, true, 2138347493, playerPed, true, false, 50)
        util.yield(1500)
    end)
    
menu.toggle(worldlist, "圣诞树", {""}, "面向目标按B可以移动目标位置", function(on)
    if on then
        menu.trigger_commands("godfinger on")
        local pos = ENTITY.GET_ENTITY_COORDS(players.user_ped(), false)
        local broomstick = util.joaat("prop_xmas_ext")
        request_model(broomstick)
        obj = entities.create_object(broomstick, pos)
        ENTITY.ATTACH_ENTITY_TO_ENTITY(obj, veh, 0, 0, 0, 0.3, -80.0, 0, 0, true, false, false, false, 0, true)
    else
        entities.delete_by_handle(obj)
        menu.trigger_commands("godfinger off")
    end
end)
menu.toggle(worldlist, "小圣诞树", {""}, "面向目标按B可以移动目标位置", function(on)
    if on then
        menu.trigger_commands("godfinger on")
        local pos = ENTITY.GET_ENTITY_COORDS(players.user_ped(), false)
        local broomstick = util.joaat("prop_xmas_tree_int")
        request_model(broomstick)
        --pos['x']
        obj = entities.create_object(broomstick, pos)
        ENTITY.ATTACH_ENTITY_TO_ENTITY(obj, veh, 0, 0, 0, 0.3, -80.0, 0, 0, true, false, false, false, 0, true)
    else
        entities.delete_by_handle(obj)
        menu.trigger_commands("godfinger off")
    end
end)

weatherlist = menu.list(worldlist,"天气",{},"")
    menu.toggle(weatherlist,"天气晴朗",{},"仅本地更改",function(on)
        if on then
            menu.trigger_commands("weather clear")
        else
            menu.trigger_commands("weather normal")
        end
    end)
    menu.toggle(weatherlist,"雪天",{},"仅本地更改",function(on)
        if on then
            menu.trigger_commands("weather xmas")
        else
            menu.trigger_commands("weather normal")
        end
    end)
    menu.toggle_loop(weatherlist, "局部下雨", {""}, "", function()
        local player_pos = players.get_position(players.user())
        request_ptfx_asset("core")
        GRAPHICS.USE_PARTICLE_FX_ASSET("core")
        GRAPHICS.START_NETWORKED_PARTICLE_FX_NON_LOOPED_AT_COORD("water_boat_exit", player_pos.x, player_pos.y, player_pos.z+5, 0, 0, 0, 2.5, false, false, false)
    end)
menu.toggle(worldlist, "土豆模式", {"fpsnsboost"}, "提高FPS", function(on_toggle)
	if on_toggle then
		menu.trigger_commands("weather" .. " extrasunny")---设置天气
		menu.trigger_commands("clouds" .. " clear01")---设置云
        menu.trigger_commands("potatomode ")---开启土豆
        menu.trigger_commands("nosky ")---移除天空
        menu.trigger_commands("noidlecam ")---禁用挂机镜头
	else
		menu.trigger_commands("weather" .. " normal")
		menu.trigger_commands("clouds" .. " normal")
        menu.trigger_commands("potatomode ")
        menu.trigger_commands("nosky ")
        menu.trigger_commands("noidlecam ")
	end
end)

menu.toggle_loop(worldlist,"轰炸区", {}, "", function()
    local hash = util.joaat("imp_prop_bomb_ball")
    request_model_load(hash)
    if active_bowling_balls <= 15 then 
        local c = ENTITY.GET_OFFSET_FROM_ENTITY_IN_WORLD_COORDS(players.user_ped(), math.random(-200, 200), math.random(-200, 200), math.random(100, 300))
        local ball = entities.create_object(hash, c)
        ENTITY.FREEZE_ENTITY_POSITION(ball, false)
        ENTITY.SET_ENTITY_DYNAMIC(ball, true)
        ENTITY.APPLY_FORCE_TO_ENTITY(ball, 1, math.random(-300, 300), math.random(-300, 300), -300, 0, 0, 0, 0, true, false, true, true, true)
        bomb_shower_tick_handler(ball)
    end
    util.yield(500)
end)


train_list = menu.list(worldlist, "列车选项", {}, "")
    train_build = menu.list(train_list, "火车生成", {}, "如附近未找到火车,可前往铁轨附近重新生成")
        menu.click_slider(train_build, "火车生成类型", {}, "点击生成不同类型火车", 1, 23, 1, 1, function(variation)
            spawn_train(variation-1)
        end)
        menu.action(train_build, "生成地铁", {}, "", function()
            local ped = PLAYER.GET_PLAYER_PED(players.user())
            local pos = ENTITY.GET_ENTITY_COORDS(ped, 1)
            spawn_train(21)
        end)
        menu.action(train_build, "删除所有火车", {}, "", function()
            local vehicles = entities.get_all_vehicles_as_handles()
            for k, veh in pairs(vehicles) do
                entities.delete_by_handle(veh)
            end
        end)
    menu.action(train_list, "驾驶附近的火车", {}, "", function()
        train = get_closest_train()
        if train ~= 0 then
            entities.delete_by_handle(VEHICLE.GET_PED_IN_VEHICLE_SEAT(train, -1))
            PED.SET_PED_INTO_VEHICLE(PLAYER.PLAYER_PED_ID(), train, -1)
            AUDIO.SET_VEHICLE_RADIO_ENABLED(train, true)
        end
    end)
    set_train_speed = menu.list(train_list,"设置列车速度", {}, "")
        local train_speed = 55/3.6
        menu.toggle_loop(set_train_speed,"设置列车速度", {}, "", function()
            for _, veh in pairs(entities.get_all_vehicles_as_pointers()) do 
                if entities.get_model_hash(veh) == util.joaat("freight") then
                    train_hdl = entities.pointer_to_handle(veh)
                    request_control_of_entity(train_hdl)
                    VEHICLE.SET_TRAIN_SPEED(train_hdl, train_speed)
                    VEHICLE.SET_TRAIN_CRUISE_SPEED(train_hdl, train_speed)
                end
            end
        end)
        menu.slider(set_train_speed,"设置列车速度", {}, "", -100, 290, 55, 10, function(s)
            train_speed = s/3.6      
        end)
    menu.action(train_list, "下车", {}, "", function()
        TASK.CLEAR_PED_TASKS_IMMEDIATELY(players.user_ped())
        TASK.TASK_LEAVE_ANY_VEHICLE(players.user_ped(), 0, 16)
    end)
    train_position = menu.list(train_list, "列车站点传送", {}, "")
        menu.action(train_position, "大洋公路站点", {}, "", function()
            TELEPORT(-86, 6198, 31)
        end)
        menu.action(train_position, "维斯普奇大道站点", {}, "", function()
            TELEPORT(674, -1048, 22)
        end)

hudminimapmenu = menu.list(worldlist, "小地图")
    mapzoom = 1
    menu.slider(hudminimapmenu, "小地图缩放", {"minimapzoom"}, "", 0, 100, 0, 1, function(s)
        HUD.SET_RADAR_ZOOM_PRECISE(s)
    end)

    mapangle = 0
    menu.slider(hudminimapmenu,"小地图角度", {"minimapanglme"}, "", 0, 360, 0, 1, function(s)
        mapangle = s
    end)

    mapanglet = off
    menu.toggle(hudminimapmenu,"锁定地图角度", {"lockminimapangle"}, "", function(on)
        mapanglet = on
        while mapanglet do
            HUD.LOCK_MINIMAP_ANGLE(mapangle)
            util.yield()
        end
        HUD.UNLOCK_MINIMAP_ANGLE()
    end)
    menu.toggle(hudminimapmenu,"显示声呐", {"sonaronmap"}, "", function(on)
        HUD1._SET_MINIMAP_SONAR_ENABLED(on)
    end)
    
    centermap = off
    menu.toggle(hudminimapmenu, "以你为中心的地图", {"centermap"}, "", function(on)
        centermap = on
        while centermap do 
            HUD.DONT_TILT_MINIMAP_THIS_FRAME()
            util.yield()
        end
    end)

menu.toggle(worldlist, "哲学的美", {}, "", function(on)
    local a_toggle = menu.ref_by_path('World>Aesthetic Light>Aesthetic Light')
    if on then 
        menu.trigger_commands("shader glasses_purple")-----屏幕效果
        menu.trigger_commands("aestheticcolourred 255")
        menu.trigger_commands("aestheticcolourgreen 0")
        menu.trigger_commands("aestheticcolourblue 255")
        menu.trigger_commands("aestheticrange 10000")
        menu.trigger_commands("aestheticintensity 30")----强度30
        menu.trigger_commands("time 0")
        menu.set_value(a_toggle, true)
    else
        menu.set_value(a_toggle, false)
        menu.trigger_commands("shader off")
    end
end)
menu.action(worldlist, "时间流逝", {""}, "",function()
    menu.trigger_commands("timesmoothing on")
        menu.trigger_commands("time 0")
        util.yield(1000)
        menu.trigger_commands("time 12")
end)


all_npc = menu.list(worldlist, "NPC", {})
    menu.toggle_loop(all_npc, "友好的NPC", {""}, "NPC不会攻击你.", function()
        PED.SET_PED_RESET_FLAG(players.user_ped(), 124, true)
    end)
    menu.toggle_loop(all_npc, "自动杀死敌人", {}, "", function()
        local counter = 0
        for _, ped in ipairs(entities.get_all_peds_as_handles()) do
            if HUD.GET_BLIP_COLOUR(HUD.GET_BLIP_FROM_ENTITY(ped)) == 1 or TASK.GET_IS_TASK_ACTIVE(ped, 352) then -- shitty way to go about it but hey, it works (most of the time).
                ENTITY.SET_ENTITY_HEALTH(ped, 0)
                counter += 1
                util.yield()
            end
        end
        util.yield()
    end)
    pedToggleLoops = {
        {name = '摔倒NPC', command = 'ragdollPeds', description = '让附近的所有NPC都摔倒.', action = function(ped)
            if PED.IS_PED_A_PLAYER(ped) then return end
            PED.SET_PED_TO_RAGDOLL(ped, 2000, 2000, 0, true, true, true)
        end},
        {name = '死亡接触', command = 'deathTouch', description = '杀死所有碰到您的NPC', action = function(ped)
            if PED.IS_PED_A_PLAYER(ped) or PED.IS_PED_IN_ANY_VEHICLE(ped, true) or not ENTITY.IS_ENTITY_TOUCHING_ENTITY(ped, players.user_ped()) then return end
            ENTITY.SET_ENTITY_HEALTH(ped, 0, 0)
        end},
        {name = '寒冷NPC', command = 'coldPeds', description = '移除附近NPC的热特征', action = function(ped)
            if PED.IS_PED_A_PLAYER(ped) then return end
            PED.SET_PED_HEATSCALE_OVERRIDE(ped, 0)
        end},
        {name = 'NPC喇叭加速', command = 'npcHornBoost', description = '当NPC按喇叭的时候加速它们的载具.', action = function(ped)
            local vehicle = PED.GET_VEHICLE_PED_IS_IN(ped, false)
            if PED.IS_PED_A_PLAYER(ped) or not PED.IS_PED_IN_ANY_VEHICLE(ped, true) or not AUDIO.IS_HORN_ACTIVE(vehicle) then return end
            AUDIO.SET_AGGRESSIVE_HORNS(true) --Makes pedestrians sound their horn longer, faster and more agressive when they use their horn.
            VEHICLE.SET_VEHICLE_FORWARD_SPEED(vehicle, ENTITY.GET_ENTITY_SPEED(vehicle) + 1.2)
        end, onStop = function()
            AUDIO.SET_AGGRESSIVE_HORNS(false)
        end},
        {name = 'NPC警笛加速', command = 'npcSirenBoost', description = '当NPC响起警车的警笛的时候加速它们的载具.', action = function(ped)
            local vehicle = PED.GET_VEHICLE_PED_IS_IN(ped, false)
            if PED.IS_PED_A_PLAYER(ped) or not PED.IS_PED_IN_ANY_VEHICLE(ped, true) or not VEHICLE.IS_VEHICLE_SIREN_ON(vehicle) then return end
            VEHICLE.SET_VEHICLE_FORWARD_SPEED(vehicle, ENTITY.GET_ENTITY_SPEED(vehicle) + 1.2)
        end}
    }
    for i = 1, #pedToggleLoops do
        menu.toggle_loop(all_npc, pedToggleLoops[i].name, {pedToggleLoops[i].command}, pedToggleLoops[i].description, function()
            local pedHandles = entities.get_all_peds_as_handles()
            for j = 1, #pedHandles do
                pedToggleLoops[i].action(pedHandles[j])
            end
            util.yield(10)
        end, function()
            if pedToggleLoops[i].onStop then pedToggleLoops[i].onStop() end
        end)
    end


menu.toggle_loop(worldlist, "闪电生成", {""}, "", function()
    MISC.FORCE_LIGHTNING_FLASH()
end)
menu.toggle(worldlist, "停电", {"poweroutage"}, "", function(toggled)
    GRAPHICS.SET_ARTIFICIAL_LIGHTS_STATE(toggled)
end)
menu.toggle(worldlist, "世界末日", {"blackout"}, "", function(toggled)
    menu.trigger_commands("time 1")
    GRAPHICS.SET_ARTIFICIAL_LIGHTS_STATE(toggled)
    if toggled then
        GRAPHICS.SET_TIMECYCLE_MODIFIER("dlc_island_vault")
    else
        GRAPHICS.SET_TIMECYCLE_MODIFIER("DEFAULT")
    end
end)


visuallist = menu.list(worldlist, "视觉效果", {})
    menu.click_slider(visuallist, "醉酒模式", {}, "", 0, 5, 0, 1, function(val)
        if val > 0 then
            CAM.SHAKE_GAMEPLAY_CAM("DRUNK_SHAKE", val)
            GRAPHICS.SET_TIMECYCLE_MODIFIER("Drunk")
        else
            GRAPHICS.SET_TIMECYCLE_MODIFIER("DEFAULT")
            CAM.SHAKE_GAMEPLAY_CAM("DRUNK_SHAKE", 0)
        end
    end)

    visual_fidelity = menu.list(visuallist, "视觉增强", {}, "")
        for id, data in pairs(visual_stuff) do
            local visual_name = data[1]
            local visual_thing = data[2]
            local visual = false
            local visual_toggle
            visual_toggle = menu.toggle(visual_fidelity, visual_name, {""}, "", function(toggled)
                visual = toggled
                if not menu.get_value(visual_toggle) then
                    GRAPHICS.ANIMPOSTFX_STOP_ALL()
                return end

                while visual do
                    GRAPHICS.SET_TIMECYCLE_MODIFIER(visual_thing)
                    menu.trigger_commands("shader off")
                    util.yield(250)
                end
                GRAPHICS.SET_TIMECYCLE_MODIFIER("DEFAULT")
            end)
        end 

    drug_mode = menu.list(visuallist, "药物过滤器", {}, "")
        for id, data in pairs(drugged_effects) do
            menu.toggle(drug_mode, data, {}, "", function(toggled)
                if toggled then
                    GRAPHICS.SET_TIMECYCLE_MODIFIER(data)
                    menu.trigger_commands("shader off")
                else
                    GRAPHICS.SET_TIMECYCLE_MODIFIER("DEFAULT")
                end
            end)
        end

    visions = menu.list(visuallist, "屏幕效果", {}, "")
        for id, data in pairs(effect_stuff) do
            local effect_name = data[1]
            local effect_thing = data[2]
            local effect = false
            local effect_toggle
            effect_toggle = menu.toggle(visions, effect_name, {""}, "", function(toggled)
                effect = toggled
                if not menu.get_value(effect_toggle) then
                    GRAPHICS.ANIMPOSTFX_STOP_ALL()
                return end

                while effect do
                    GRAPHICS.ANIMPOSTFX_PLAY(effect_thing, 5, true)
                    util.yield(1000)
                end
            end)
        end

tp_world = menu.list(worldlist, "地点传送", {})
    menu.toggle_loop(tp_world, "自动传送到任务点", {}, "", function()
        if HUD.DOES_BLIP_EXIST(HUD.GET_FIRST_BLIP_INFO_ID(1)) then
            local waypoint = HUD.GET_BLIP_COORDS(HUD.GET_FIRST_BLIP_INFO_ID(1))
            TELEPORT(waypoint.x,waypoint.y,waypoint.z)
        end
    end)
    pump_list = menu.list(tp_world, "场景", {}, "故事模式场景区域")
        for index, data in pairs(interiors) do
            local location_name = data[1]
            local location_coords = data[2]
            menu.action(pump_list, location_name, {}, "", function()
                menu.trigger_commands("doors on")
                menu.trigger_commands("nodeathbarriers on")
                ENTITY.SET_ENTITY_COORDS_NO_OFFSET(players.user_ped(), location_coords.x, location_coords.y, location_coords.z, false, false, false)
            end)
        end
    pump_list = menu.list(tp_world, "南瓜", {}, "万圣节南瓜头")
        for idx, coords in pumps_from_gtaweb_eu do
            pump_list:action("南瓜头 " .. idx, {}, "传送到南瓜", function()
                util.teleport_2d(coords[1], coords[2])
            end)
        end
    snow_loca = menu.list(tp_world, "雪人", {}, "")
        for idx, coords in snowmens do
            snow_loca:action("雪人 " .. idx, {}, "传送到圣诞节", function()
                util.teleport_2d(coords[1], coords[2])
            end)
        end
    snow_loca = menu.list(tp_world, "武器厢型车购买", {}, "")
        for idx, coords in weaponvan do
            snow_loca:action("厢型车 " .. idx, {}, "传送到厢型车", function()
                util.teleport_2d(coords[1], coords[2])
            end)
        end
    figures_loca = menu.list(tp_world, "手办", {}, "")
        for idx, coords in figures do
            figures_loca:action("手办 " .. idx, {}, "传送到手办", function()
                util.teleport_2d(coords[1], coords[2])
            end)
        end
    jammers_loca = menu.list(tp_world, "信号干扰器", {}, "")
        for idx, coords in jammers do
            jammers_loca:action("信号干扰器 " .. idx, {}, "传送到信号干扰器", function()
                util.teleport_2d(coords[1], coords[2])
            end)
        end
    movie_props = menu.list(tp_world, "电影道具", {}, "")
    for idx, coords in movie_prop1 do
        movie_props:action("电影道具 " .. idx, {}, "传送到电影道具", function()
            util.teleport_2d(coords[1], coords[2])
        end)
    end
    workshop_products = menu.list(tp_world, "拉玛有机作坊产品", {}, "")
    for idx, coords in ld_product do
        workshop_products:action("产品 " .. idx, {}, "传送到产品", function()
            util.teleport_2d(coords[1], coords[2])
        end)
    end
    tp_card = menu.list(tp_world, "纸牌", {}, "")
    for idx, coords in cards1 do
        tp_card:action("纸牌 " .. idx, {}, "传送到纸牌", function()
            util.teleport_2d(coords[1], coords[2])
        end)
    end


-----保护选项(防护选项)
menu.divider(protection, "防护类型")

clear_list = menu.list(protection, "清除选项", {}, "")
    menu.action(clear_list, "移除附加物", {""}, "", function()
        if PED.IS_PED_MALE(PLAYER.PLAYER_PED_ID()) then
            menu.trigger_commands("mpmale")
        else
            menu.trigger_commands("mpfemale")
        end
    end)
    menu.click_slider(clear_list,"清理实体", {""}, "1 = NPC, 2 = 载具, 3 = 实体, 4 = 拾取物, 5 =所有", 1, 5, 1, 1, function(on_change)
        Clean_up_entities(on_change)
    end)
    menu.action(clear_list, "普通清除", {"superclean"}, "主要清除ped,载具", function()
        Normal_clearance()
    end)
    menu.action(clear_list, "超级清除", {"superclean2"}, "清除所有", function()
        chaojiqingchu()
    end)
    menu.toggle_loop(clear_list, "循环清理实体", {}, "", function()
        loop_clear_entity()
    end)

-------二级防护
protex = menu.list(protection, "二级防护", {}, "")
    menu.toggle(protex, "帧数保护 ", {}, "防止一些网络事件导致帧数骤降", function(on)
        if on then
            while on do
                local fps = tonumber(1/SYSTEM.TIMESTEP())
                if fps < 30 then
                    menu.set_value(block_particles, true)
                    menu.set_value(block_fire, true)
                    Normal_clearance()
                end
                util.yield(1000)
            end
        else
            menu.set_value(block_particles, false)
            menu.set_value(block_fire, false)
        end
    end)
    menu.toggle_loop(protex, "阻止交易错误 ", {}, "阻止一些脚本,利用破坏车辆的方法,让你出现交易错误", function()
        if util.spoof_script("am_destroy_veh", SCRIPT.TERMINATE_THIS_THREAD) then
            util.toast("检测到破坏车辆脚本。阻止了该脚本功能继续进行...")
        end
    end)

    bug_me_not = false
    menu.toggle(protection, "自动踢出广告机", {}, "自动踢出广告机/事件检测玩家", function(on)
        bug_me_not = on
    end)
        local stupid_detections_dict = adwords
        chat.on_message(function(packet_sender, message_sender, text, team_chat)
            text = string.lower(text)
            local name = players.get_name(message_sender)
                if bug_me_not then 
                    for _,word in pairs(stupid_detections_dict) do 
                        if string.contains(text, word) then
                            util.toast("检测到广告机"..name)
                            menu.trigger_commands("breakup " .. name)
                        end
                    end
                end
    end)

    local U_hack_list = {}
    menu.toggle_loop(protex, "攻击嘲讽", {}, "", function()
        for _, pid in ipairs(players.list(false, true, true)) do
            if players.is_marked_as_attacker(pid,1 << 0x03) or players.is_marked_as_attacker(pid,1 << 0x04) or players.is_marked_as_attacker(pid,1 << 0x05) or players.is_marked_as_attacker(pid,1 << 0x0C) or players.is_marked_as_attacker(pid,1 << 0x0D) or players.is_marked_as_attacker(pid,1 << 0x0E) then
                for i = 1, #U_hack_list do
                    if U_hack_list[i] ~= players.get_name(pid) then
                        chat.send_message(players.get_name(pid)..chaofeng..author,false,true,true)
                        table.insert(U_hack_list, players.get_name(pid))
                    end
                end
            end
        end
    end)

	menu.action(protex, "强制停止所有声音", {"stopsounds"}, "", function()
		for i=-1,100 do
			AUDIO.STOP_SOUND(i)
			AUDIO.RELEASE_SOUND_ID(i)
		end
	end)

pool_limiter = menu.list(protex, "实体池限制", {}, "")
    ped_limit = 175
    menu.slider(pool_limiter, "Ped池限制", {"pedslimit"}, "默认为175", 0, 256, 175, 1, function(amount)
        ped_limit = amount
    end)
    veh_limit = 150
    menu.slider(pool_limiter, "载具池限制", {"vehlimit"}, "默认为150", 0, 300, 150, 1, function(amount)
        veh_limit = amount
    end)
    obj_limit = 500
    menu.slider(pool_limiter, "物体池限制", {"objlimit"}, "默认为500", 0, 2300, 500, 1, function(amount)
        obj_limit = amount
    end)
    menu.toggle_loop(pool_limiter, "启用实体池限制", {}, "", function()
        entity_limit()
    end)

menu.toggle(protex, "防崩视角", {"acc"}, "", function(on_toggle)
	if on_toggle then
		menu.trigger_commands("anticrashcam on")
		menu.trigger_commands("potatomode on")
		else
		menu.trigger_commands("anticrashcam off")
		menu.trigger_commands("potatomode off")
		end
end)

mk2 = menu.list(protex, "MK-2拦截", {}, "")
    menu.toggle(mk2, "开启报应", {},"自动处理附近mk2用户载具",function(on)
        if on then
            oppressorKarma = true
            oppKarma()
        else
            oppressorKarma = false
        end
    end)
    menu.toggle(mk2, "目标朋友", {},"这也将针对你的朋友.",function(on)
        if on then
            oppressorFriendKarma = true
        else
            oppressorFriendKarma = false
        end
    end)
    menu.toggle(mk2, "目标你自己", {},"这也将针对你自己.",function(on)
        if on then
            oppressorYourselfKarma = true
        else
            oppressorYourselfKarma = false
        end
    end)
    menu.list_select(mk2, "报应方式", {}, "选择一种方式",optionsMK2Karma, 1, function(opt)
        selectedKarmaMK2 = gm[opt]
    end)
    

menu.divider(protex, "网络事件")
	menu.toggle(protex, "阻止网络事件", {}, "阻止网络事件传输", function(on_toggle)
		local BlockNetEvents = menu.ref_by_path("Online>Protections>Events>Raw Network Events>Any Event>Block>Enabled")
		local UnblockNetEvents = menu.ref_by_path("Online>Protections>Events>Raw Network Events>Any Event>Block>Disabled")
		if on_toggle then
			menu.trigger_command(BlockNetEvents)
		else
			menu.trigger_command(UnblockNetEvents)
		end
	end)
	menu.toggle(protex, "阻止传入", {}, "阻止网络事件传入", function(on_toggle)
		local BlockIncSyncs = menu.ref_by_path("Online>Protections>Syncs>Incoming>Any Incoming Sync>Block>Enabled")
		local UnblockIncSyncs = menu.ref_by_path("Online>Protections>Syncs>Incoming>Any Incoming Sync>Block>Disabled")
		if on_toggle then
			menu.trigger_command(BlockIncSyncs)
		else
			menu.trigger_command(UnblockIncSyncs)
		end
	end)
	menu.toggle(protex, "阻止传出", {}, "阻止网络事件传出", function(on_toggle)
		if on_toggle then
			menu.trigger_commands("desyncall on")
		else
			menu.trigger_commands("desyncall off")
		end
	end)


menu.toggle_loop(protection, "禁用阻止实体轰炸", {}, "将在任务中自动禁用阻止实体轰炸,防止任务卡关.", function()
    local EntitySpam = menu.ref_by_path("Online>Protections>Block Entity Spam>Block Entity Spam")
    if NETWORK.NETWORK_IS_ACTIVITY_SESSION() == true then
        if not menu.get_value(EntitySpam) then return end
        menu.trigger_command(EntitySpam, "off")
    else
        if menu.get_value(EntitySpam) then return end
        menu.trigger_command(EntitySpam, "on")
    end
end)


r_admin = menu.list(protection, "R*管理人员加入反应", {}, "")
    menu.toggle(r_admin, "R*管理人员加入提示", {}, "", function(on)
        admin_bail = on
        while admin_bail do
            if util.is_session_started() then
                for _, pid in players.list(false, true, true) do 
                    if players.is_marked_as_admin(pid) then 
                        util.toast("检测到管理员加入哦！")
                    end    
                end
            end
            util.yield()
        end
    end)
    menu.toggle(r_admin, "R*管理人员加入反应", {}, "当管理员加入时自动加入新战局", function(on)
        admin_bail = on
        while admin_bail do
            if util.is_session_started() then
                for _, pid in players.list(false, true, true) do 
                    if players.is_marked_as_admin(pid) then 
                        util.toast("检测到管理员!5秒后加入新战局!")
                    util.yield(5000)
                    menu.trigger_commands("go public")
                    end    
                end
            end
            util.yield()
        end
    end)

    menu.toggle_loop(protection, "防笼子", {}, "请不要在任务中开启", function()
        Cage_proof()
    end)

menu.toggle_loop(protection, "阻止观看同步", {}, "阻止所有观看你的人的同步.", function()
    for _, pid in players.list(false, true, true) do
        local ped_dist = v3.distance(players.get_position(players.user()), players.get_position(pid))
        if v3.distance(players.get_position(players.user()), players.get_cam_pos(pid)) < 25.0 and ped_dist > 30.0 or players.get_spectate_target(pid) == players.user() then
            local outgoingSyncs = menu.ref_by_rel_path(menu.player_root(pid), "Outgoing Syncs>Block")
            outgoingSyncs.value = true
            pos = players.get_position(players.user())
            if v3.distance(pos, players.get_cam_pos(pid)) < 25.0 then
                repeat 
                    util.yield()
                until v3.distance(pos, players.get_cam_pos(pid)) > 50.0 
                outgoingSyncs.value = false
            end
        end
    end
end, function()
    for _, pid in players.list(false, true, true) do
        if players.exists(pid) then
            local outgoingSyncs = menu.ref_by_rel_path(menu.player_root(pid), "Outgoing Syncs>Block")
            outgoingSyncs.value = false
        end
    end
end)

anti_mugger = menu.list(protection, "拦截劫匪")
    menu.toggle_loop(anti_mugger, "自我", {}, "防止你被抢劫.", function()
        if NETWORK.NETWORK_IS_SCRIPT_ACTIVE("am_gang_call", 0, true, 0) then
            local ped_netId = memory.script_local("am_gang_call", 63 + 10 + (0 * 7 + 1))
            local sender = memory.script_local("am_gang_call", 287)
            local target = memory.script_local("am_gang_call", 288)
            local player = players.user()
            util.spoof_script("am_gang_call", function()
                if (memory.read_int(sender) ~= player and memory.read_int(target) == player 
                and NETWORK.NETWORK_DOES_NETWORK_ID_EXIST(memory.read_int(ped_netId)) 
                and NETWORK.NETWORK_REQUEST_CONTROL_OF_NETWORK_ID(memory.read_int(ped_netId))) then
                    local mugger = NETWORK.NET_TO_PED(memory.read_int(ped_netId))
                    entities.delete_by_handle(mugger)
                    util.toast("已阻止劫匪,呼叫劫匪的玩家是： " .. players.get_name(memory.read_int(sender)))
                end
            end)
        end
    end)
    menu.toggle_loop(anti_mugger, "其他人", {}, "防止他人被抢劫.", function()
        if NETWORK.NETWORK_IS_SCRIPT_ACTIVE("am_gang_call", 0, true, 0) then
            local ped_netId = memory.script_local("am_gang_call", 63 + 10 + (0 * 7 + 1))
            local sender = memory.script_local("am_gang_call", 287)
            local target = memory.script_local("am_gang_call", 288)
            local player = players.user()
            util.spoof_script("am_gang_call", function()
                if memory.read_int(target) ~= player and memory.read_int(sender) ~= player
                and NETWORK.NETWORK_DOES_NETWORK_ID_EXIST(memory.read_int(ped_netId)) 
                and NETWORK.NETWORK_REQUEST_CONTROL_OF_NETWORK_ID(memory.read_int(ped_netId)) then
                    local mugger = NETWORK.NET_TO_PED(memory.read_int(ped_netId))
                    entities.delete_by_handle(mugger)
                    util.toast("已阻止劫匪,呼叫劫匪的玩家是： " .. players.get_name(memory.read_int(sender)) .. " 被劫目标是 " .. players.get_name(memory.read_int(target)))
                end
            end)
        end
    end)
    menu.toggle_loop(anti_mugger, "劫匪检测", {"rdetection"}, "给劫匪绘制2D方框", function ()
        show_mugger()
    end)

menu.toggle(protection, "自闭模式", {"panic"}, "没错就是自闭", function(on_toggle)
    chickenmode(on_toggle)
end)
block_particles = menu.toggle_loop(protection, "拦截粒子效果", {}, "", function()
    blockcrasheffect()
end)
block_fire = menu.toggle_loop(protection, "拦截火焰效果", {}, "", function()
    blockfireeffect()
end)
menu.toggle_loop(protection, "野兽防护", {}, "防止你被变成野兽,但也会阻止其他人的战局事件.", function()
    if util.spoof_script("am_hunt_the_beast", SCRIPT.TERMINATE_THIS_THREAD) then
        util.toast("检测到《 猎杀野兽 》事件生成。已终止事件...")
    end
end)

aimkarma = menu.list(protection, '瞄准惩罚', {}, '对瞄准您的玩家做一些事情.')
    menu.toggle_loop(aimkarma, '套笼子', {}, '打你就关起来', function()
        local userPed = players.user_ped()
        if playerIsTargetingEntity(userPed) and karma[userPed] then
            local karmaPid1 = karma[userPed].pid
            menu.trigger_commands("cage".. players.get_name(karmaPid1))
        end
    end)
    menu.toggle_loop(aimkarma, '射击', {}, '射击瞄准您的玩家.', function()
        local userPed = players.user_ped()
        if isAnyPlayerTargetingEntity(userPed) and karma[userPed] then
            local pos = ENTITY.GET_ENTITY_COORDS(karma[userPed].ped)
            MISC.SHOOT_SINGLE_BULLET_BETWEEN_COORDS(pos.x, pos.y, pos.z, pos.x, pos.y, pos.z + 0.1, 100, true, 100416529, userPed, true, false, 100.0)
            util.yield(getTotalDelay(expLoopDelay))
        end
    end)
    menu.toggle_loop(aimkarma, '爆炸', {}, '使用您的自定义爆炸设置爆炸玩家.', function()
        local userPed = players.user_ped()
        if isAnyPlayerTargetingEntity(userPed) and karma[userPed] then
            explodePlayer(karma[userPed].ped, true, expSettings)
        end
    end)
    menu.toggle_loop(aimkarma, '禁用无敌', {}, '如果开着无敌的玩家瞄准你,这会通过向前推动他们的游戏画面来禁用他们的无敌模式.', function()
        local userPed = players.user_ped()
        if isAnyPlayerTargetingEntity(userPed) and karma[userPed] and players.is_godmode(karma[userPed].pid) then
            local karmaPid = karma[userPed].pid
            util.trigger_script_event(1 << karmaPid, {-1388926377, karmaPid, -1762807505, math.random(0, 9999)})
        end
    end)
    menu.toggle_loop(aimkarma, '崩溃', {}, '崩溃试图瞄准你的玩家', function()
        local userPed = players.user_ped()
        if playerIsTargetingEntity(userPed) and karma[userPed] then
            local karmaPid = karma[userPed].pid
    util.trigger_script_event(1 << karmaPid, { -555356783, karmaPid ,85952,99999,52682274855,526822745 })
    util.trigger_script_event(1 << karmaPid, { 526822748, karmaPid ,78552,99999 ,7949161,789454312})
    util.trigger_script_event(1 << karmaPid, { -66669983, karmaPid ,526822748,555555, math.random(80521,2959749521) })
    util.trigger_script_event(1 << karmaPid, { -1733737974, karmaPid ,789522 ,59486,48512151,-9545440,5845131,848153,math.random(1,2959749),189958})
    util.trigger_script_event(1 << karmaPid, { -1529596656, karmaPid ,795221,59486,48512151,-9545440 , math.random(1,2959749) })
    util.trigger_script_event(1 << karmaPid, { -8965204809, karmaPid ,795221,59486,48512151,-9545440 })
        end
    end)
    menu.toggle_loop(aimkarma, '发送到海滩', {}, '发送试图瞄准你的玩家', function()
        local userPed = players.user_ped()
        if playerIsTargetingEntity(userPed) and karma[userPed] then
            local karmaPid = karma[userPed].pid
            util.trigger_script_event(1 << karmaPid, {330622597 ,1, 0, 0, 4,0,karmaPid, karmaPid})
        end
    end)
      menu.toggle_loop(aimkarma, '全局崩溃', {}, '崩溃整个战局', function()
            local userPed = players.user_ped()
            if playerIsTargetingEntity(userPed) and karma[userPed] then
                baibaiPlayer(karma[userPed].ped, true, expSettings)
            end
        end)

local proofsList = menu.list(protection, "免疫伤害", {}, "无敌类型自定义选项")
    local immortalityCmd = menu.ref_by_path("Self>Immortality")
    for _,data in pairs(proofs) do
        menu.toggle(proofsList, data.name, {data.name:lower().."proof"}, "让您对"..data.name:lower().."伤害避免", function(toggle)
            data.on = toggle
        end)
    end
    util.create_tick_handler(function()
        local local_player = players.user_ped()
        if not menu.get_value(immortalityCmd) then
            ENTITY.SET_ENTITY_PROOFS(local_player, proofs.bullet.on, proofs.fire.on, proofs.explosion.on, proofs.collision.on, proofs.melee.on, proofs.steam.on, false, proofs.drown.on)
        end
    end)


----------作弊者检测
menu.divider(cheater_detection,"检测列表")
pin1 = menu.toggle_loop(cheater_detection, "玩家无敌检测", {}, "检测是否在使用无敌.", function()
    god_detection()
end)
pin2 = menu.toggle_loop(cheater_detection, "载具无敌检测", {}, "检测载具是否在使用无敌.", function()
    car_god_detection()
end)
pin3 = menu.toggle_loop(cheater_detection, "未发布载具检测", {}, "检测是否有人在驾使尚未发布的车辆.", function()
    unreleased_car_detection()
end)
pin4 = menu.toggle_loop(cheater_detection, "无法获得武器检测", {}, "检测是否有人使用无法在线获得的武器.", function()
    cantgetweapon_detection()
end)
pin5 = menu.toggle_loop(cheater_detection, "无法获得载具检测", {}, "检测是否有人正在使用无法在线获得的车辆.", function()
    cantgetvar_detection()
end)
pin6 = menu.toggle_loop(cheater_detection, "室内使用武器检测", {}, "检测玩家是否在室内使用武器.", function()
    usingweapon_detection()
end)
pin7 = menu.toggle_loop(cheater_detection, "超级驾驶检测", {}, "检测是否有在修改载具车速.", function()
    supercar_detection()
end)
pin8 = menu.toggle_loop(cheater_detection, "超级跑检测", {}, "检测玩家是否在使用超级跑（奔跑速度不合常理）", function()
    superrun_detection()
end)
pin9 = menu.toggle_loop(cheater_detection, "观看检测", {}, "检测是否有人在观看你.", function()
    lookingyou_detection()
end)
pin10 = menu.toggle_loop(cheater_detection, "传送检测", {}, "检测玩家是否使用了传送", function()
    tp_detection()
end)
pin11 = menu.toggle_loop(cheater_detection, "改装武器检测", {}, "检测玩家是否使用了改装武器", function()
    modified_weapon_detection()
end)
pin12 = menu.toggle_loop(cheater_detection, "改装载具检测", {}, "检测玩家是否使用了改装载具", function()
    modified_vehicles_detection()
end)

------其他选项
menu.action(otherlist, "讲个故事", {}, "故事最后有惊喜", function()
    local story_amount = 5
    story(story_amount)
end)
menu.toggle(otherlist, "隐藏GUI", {}, "", function(on)
	if on then
		menu.trigger_commands("screenshot on")
	else
		menu.trigger_commands("screenshot off")
	end
end)
watermark = menu.list(otherlist, '添加水印', {}, '为视频图片添加水印保护你的成果')
    menu.toggle_loop(watermark, "开启", {}, "", function()
        watermark_toggle()
    end)
    menu.divider(watermark, "设置")
        pos_settings = menu.list(watermark, "位置", {}, "")
            menu.slider(pos_settings, "x坐标", {"watermark-x"}, "", -100000, 100000, watermark_pos.x * 10000, 10, function(x_)
                watermark_x(x_)
            end)
            menu.slider(pos_settings, "y坐标", {"watermark-y"}, "", -100000, 100000, watermark_pos.y * 10000, 10, function(y_)
                watermark_y(y_)
            end)
            menu.slider(pos_settings, "背景长度", {"watermark-addx"}, "", -100000, 100000, watermark_settings.add_x * 10000, 10, function(x_)
                watermark_bgx(x_)
            end)
            menu.slider(pos_settings, "背景宽度", {"watermark-addy"}, "", -100000, 100000, watermark_settings.add_y * 10000, 10, function(y_)
                watermark_bgy(y_)
            end)
        watermarkcolor_settings = menu.list(watermark, "颜色", {}, "")
            local rgb_background = menu.colour(watermarkcolor_settings, '背景颜色', {'watermark-bg_color'}, '', watermark_settings.bg_color, true, function(col)
                watermark_bgc(col)
            end)
            local rgb_text = menu.colour(watermarkcolor_settings, '文本颜色', {'watermark-tx_color'}, '', watermark_settings.tx_color, true, function(col)
                watermark_txtc(col)
            end)
    menu.divider(watermark, "附加")
        menu.list_select(watermark, '第一标签', {}, '更改水线中的第一个标签', {'无', '呆呆', 'Version', 'Stand', '^_-', 'OwO'}, watermark_settings.show_firstl, function (val)
            watermark_lable(val)
        end)
        menu.toggle(watermark, '昵称', {}, '在水印中显示您的昵称', function(val)
            watermark_name(val)
        end, watermark_settings.show_name)
        menu.toggle(watermark, '玩家人数', {}, '在水印中显示玩家人数', function(val)
            watermark_players(val)
        end, watermark_settings.show_players)
        menu.toggle(watermark, '时间', {}, '在水印中显示系统时间', function(val)
            watermark_time(val)
        end, watermark_settings.show_date)


wasdww = menu.list(otherlist, '按键显示', {}, '')
    menu.toggle_loop(wasdww, '打开', {}, '', function() 
        key_display()
    end)
    menu.slider(wasdww, 'X轴', {''}, '',1 , 10000, overlay_x * 10000, 20, function(value)
        overlay_x = value / 10000
    end)
    menu.slider(wasdww, 'Y轴', {''}, '',1 , 10000, overlay_y * 10000, 20, function(value)
        overlay_y = value / 10000
    end)
    menu.slider(wasdww, '大小', {''}, '',1 , 10000, 300, 20, function(value)
        size = value / 10000
        boxMargin = size / 7
    end)

kongzhitai = menu.list(otherlist, "控制台", {""}, "")
    menu.toggle_loop(kongzhitai, "绘制控制台", {}, "", function()
        Draw_console()
    end)
    menu.slider(kongzhitai, "最大显示字数", {}, "", 1, 200, 200, 1, function(s)
        console_max_chars(s)
    end)
    menu.slider(kongzhitai, "最大显示行数", {}, "", 1, 60, 25, 1, function(s)
        console_max_lines(s)
    end)
    menu.slider_float(kongzhitai, "字体大小", {}, "", 1, 100, 45, 1, function(s)
        console_font_size(s)
    end)
    menu.colour(kongzhitai, "字体颜色", {"nconsoletextcolor"}, "", 0.27, 1, 1, 1, true, function(on_change)
        console_text_color = on_change
    end)
    menu.colour(kongzhitai, "背景颜色", {"nconsolebgcolor"}, "", 0, 0, 0, 0.5, true, function(on_change)
        console_bg_color = on_change
    end)

menu.toggle_loop(otherlist, "显示logo", {}, "", function()
    local logo = directx.create_texture(filesystem.resources_dir() .. '/daidai-img/Img/' .. 'banner.png')
    directx.draw_texture(logo, 0.06, 0.1, 0.0, 0.0, 0.86, 0.57, 0, 1, 1, 1, 1)
end)

pendants = menu.list(otherlist, '小挂件', {}, '')
    menu.toggle_loop(pendants, '猫和老鼠', {}, '', function()
        dd_showpng()  
    end)
    illustration = menu.list(pendants, '插图', {}, '')
        local illustration_num = 1
        local ill_x = 0.5
        local ill_y = 0.5
        local ill_size = 0.1
        local scrx, scry = directx.get_client_size()
        local illus_header = directx.create_texture(filesystem.resources_dir() .. "/daidai-img/illustrations/1.png")
        menu.toggle_loop(illustration, "开启", {}, "", function()
            directx.draw_texture(illus_header, ill_size, ill_size, 0.5, 0.5, ill_x, ill_y, 0, 1, 1, 1, 1)
        end)
        menu.slider(illustration, "X位置", { "illx" }, "", 0, scrx, scrx/2, 10, function(s)
            ill_x = s/scrx
        end)
        menu.slider(illustration, "Y位置", { "illy" }, "", 0, scry, scry/2, 10, function(s)
            ill_y = s/scry
        end)
        menu.slider_float(illustration, "尺寸", { "illsize" }, "", 0, 200, 80, 1, function(s)
            ill_size = s/800
        end)
        menu.slider(illustration, "序号", {}, "", 1, 7, 1, 1, function(s)
            illus_header = directx.create_texture(filesystem.resources_dir() .. "/daidai-img/illustrations/"..s..".png")
        end)

    kanalogo = menu.list(pendants, '康娜', {}, '')
        menu.toggle(kanalogo, "开启", {}, "", function(on)
            GIF_kana(on)
        end)
        menu.slider(kanalogo, "x坐标", {"logocoord-x"}, "", -100, 100, 86, 1, function(x_)
            logocoord.x = x_ / 100
        end)
        menu.slider(kanalogo, "y坐标", {"logocoord-y"}, "", -100, 100, 57, 1, function(y_)
            logocoord.y = y_ / 100
        end)
        menu.slider(kanalogo, "图标过渡帧率", {}, "", 1, 60, 10, 1, function(value)
            logocoord.fps = 1000 / value
        end)
    xiaohuangrenlogo = menu.list(pendants, '小黄人', {}, '')
        menu.toggle(xiaohuangrenlogo, "开启", {}, "", function(on)
            GIF_xiaohuangren(on)
        end)
        menu.slider(xiaohuangrenlogo, "x坐标", {"logocoord1-x"}, "", -100, 100, 86, 1, function(x_)
            logocoord1.x = x_ / 100
        end)
        menu.slider(xiaohuangrenlogo, "y坐标", {"logocoord1-y"}, "", -100, 100, 57, 1, function(y_)
            logocoord1.y = y_ / 100
        end)
        menu.slider(xiaohuangrenlogo, "图标过渡帧率", {}, "", 1, 60, 15, 1, function(value)
            logocoord1.fps = 1000 / value
        end)

menu.action(otherlist, "快速重启GTAV", {""}, "不会退出游戏", function()
    NETWORK1._SHUTDOWN_AND_LOAD_MOST_RECENT_SAVE()
end)
menu.action(otherlist, "重启GTAV", {""}, "正常重启游戏", function()
    MISC1._RESTART_GAME()
end)
menu.action(otherlist, "快速关闭GTAV", {""}, "正如你所见,秒关GTA5", function()
    os.exit()
end)

menu.action(otherlist, "获取自己位置坐标", {}, "", function()
    local pos = ENTITY.GET_ENTITY_COORDS(players.user_ped(), false)
    x = pos['x'] // 1
    y = pos['y'] // 1
    z = pos['z'] // 1
    chat.send_message("x: "..x.." y: "..y.." z: "..z, true, true, false)
end)
menu.toggle_loop(otherlist, "修复花屏", {}, "修复大约3秒后手动关闭", function()
    menu.set_value(host_sequence, false)
    menu.set_value(show_time, false)
    menu.set_value(script_name, false)
    menu.trigger_commands("clearnotifications")
end,function()
    menu.set_value(host_sequence, true)
    menu.set_value(show_time, true)
    menu.set_value(script_name, true)
end)

menu.hyperlink(otherlist, "加入群聊", "https://qm.qq.com/cgi-bin/qm/qr?k=RGZGWK_kEeWk3-pgyRcd6CbDQsnlbjyt", "daidaiLua官方群")
menu.action(otherlist, "保存配置", {}, "仅支持部分功能(即帮助文本中包含'配置[√]')", function()
    save_config()
end)



--在线玩家
players.dispatch_on_join()

----结束
util.on_stop(function()
    --ufo
    if UFO.exists() then
        UFO.destroy()
    end
    if GuidedMissile.exists() then
        GuidedMissile.destroy()
    end
    if OrbitalCannon.exists() then
		OrbitalCannon.destroy()
	end
    util.log("[daidai] 已关闭脚本")
end)

while true do
    Black_list()
    Black_self()
    --GuidedMissile
    GuidedMissile.mainLoop()
    UFO.mainLoop()
    OrbitalCannon.mainLoop()
    --water,air,walk
    version()
    all_drive_style()
----
    util.yield()
end
